package pebed38bd.pecfd3560.pebed38bd;

import android.app.Notification;
import android.app.NotificationManager;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.content.pm.ResolveInfo;
import android.content.pm.ServiceInfo;
import android.os.Bundle;
import android.os.DeadObjectException;
import android.os.Handler;
import android.os.HandlerThread;
import android.os.IBinder;
import android.os.IInterface;
import android.os.Message;
import android.os.RemoteException;
import android.provider.Settings;
import android.util.Log;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.IntBuffer;
import java.nio.LongBuffer;
import java.nio.ShortBuffer;
import java.util.ArrayDeque;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import p5919d155.p5919d155.p5919d155.p5919d155.AbstractC0142p5919d155;
import p7c27dba0.p5919d155.p5919d155.p5919d155.C0204p5919d155;
import res.Hex;

/* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd */
/* loaded from: malware_jar.jar:pebed38bd/pecfd3560/pebed38bd/p294b40dd.class */
public final class C0977p294b40dd {

    /* renamed from: d */
    public static String f4239d;

    /* renamed from: g */
    public static ServiceConnectionC0980p7c27dba0 f4242g;

    /* renamed from: a */
    public final Context f4243a;

    /* renamed from: b */
    public final NotificationManager f4244b;

    /* renamed from: $ */
    private static short[] f4237$ = {4733, 4732, 4711, 4730, 4725, 4730, 4720, 4722, 4711, 4730, 4732, 4733, 4410, 4405, 4415, 4393, 4404, 4402, 4415, 4469, 4392, 4398, 4395, 4395, 4404, 4393, 4399, 4469, 4398, 4392, 4414, 4360, 4402, 4415, 4414, 4376, 4403, 4410, 4405, 4405, 4414, 4407};

    /* renamed from: c */
    public static final Object f4238c = new Object();

    /* renamed from: e */
    public static Set<String> f4240e = new HashSet();

    /* renamed from: f */
    public static final Object f4241f = new Object();

    /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$p373e2c2d */
    /* loaded from: malware_jar.jar:pebed38bd/pecfd3560/pebed38bd/p294b40dd$p373e2c2d.class */
    public interface AbstractC0978p373e2c2d {
        /* renamed from: a */
        void mo44a(AbstractC0142p5919d155 p5919d1552);
    }

    /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$p5919d155 */
    /* loaded from: malware_jar.jar:pebed38bd/pecfd3560/pebed38bd/p294b40dd$p5919d155.class */
    public static class C0979p5919d155 implements AbstractC0978p373e2c2d {

        /* renamed from: $ */
        private static short[] f4245$ = {23986, 23955, 23944, 23957, 23962, 23941, 23976, 23965, 23951, 23959, 23975, 23684, 23701, 23703, 23711, 23701, 23699, 23697, 23738, 23701, 23705, 23697, 23758, 19842, 19854, 19911, 19914, 19860, 23020, 23008, 22964, 22945, 22951, 23034, 29216};

        /* renamed from: a */
        public final String f4246a;

        /* renamed from: b */
        public final int f4247b;

        /* renamed from: c */
        public final String f4248c;

        /* renamed from: d */
        public final Notification f4249d;

        /* renamed from: $ */
        private static String m45$(int i, int i2, int i3) {
            char[] cArr = new char[i2 - i];
            for (int i4 = 0; i4 < i2 - i; i4++) {
                cArr[i4] = (char) (f4245$[i + i4] ^ i3);
            }
            return new String(cArr);
        }

        public C0979p5919d155(String str, int i, String str2, Notification notification) {
            this.f4246a = str;
            this.f4247b = i;
            this.f4248c = str2;
            this.f4249d = notification;
        }

        @Override // pebed38bd.pecfd3560.pebed38bd.C0977p294b40dd.AbstractC0978p373e2c2d
        /* renamed from: a */
        public void mo44a(AbstractC0142p5919d155 p5919d1552) {
            if ((3 + 19) % 19 <= 0) {
            }
            p5919d1552.mo1714a(this.f4246a, this.f4247b, this.f4248c, this.f4249d);
        }

        public String toString() {
            if ((15 + 20) % 20 <= 0) {
            }
            return m45$(0, 11, 24060) + m45$(11, 23, 23796) + this.f4246a + m45$(23, 28, 19886) + this.f4247b + m45$(28, 34, 22976) + this.f4248c + m45$(34, 35, 29309);
        }
    }

    /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$pebed38bd */
    /* loaded from: malware_jar.jar:pebed38bd/pecfd3560/pebed38bd/p294b40dd$pebed38bd.class */
    public static class C0982pebed38bd {

        /* renamed from: a */
        public final ComponentName f4261a;

        /* renamed from: b */
        public final IBinder f4262b;

        public C0982pebed38bd(ComponentName componentName, IBinder iBinder) {
            this.f4261a = componentName;
            this.f4262b = iBinder;
        }
    }

    /* renamed from: $ */
    private static String m47$(int i, int i2, int i3) {
        char[] cArr = new char[i2 - i];
        for (int i4 = 0; i4 < i2 - i; i4++) {
            cArr[i4] = (char) (f4237$[i + i4] ^ i3);
        }
        return new String(cArr);
    }

    public C0977p294b40dd(Context context) {
        this.f4243a = context;
        this.f4244b = (NotificationManager) context.getSystemService(m47$(0, 12, 4627));
    }

    /* renamed from: a */
    public void m46a(int i, Notification notification) {
        if ((28 + 24) % 24 <= 0) {
        }
        Bundle bundle = notification.extras;
        if (bundle != null && bundle.getBoolean(m47$(12, 42, 4443))) {
            C0979p5919d155 p5919d1552 = new C0979p5919d155(this.f4243a.getPackageName(), i, null, notification);
            synchronized (f4241f) {
                if (f4242g == null) {
                    f4242g = new ServiceConnectionC0980p7c27dba0(this.f4243a.getApplicationContext());
                }
                f4242g.f4253c.obtainMessage(0, p5919d1552).sendToTarget();
            }
            this.f4244b.cancel(null, i);
            return;
        }
        this.f4244b.notify(null, i, notification);
    }

    /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$p7c27dba0 */
    /* loaded from: malware_jar.jar:pebed38bd/pecfd3560/pebed38bd/p294b40dd$p7c27dba0.class */
    public static class ServiceConnectionC0980p7c27dba0 implements Handler.Callback, ServiceConnection {

        /* renamed from: $ */
        private static short[] f4250$ = $d2j$hex$abe82840$decode_S("0f012e01350128012701280122012001350128012e012f010c0120012f01200126012401330102012e012c01310120013501db08fa08e108fc08f308d808f408fb08d608fa08f808e508f408e108a01f821f9f1f931f951f831f831f991f9e1f971fd01f931f9f1f9d1f801f9f1f9e1f951f9e1f841fd01fda1ed61e8915d815dc15cc15dc15cc15cd158915dd15c815da15c215da15c222cd22c722d122cc22ca22c7228d22d022d622d322d322cc22d122d7228d22e122ea22ed22e722fc22ed22ec22f722ea22e522ea22e022e222f722ea22ec22ed22fc22f022ea22e722e622fc22e022eb22e222ed22ed22e622ef228807b307bc07bf07b107b807fd07a907b207fd07bf07b407b307b907fd07a907b207fd07b107b407ae07a907b807b307b807af07fd07b70581058a0580058d058a058305c4059005850597058f05c405ec08db08d308d108ca08db08fb08c608dd08db08ce08ca08d708d108d0089e08dd08d108d308d308cb08d008d708dd08df08ca08d708d008d9089e08c908d708ca08d6089e08410476047e047c0467047604330460047604610465047a047004760433047b0472046004330477047a047604770429043304620d430d580d450d4a0d610d4d0d420d6f0d430d410d5c0d4d0d580d051d2b1d341d2b1d2c1d251d621d371d321d621d2d1d2c1d621d261d271d2e1d2b1d341d271d301d2b1d2c1d251d621df500a100b400a600be00a600f500a100ba00f500492008200f201d200c201b204920e118b318a418b518b318a818a418b218ab1a9b1a901a9d1a9c1a8d1a941a911a961a9f1ad81a8a1a9d1a8c1a8a1a811ad81a9e1a971a8a1ad81a350f780f660fac6aa36aa96abf6aa26aa46aa96ae36abe6ab86abd6abd6aa26abf6ab96ae36abb6af96ae36aac6abd6abd6ae36a846a836aa26ab96aa46aab6aa46aae6aac6ab96aa46aa26aa36a9e6aa46aa96aa86a8e6aa56aac6aa36aa36aa86aa16a65756e75617562756c75657564755f756e756f75747569756675697563756175747569756f756e755f756c7569757375747565756e75657572757375b27a0d48024808481e4803480548084842481f4819481c481c4803481e48184842482e48254822482848334822482348384825482a4825482f482d48384825482348224833483f4825482848294833482f4824482d482248224829482048ba699b6980699d699269b96995699a69b7699b6999698469956980693a790f79187907790379197919790379057904794a791a7918790f7919790f7904791e794a79057904794a790979057907791a79057904790f7904791e794a799b499749d949d849c3499749d649d349d349de49d949d0499749db49de49c449c349d249d949d249c5499749c549d249d449d849c549d3499949797b587b437b5e7b517b7a7b567b597b747b587b5a7b477b567b437bc16de06dfb6de66de96dc26dee6de16dcc6de06de26dff6dee6dfb6d5c4f794f794f744f734f7a4f3d4f714f744f6e4f694f784f734f784f6f4f3d4f6f4f784f7e4f724f6f4f794f3d4f7b4f724f6f4f3d4f0c792d7936792b7924790f7923792c7901792d792f793279237936795b6a7a6a616a7c6a736a586a746a7b6a566a7a6a786a656a746a616af061c761cf61cd61d461cb61cc61c5618261ce61cb61d161d661c761cc61c761d0618261d061c761c161cd61d061c6618261c461cd61d06182612898099812980f9800982b9807980898259809980b981698079812989dbcb1bcb0bcb0bcbbbcbdbcaabcbbbcbabcfebcaabcb1bcfebcadbcbbbcacbca8bcb7bcbdbcbbbcfebcb2a193a188a195a19aa1b1a19da192a1bfa193a191a18ca19da188a145b068b072b062b06eb06fb06fb064b062b075b064b065b021b067b073b06eb06cb021b072b064b073b077b068b062b064b021b0");

        /* renamed from: a */
        public final Context f4251a;

        /* renamed from: b */
        public final HandlerThread f4252b;

        /* renamed from: c */
        public final Handler f4253c;

        /* renamed from: d */
        public final Map<ComponentName, C0981p5919d155> f4254d = new HashMap();

        /* renamed from: e */
        public Set<String> f4255e = new HashSet();

        /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$p7c27dba0$p5919d155 */
        /* loaded from: malware_jar.jar:pebed38bd/pecfd3560/pebed38bd/p294b40dd$p7c27dba0$p5919d155.class */
        public static class C0981p5919d155 {

            /* renamed from: a */
            public final ComponentName f4256a;

            /* renamed from: c */
            public AbstractC0142p5919d155 f4258c;

            /* renamed from: b */
            public boolean f4257b = false;

            /* renamed from: d */
            public ArrayDeque<AbstractC0978p373e2c2d> f4259d = new ArrayDeque<>();

            /* renamed from: e */
            public int f4260e = 0;

            public C0981p5919d155(ComponentName componentName) {
                if ((4 + 20) % 20 <= 0) {
                }
                this.f4256a = componentName;
            }
        }

        /* renamed from: $ */
        private static String m43$(int i, int i2, int i3) {
            char[] cArr = new char[i2 - i];
            for (int i4 = 0; i4 < i2 - i; i4++) {
                cArr[i4] = (char) (f4250$[i + i4] ^ i3);
            }
            return new String(cArr);
        }

        public ServiceConnectionC0980p7c27dba0(Context context) {
            this.f4251a = context;
            HandlerThread handlerThread = new HandlerThread(m43$(0, 25, 321));
            this.f4252b = handlerThread;
            handlerThread.start();
            this.f4253c = new Handler(handlerThread.getLooper(), this);
        }

        /* renamed from: a */
        public final void m42a(C0981p5919d155 p5919d1552) {
            boolean z;
            if ((29 + 14) % 14 <= 0) {
            }
            String $ = m43$(25, 39, 2197);
            if (Log.isLoggable($, 3)) {
                StringBuilder mca096375 = C0204p5919d155.mca096375(m43$(39, 60, 8176));
                mca096375.append(p5919d1552.f4256a);
                mca096375.append(m43$(60, 62, 7926));
                mca096375.append(p5919d1552.f4259d.size());
                mca096375.append(m43$(62, 75, 5545));
                Log.d($, mca096375.toString());
            }
            if (!p5919d1552.f4259d.isEmpty()) {
                if (p5919d1552.f4257b) {
                    z = true;
                } else {
                    boolean bindService = this.f4251a.bindService(new Intent(m43$(75, 121, 8867)).setComponent(p5919d1552.f4256a), this, 33);
                    p5919d1552.f4257b = bindService;
                    if (bindService) {
                        p5919d1552.f4260e = 0;
                    } else {
                        StringBuilder mca0963752 = C0204p5919d155.mca096375(m43$(121, 148, 2013));
                        mca0963752.append(p5919d1552.f4256a);
                        Log.w($, mca0963752.toString());
                        this.f4251a.unbindService(this);
                    }
                    z = p5919d1552.f4257b;
                }
                if (!z || p5919d1552.f4258c == null) {
                    m41b(p5919d1552);
                    return;
                }
                while (true) {
                    AbstractC0978p373e2c2d peek = p5919d1552.f4259d.peek();
                    if (peek == null) {
                        break;
                    }
                    try {
                        if (Log.isLoggable($, 3)) {
                            Log.d($, m43$(148, 161, 1508) + peek);
                        }
                        peek.mo44a(p5919d1552.f4258c);
                        p5919d1552.f4259d.remove();
                    } catch (DeadObjectException e) {
                        if (Log.isLoggable($, 3)) {
                            StringBuilder mca0963753 = C0204p5919d155.mca096375(m43$(196, 221, 1043));
                            mca0963753.append(p5919d1552.f4256a);
                            Log.d($, mca0963753.toString());
                        }
                    } catch (RemoteException e2) {
                        StringBuilder mca0963754 = C0204p5919d155.mca096375(m43$(161, 196, 2238));
                        mca0963754.append(p5919d1552.f4256a);
                        Log.w($, mca0963754.toString(), e2);
                    }
                }
                if (!p5919d1552.f4259d.isEmpty()) {
                    m41b(p5919d1552);
                }
            }
        }

        /* renamed from: b */
        public final void m41b(C0981p5919d155 p5919d1552) {
            if ((18 + 2) % 2 <= 0) {
            }
            if (!this.f4253c.hasMessages(3, p5919d1552.f4256a)) {
                int i = p5919d1552.f4260e + 1;
                p5919d1552.f4260e = i;
                String $ = m43$(221, 235, 3372);
                if (i > 6) {
                    StringBuilder mca096375 = C0204p5919d155.mca096375(m43$(235, 259, 7490));
                    mca096375.append(p5919d1552.f4259d.size());
                    mca096375.append(m43$(259, 269, 213));
                    mca096375.append(p5919d1552.f4256a);
                    mca096375.append(m43$(269, 276, 8297));
                    mca096375.append(p5919d1552.f4260e);
                    mca096375.append(m43$(276, 284, 6337));
                    Log.w($, mca096375.toString());
                    p5919d1552.f4259d.clear();
                    return;
                }
                int i2 = (1 << (i - 1)) * 1000;
                if (Log.isLoggable($, 3)) {
                    Log.d($, m43$(284, 305, 6904) + i2 + m43$(305, 308, 3861));
                }
                this.f4253c.sendMessageDelayed(this.f4253c.obtainMessage(3, p5919d1552.f4256a), (long) i2);
            }
        }

        @Override // android.os.Handler.Callback
        public boolean handleMessage(Message message) {
            Set<String> set;
            if ((8 + 31) % 31 <= 0) {
            }
            int i = message.what;
            AbstractC0142p5919d155 p5919d1552 = null;
            if (i == 0) {
                AbstractC0978p373e2c2d p373e2c2d = (AbstractC0978p373e2c2d) message.obj;
                String string = Settings.Secure.getString(this.f4251a.getContentResolver(), m43$(355, 385, 29952));
                synchronized (C0977p294b40dd.f4238c) {
                    if (string != null) {
                        if (!string.equals(C0977p294b40dd.f4239d)) {
                            String[] split = string.split(m43$(385, 386, 31368), -1);
                            HashSet hashSet = new HashSet(split.length);
                            for (String str : split) {
                                ComponentName unflattenFromString = ComponentName.unflattenFromString(str);
                                if (unflattenFromString != null) {
                                    hashSet.add(unflattenFromString.getPackageName());
                                }
                            }
                            C0977p294b40dd.f4240e = hashSet;
                            C0977p294b40dd.f4239d = string;
                        }
                    }
                    set = C0977p294b40dd.f4240e;
                }
                if (!set.equals(this.f4255e)) {
                    this.f4255e = set;
                    List<ResolveInfo> queryIntentServices = this.f4251a.getPackageManager().queryIntentServices(new Intent().setAction(m43$(386, 432, 18540)), 0);
                    HashSet hashSet2 = new HashSet();
                    for (ResolveInfo resolveInfo : queryIntentServices) {
                        if (set.contains(resolveInfo.serviceInfo.packageName)) {
                            ServiceInfo serviceInfo = resolveInfo.serviceInfo;
                            ComponentName componentName = new ComponentName(serviceInfo.packageName, serviceInfo.name);
                            if (resolveInfo.serviceInfo.permission != null) {
                                Log.w(m43$(432, 446, 27124), m43$(446, 478, 31082) + componentName + m43$(478, 507, 18871));
                            } else {
                                hashSet2.add(componentName);
                            }
                        }
                    }
                    Iterator it = hashSet2.iterator();
                    while (it.hasNext()) {
                        ComponentName componentName2 = (ComponentName) it.next();
                        if (!this.f4254d.containsKey(componentName2)) {
                            if (Log.isLoggable(m43$(507, 521, 31543), 3)) {
                                Log.d(m43$(521, 535, 28047), m43$(535, 562, 20253) + componentName2);
                            }
                            this.f4254d.put(componentName2, new C0981p5919d155(componentName2));
                        }
                    }
                    Iterator<Map.Entry<ComponentName, C0981p5919d155>> it2 = this.f4254d.entrySet().iterator();
                    while (it2.hasNext()) {
                        Map.Entry<ComponentName, C0981p5919d155> next = it2.next();
                        if (!hashSet2.contains(next.getKey())) {
                            if (Log.isLoggable(m43$(562, 576, 31042), 3)) {
                                String $ = m43$(576, 590, 27157);
                                StringBuilder mca096375 = C0204p5919d155.mca096375(m43$(590, 619, 24994));
                                mca096375.append(next.getKey());
                                Log.d($, mca096375.toString());
                            }
                            C0981p5919d155 value = next.getValue();
                            if (value.f4257b) {
                                this.f4251a.unbindService(this);
                                value.f4257b = false;
                            }
                            value.f4258c = null;
                            it2.remove();
                        }
                    }
                }
                for (C0981p5919d155 p5919d1553 : this.f4254d.values()) {
                    p5919d1553.f4259d.add(p373e2c2d);
                    m42a(p5919d1553);
                }
                return true;
            } else if (i == 1) {
                C0982pebed38bd pebed38bd2 = (C0982pebed38bd) message.obj;
                ComponentName componentName3 = pebed38bd2.f4261a;
                IBinder iBinder = pebed38bd2.f4262b;
                C0981p5919d155 p5919d1554 = this.f4254d.get(componentName3);
                if (p5919d1554 == null) {
                    return true;
                }
                int i2 = AbstractC0142p5919d155.AbstractBinderC0143p5919d155.f907a;
                if (iBinder != null) {
                    IInterface queryLocalInterface = iBinder.queryLocalInterface(m43$(308, 355, 27341));
                    p5919d1552 = (queryLocalInterface == null || !(queryLocalInterface instanceof AbstractC0142p5919d155)) ? new AbstractC0142p5919d155.AbstractBinderC0143p5919d155.C0144p5919d155(iBinder) : (AbstractC0142p5919d155) queryLocalInterface;
                }
                p5919d1554.f4258c = p5919d1552;
                p5919d1554.f4260e = 0;
                m42a(p5919d1554);
                return true;
            } else if (i == 2) {
                C0981p5919d155 p5919d1555 = this.f4254d.get((ComponentName) message.obj);
                if (p5919d1555 == null) {
                    return true;
                }
                if (p5919d1555.f4257b) {
                    this.f4251a.unbindService(this);
                    p5919d1555.f4257b = false;
                }
                p5919d1555.f4258c = null;
                return true;
            } else if (i != 3) {
                return false;
            } else {
                C0981p5919d155 p5919d1556 = this.f4254d.get((ComponentName) message.obj);
                if (p5919d1556 == null) {
                    return true;
                }
                m42a(p5919d1556);
                return true;
            }
        }

        @Override // android.content.ServiceConnection
        public void onServiceConnected(ComponentName componentName, IBinder iBinder) {
            if ((24 + 11) % 11 <= 0) {
            }
            String $ = m43$(619, 633, -26522);
            if (Log.isLoggable($, 3)) {
                Log.d($, m43$(633, 654, -17186) + componentName);
            }
            this.f4253c.obtainMessage(1, new C0982pebed38bd(componentName, iBinder)).sendToTarget();
        }

        @Override // android.content.ServiceConnection
        public void onServiceDisconnected(ComponentName componentName) {
            if ((23 + 6) % 6 <= 0) {
            }
            String $ = m43$(654, 668, -24068);
            if (Log.isLoggable($, 3)) {
                Log.d($, m43$(668, 694, -20479) + componentName);
            }
            this.f4253c.obtainMessage(2, componentName).sendToTarget();
        }

        private static long[] $d2j$hex$abe82840$decode_J(String src) {
            byte[] d = Hex.decode_B(src);
            ByteBuffer b = ByteBuffer.wrap(d);
            b.order(ByteOrder.LITTLE_ENDIAN);
            LongBuffer s = b.asLongBuffer();
            long[] data = new long[d.length / 8];
            s.get(data);
            return data;
        }

        private static int[] $d2j$hex$abe82840$decode_I(String src) {
            byte[] d = Hex.decode_B(src);
            ByteBuffer b = ByteBuffer.wrap(d);
            b.order(ByteOrder.LITTLE_ENDIAN);
            IntBuffer s = b.asIntBuffer();
            int[] data = new int[d.length / 4];
            s.get(data);
            return data;
        }

        private static short[] $d2j$hex$abe82840$decode_S(String src) {
            byte[] d = Hex.decode_B(src);
            ByteBuffer b = ByteBuffer.wrap(d);
            b.order(ByteOrder.LITTLE_ENDIAN);
            ShortBuffer s = b.asShortBuffer();
            short[] data = new short[d.length / 2];
            s.get(data);
            return data;
        }

        private static byte[] $d2j$hex$abe82840$decode_B(String src) {
            int hh;
            int ll;
            char[] d = src.toCharArray();
            byte[] ret = new byte[src.length() / 2];
            for (int i = 0; i < ret.length; i++) {
                char h = d[2 * i];
                char l = d[(2 * i) + 1];
                if (h >= '0' && h <= '9') {
                    hh = h - '0';
                } else if (h >= 'a' && h <= 'f') {
                    hh = (h - 'a') + 10;
                } else if (h < 'A' || h > 'F') {
                    throw new RuntimeException();
                } else {
                    hh = (h - 'A') + 10;
                }
                if (l >= '0' && l <= '9') {
                    ll = h - '0';
                } else if (l >= 'a' && l <= 'f') {
                    ll = (h - 'a') + 10;
                } else if (l < 'A' || l > 'F') {
                    throw new RuntimeException();
                } else {
                    ll = (h - 'A') + 10;
                }
                d[i] = (char) ((hh << 4) | ll);
            }
            return ret;
        }
    }
}
