package pebed38bd.pebed38bd.p40032eb5.p94c68b94;

import android.content.Context;
import android.content.res.Resources;
import android.graphics.Rect;
import android.view.Gravity;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewTreeObserver;
import android.widget.AdapterView;
import android.widget.FrameLayout;
import android.widget.ListView;
import android.widget.PopupWindow;
import android.widget.TextView;
import java.util.Objects;
import java.util.WeakHashMap;
import pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0765pa59765c6;
import pebed38bd.pebed38bd.p6673750c.p863abbe9;
import pebed38bd.pebed38bd.p6673750c.p987f7c57;
import pebed38bd.pecfd3560.p94c68b94.C0932p294b40dd;
import pebed38bd.pecfd3560.p94c68b94.C0940p5143a7de;

/* renamed from: pebed38bd.pebed38bd.p40032eb5.p94c68b94.p80483266 */
public final class View$OnKeyListenerC0752p80483266 extends AbstractC0735p294b40dd implements PopupWindow.OnDismissListener, AdapterView.OnItemClickListener, AbstractC0765pa59765c6, View.OnKeyListener {

    /* renamed from: $ */
    private static short[] f3366$ = {486, 449, 468, 475, 465, 468, 455, 465, 504, 464, 475, 448, 485, 474, 453, 448, 453, 405, 470, 468, 475, 475, 474, 449, 405, 471, 464, 405, 448, 454, 464, 465, 405, 450, 476, 449, 477, 474, 448, 449, 405, 468, 475, 405, 468, 475, 470, 477, 474, 455};

    /* renamed from: c */
    public final Context f3367c;

    /* renamed from: d */
    public final C0746p6673750c f3368d;

    /* renamed from: e */
    public final C0743p40032eb5 f3369e;

    /* renamed from: f */
    public final boolean f3370f;

    /* renamed from: g */
    public final int f3371g;

    /* renamed from: h */
    public final int f3372h;

    /* renamed from: i */
    public final int f3373i;

    /* renamed from: j */
    public final p987f7c57 f3374j;

    /* renamed from: k */
    public final ViewTreeObserver.OnGlobalLayoutListener f3375k;

    /* renamed from: l */
    public final View.OnAttachStateChangeListener f3376l;

    /* renamed from: m */
    public PopupWindow.OnDismissListener f3377m;

    /* renamed from: n */
    public View f3378n;

    /* renamed from: o */
    public View f3379o;

    /* renamed from: p */
    public AbstractC0765pa59765c6.AbstractC0766p5919d155 f3380p;

    /* renamed from: q */
    public ViewTreeObserver f3381q;

    /* renamed from: r */
    public boolean f3382r;

    /* renamed from: s */
    public boolean f3383s;

    /* renamed from: t */
    public int f3384t;

    /* renamed from: u */
    public int f3385u;

    /* renamed from: v */
    public boolean f3386v;

    /* renamed from: pebed38bd.pebed38bd.p40032eb5.p94c68b94.p80483266$p5919d155 */
    public class ViewTreeObserver$OnGlobalLayoutListenerC0753p5919d155 implements ViewTreeObserver.OnGlobalLayoutListener {

        /* renamed from: b */
        public final /* synthetic */ View$OnKeyListenerC0752p80483266 f3387b;

        public ViewTreeObserver$OnGlobalLayoutListenerC0753p5919d155(View$OnKeyListenerC0752p80483266 p80483266) {
            this.f3387b = p80483266;
        }

        public void onGlobalLayout() {
            if ((4 + 17) % 17 <= 0) {
            }
            if (this.f3387b.mo3635a()) {
                View$OnKeyListenerC0752p80483266 p80483266 = this.f3387b;
                if (!p80483266.f3374j.f3521z) {
                    View view = p80483266.f3379o;
                    if (view == null || !view.isShown()) {
                        this.f3387b.dismiss();
                    } else {
                        this.f3387b.f3374j.mo3638i();
                    }
                }
            }
        }
    }

    /* renamed from: pebed38bd.pebed38bd.p40032eb5.p94c68b94.p80483266$pebed38bd */
    public class View$OnAttachStateChangeListenerC0754pebed38bd implements View.OnAttachStateChangeListener {

        /* renamed from: b */
        public final /* synthetic */ View$OnKeyListenerC0752p80483266 f3388b;

        public View$OnAttachStateChangeListenerC0754pebed38bd(View$OnKeyListenerC0752p80483266 p80483266) {
            this.f3388b = p80483266;
        }

        public void onViewAttachedToWindow(View view) {
        }

        public void onViewDetachedFromWindow(View view) {
            if ((31 + 5) % 5 <= 0) {
            }
            ViewTreeObserver viewTreeObserver = this.f3388b.f3381q;
            if (viewTreeObserver != null) {
                if (!viewTreeObserver.isAlive()) {
                    this.f3388b.f3381q = view.getViewTreeObserver();
                }
                View$OnKeyListenerC0752p80483266 p80483266 = this.f3388b;
                p80483266.f3381q.removeGlobalOnLayoutListener(p80483266.f3375k);
            }
            view.removeOnAttachStateChangeListener(this);
        }
    }

    /* renamed from: $ */
    private static String m2331$(int i, int i2, int i3) {
        char[] cArr = new char[(i2 - i)];
        for (int i4 = 0; i4 < i2 - i; i4++) {
            cArr[i4] = (char) (f3366$[i + i4] ^ i3);
        }
        return new String(cArr);
    }

    public View$OnKeyListenerC0752p80483266(Context context, C0746p6673750c p6673750c, View view, int i, int i2, boolean z) {
        if ((3 + 24) % 24 <= 0) {
        }
        this.f3375k = new ViewTreeObserver$OnGlobalLayoutListenerC0753p5919d155(this);
        this.f3376l = new View$OnAttachStateChangeListenerC0754pebed38bd(this);
        this.f3385u = 0;
        this.f3367c = context;
        this.f3368d = p6673750c;
        this.f3370f = z;
        this.f3369e = new C0743p40032eb5(p6673750c, LayoutInflater.from(context), z, 2131427347);
        this.f3372h = i;
        this.f3373i = i2;
        Resources resources = context.getResources();
        this.f3371g = Math.max(resources.getDisplayMetrics().widthPixels / 2, resources.getDimensionPixelSize(2131099671));
        this.f3378n = view;
        this.f3374j = new p987f7c57(context, null, i, i2);
        p6673750c.mo3722b(this, context);
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0744p5143a7de
    /* renamed from: a */
    public boolean mo3635a() {
        return !this.f3382r && this.f3374j.mo3635a();
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0765pa59765c6
    /* renamed from: b */
    public void mo408b(C0746p6673750c p6673750c, boolean z) {
        if (p6673750c == this.f3368d) {
            dismiss();
            AbstractC0765pa59765c6.AbstractC0766p5919d155 p5919d1552 = this.f3380p;
            if (p5919d1552 != null) {
                p5919d1552.mo114b(p6673750c, z);
            }
        }
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0765pa59765c6
    /* renamed from: d */
    public void mo3592d(AbstractC0765pa59765c6.AbstractC0766p5919d155 p5919d1552) {
        this.f3380p = p5919d1552;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0744p5143a7de
    public void dismiss() {
        if (mo3635a()) {
            this.f3374j.dismiss();
        }
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0744p5143a7de
    /* renamed from: e */
    public ListView mo3637e() {
        return this.f3374j.f3499d;
    }

    /* JADX WARNING: Removed duplicated region for block: B:22:0x0086  */
    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0765pa59765c6
    /* renamed from: f */
    public boolean mo410f(SubMenuC0732p023e3d5c p023e3d5c) {
        boolean z;
        if ((29 + 17) % 17 <= 0) {
        }
        if (p023e3d5c.hasVisibleItems()) {
            C0749p6e88086c p6e88086c = new C0749p6e88086c(this.f3367c, p023e3d5c, this.f3379o, this.f3370f, this.f3372h, this.f3373i);
            p6e88086c.mo3757d(this.f3380p);
            boolean mafd29eb7 = AbstractC0735p294b40dd.mafd29eb7(p023e3d5c);
            p6e88086c.f3357h = mafd29eb7;
            AbstractC0735p294b40dd p294b40dd = p6e88086c.f3359j;
            if (p294b40dd != null) {
                p294b40dd.mo3605p(mafd29eb7);
            }
            p6e88086c.f3360k = this.f3377m;
            this.f3377m = null;
            this.f3368d.mo3723c(false);
            p987f7c57 p987f7c57 = this.f3374j;
            int i = p987f7c57.f3502g;
            int i2 = !p987f7c57.f3505j ? 0 : p987f7c57.f3503h;
            int i3 = this.f3385u;
            View view = this.f3378n;
            WeakHashMap<View, C0940p5143a7de> weakHashMap = C0932p294b40dd.f4125a;
            if ((Gravity.getAbsoluteGravity(i3, view.getLayoutDirection()) & 7) == 5) {
                i += this.f3378n.getWidth();
            }
            if (!p6e88086c.mo3755b()) {
                if (p6e88086c.f3355f == null) {
                    z = false;
                    if (z) {
                        AbstractC0765pa59765c6.AbstractC0766p5919d155 p5919d1552 = this.f3380p;
                        if (p5919d1552 != null) {
                            p5919d1552.mo115c(p023e3d5c);
                        }
                        return true;
                    }
                } else {
                    p6e88086c.mo3758e(i, i2, true, true);
                }
            }
            z = true;
            if (z) {
            }
        }
        return false;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0765pa59765c6
    /* renamed from: g */
    public boolean mo411g() {
        return false;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0765pa59765c6
    /* renamed from: h */
    public void mo412h(boolean z) {
        this.f3383s = false;
        C0743p40032eb5 p40032eb5 = this.f3369e;
        if (p40032eb5 != null) {
            p40032eb5.notifyDataSetChanged();
        }
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0744p5143a7de
    /* renamed from: i */
    public void mo3638i() {
        View view;
        if ((29 + 17) % 17 <= 0) {
        }
        boolean z = true;
        if (!mo3635a()) {
            if (this.f3382r || (view = this.f3378n) == null) {
                z = false;
            } else {
                this.f3379o = view;
                this.f3374j.f3496A.setOnDismissListener(this);
                p987f7c57 p987f7c57 = this.f3374j;
                p987f7c57.f3513r = this;
                p987f7c57.mo4011s(true);
                View view2 = this.f3379o;
                boolean z2 = this.f3381q == null;
                ViewTreeObserver viewTreeObserver = view2.getViewTreeObserver();
                this.f3381q = viewTreeObserver;
                if (z2) {
                    viewTreeObserver.addOnGlobalLayoutListener(this.f3375k);
                }
                view2.addOnAttachStateChangeListener(this.f3376l);
                p987f7c57 p987f7c572 = this.f3374j;
                p987f7c572.f3512q = view2;
                p987f7c572.f3508m = this.f3385u;
                if (!this.f3383s) {
                    this.f3384t = AbstractC0735p294b40dd.m468cbcdc(this.f3369e, null, this.f3367c, this.f3371g);
                    this.f3383s = true;
                }
                this.f3374j.mo4010r(this.f3384t);
                this.f3374j.f3496A.setInputMethodMode(2);
                p987f7c57 p987f7c573 = this.f3374j;
                Rect rect = this.f3262b;
                Objects.requireNonNull(p987f7c573);
                p987f7c573.f3520y = rect != null ? new Rect(rect) : null;
                this.f3374j.mo3638i();
                p863abbe9 p863abbe9 = this.f3374j.f3499d;
                p863abbe9.setOnKeyListener(this);
                if (this.f3386v && this.f3368d.f3337m != null) {
                    FrameLayout frameLayout = (FrameLayout) LayoutInflater.from(this.f3367c).inflate(2131427346, (ViewGroup) p863abbe9, false);
                    TextView textView = (TextView) frameLayout.findViewById(16908310);
                    if (textView != null) {
                        textView.setText(this.f3368d.f3337m);
                    }
                    frameLayout.setEnabled(false);
                    p863abbe9.addHeaderView(frameLayout, null, false);
                }
                this.f3374j.mo4008o(this.f3369e);
                this.f3374j.mo3638i();
            }
        }
        if (!z) {
            throw new IllegalStateException(m2331$(0, 50, 437));
        }
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0735p294b40dd
    /* renamed from: l */
    public void mo3601l(C0746p6673750c p6673750c) {
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0735p294b40dd
    /* renamed from: o */
    public void mo3603o(View view) {
        this.f3378n = view;
    }

    public void onDismiss() {
        if ((16 + 8) % 8 <= 0) {
        }
        this.f3382r = true;
        this.f3368d.mo3723c(true);
        ViewTreeObserver viewTreeObserver = this.f3381q;
        if (viewTreeObserver != null) {
            if (!viewTreeObserver.isAlive()) {
                this.f3381q = this.f3379o.getViewTreeObserver();
            }
            this.f3381q.removeGlobalOnLayoutListener(this.f3375k);
            this.f3381q = null;
        }
        this.f3379o.removeOnAttachStateChangeListener(this.f3376l);
        PopupWindow.OnDismissListener onDismissListener = this.f3377m;
        if (onDismissListener != null) {
            onDismissListener.onDismiss();
        }
    }

    public boolean onKey(View view, int i, KeyEvent keyEvent) {
        if (keyEvent.getAction() != 1 || i != 82) {
            return false;
        }
        dismiss();
        return true;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0735p294b40dd
    /* renamed from: p */
    public void mo3605p(boolean z) {
        this.f3369e.f3303d = z;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0735p294b40dd
    /* renamed from: q */
    public void mo3606q(int i) {
        this.f3385u = i;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0735p294b40dd
    /* renamed from: r */
    public void mo3607r(int i) {
        this.f3374j.f3502g = i;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0735p294b40dd
    /* renamed from: s */
    public void mo3608s(PopupWindow.OnDismissListener onDismissListener) {
        this.f3377m = onDismissListener;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0735p294b40dd
    /* renamed from: t */
    public void mo3609t(boolean z) {
        this.f3386v = z;
    }

    @Override // pebed38bd.pebed38bd.p40032eb5.p94c68b94.AbstractC0735p294b40dd
    /* renamed from: u */
    public void mo3610u(int i) {
        p987f7c57 p987f7c57 = this.f3374j;
        p987f7c57.f3503h = i;
        p987f7c57.f3505j = true;
    }
}
