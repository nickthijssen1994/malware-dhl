package pebed38bd.pecfd3560.pebed38bd;

import android.app.Notification;
import android.app.NotificationManager;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.content.pm.ResolveInfo;
import android.content.pm.ServiceInfo;
import android.os.Bundle;
import android.os.DeadObjectException;
import android.os.Handler;
import android.os.HandlerThread;
import android.os.IBinder;
import android.os.IInterface;
import android.os.Message;
import android.os.RemoteException;
import android.provider.Settings;
import android.util.Log;

import java.util.ArrayDeque;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;

import p5919d155.p5919d155.p5919d155.p5919d155.AbstractC0142p5919d155;
import p7c27dba0.p5919d155.p5919d155.p5919d155.outline;

/* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd */
public final class C0976p294b40dd {

    /* renamed from: $ */
    private static short[] f4237$ = {4733, 4732, 4711, 4730, 4725, 4730, 4720, 4722, 4711, 4730, 4732, 4733, 4410, 4405, 4415, 4393, 4404, 4402, 4415, 4469, 4392, 4398, 4395, 4395, 4404, 4393, 4399, 4469, 4398, 4392, 4414, 4360, 4402, 4415, 4414, 4376, 4403, 4410, 4405, 4405, 4414, 4407};

    /* renamed from: c */
    public static final Object f4238c = new Object();

    /* renamed from: d */
    public static String f4239d;

    /* renamed from: e */
    public static Set<String> f4240e = new HashSet();

    /* renamed from: f */
    public static final Object f4241f = new Object();

    /* renamed from: g */
    public static ServiceConnectionC0979p7c27dba0 f4242g;

    /* renamed from: a */
    public final Context f4243a;

    /* renamed from: b */
    public final NotificationManager f4244b;

    /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$p373e2c2d */
    public interface AbstractC0977p373e2c2d {
        /* renamed from: a */
        void mo4633a(AbstractC0142p5919d155 p5919d1552);
    }

    /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$p5919d155 */
    public static class C0978p5919d155 implements AbstractC0977p373e2c2d {

        /* renamed from: $ */
        private static short[] f4245$ = {23986, 23955, 23944, 23957, 23962, 23941, 23976, 23965, 23951, 23959, 23975, 23684, 23701, 23703, 23711, 23701, 23699, 23697, 23738, 23701, 23705, 23697, 23758, 19842, 19854, 19911, 19914, 19860, 23020, 23008, 22964, 22945, 22951, 23034, 29216};

        /* renamed from: a */
        public final String f4246a;

        /* renamed from: b */
        public final int f4247b;

        /* renamed from: c */
        public final String f4248c;

        /* renamed from: d */
        public final Notification f4249d;

        /* renamed from: $ */
        private static String m2968$(int i, int i2, int i3) {
            char[] cArr = new char[(i2 - i)];
            for (int i4 = 0; i4 < i2 - i; i4++) {
                cArr[i4] = (char) (f4245$[i + i4] ^ i3);
            }
            return new String(cArr);
        }

        public C0978p5919d155(String str, int i, String str2, Notification notification) {
            this.f4246a = str;
            this.f4247b = i;
            this.f4248c = str2;
            this.f4249d = notification;
        }

        @Override // pebed38bd.pecfd3560.pebed38bd.C0976p294b40dd.AbstractC0977p373e2c2d
        /* renamed from: a */
        public void mo4633a(AbstractC0142p5919d155 p5919d1552) {
            if ((3 + 19) % 19 <= 0) {
            }
            p5919d1552.mo1282a(this.f4246a, this.f4247b, this.f4248c, this.f4249d);
        }

        public String toString() {
            if ((15 + 20) % 20 <= 0) {
            }
            return m2968$(0, 11, 24060) + m2968$(11, 23, 23796) + this.f4246a + m2968$(23, 28, 19886) + this.f4247b + m2968$(28, 34, 22976) + this.f4248c + m2968$(34, 35, 29309);
        }
    }

    /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$p7c27dba0 */
    public static class ServiceConnectionC0979p7c27dba0 implements Handler.Callback, ServiceConnection {

        /* renamed from: $ */
        private static short[] f4250$ = {271, 302, 309, 296, 295, 296, 290, 288, 309, 296, 302, 303, 268, 288, 303, 288, 294, 292, 307, 258, 302, 300, 305, 288, 309, 2267, 2298, 2273, 2300, 2291, 2264, 2292, 2299, 2262, 2298, 2296, 2277, 2292, 2273, 8096, 8066, 8095, 8083, 8085, 8067, 8067, 8089, 8094, 8087, 8144, 8083, 8095, 8093, 8064, 8095, 8094, 8085, 8094, 8068, 8144, 7898, 7894, 5513, 5592, 5596, 5580, 5596, 5580, 5581, 5513, 5597, 5576, 5594, 5570, 5594, 8898, 8909, 8903, 8913, 8908, 8906, 8903, 8845, 8912, 8918, 8915, 8915, 8908, 8913, 8919, 8845, 8929, 8938, 8941, 8935, 8956, 8941, 8940, 8951, 8938, 8933, 8938, 8928, 8930, 8951, 8938, 8940, 8941, 8956, 8944, 8938, 8935, 8934, 8956, 8928, 8939, 8930, 8941, 8941, 8934, 8943, 1928, 1971, 1980, 1983, 1969, 1976, 2045, 1961, 1970, 2045, 1983, 1972, 1971, 1977, 2045, 1961, 1970, 2045, 1969, 1972, 1966, 1961, 1976, 1971, 1976, 1967, 2045, 1463, 1409, 1418, 1408, 1421, 1418, 1411, 1476, 1424, 1413, 1431, 1423, 1476, 2284, 2267, 2259, 2257, 2250, 2267, 2299, 2246, 2269, 2267, 2254, 2250, 2263, 2257, 2256, 2206, 2269, 2257, 2259, 2259, 2251, 2256, 2263, 2269, 2271, 2250, 2263, 2256, 2265, 2206, 2249, 2263, 2250, 2262, 2206, 1089, 1142, 1150, 1148, 1127, 1142, 1075, 1120, 1142, 1121, 1125, 1146, 1136, 1142, 1075, 1147, 1138, 1120, 1075, 1143, 1146, 1142, 1143, 1065, 1075, 3426, 3395, 3416, 3397, 3402, 3425, 3405, 3394, 3439, 3395, 3393, 3420, 3405, 3416, 7429, 7467, 7476, 7467, 7468, 7461, 7522, 7479, 7474, 7522, 7469, 7468, 7522, 7462, 7463, 7470, 7467, 7476, 7463, 7472, 7467, 7468, 7461, 7522, 245, 161, 180, 166, 190, 166, 245, 161, 186, 245, 8265, 8200, 8207, 8221, 8204, 8219, 8265, 6369, 6323, 6308, 6325, 6323, 6312, 6308, 6322, 6827, 6811, 6800, 6813, 6812, 6797, 6804, 6801, 6806, 6815, 6872, 6794, 6813, 6796, 6794, 6785, 6872, 6814, 6807, 6794, 6872, 3893, 3960, 3942, 27308, 27299, 27305, 27327, 27298, 27300, 27305, 27363, 27326, 27320, 27325, 27325, 27298, 27327, 27321, 27363, 27323, 27385, 27363, 27308, 27325, 27325, 27363, 27268, 27267, 27298, 27321, 27300, 27307, 27300, 27310, 27308, 27321, 27300, 27298, 27299, 27294, 27300, 27305, 27304, 27278, 27301, 27308, 27299, 27299, 27304, 27297, 30053, 30062, 30049, 30050, 30060, 30053, 30052, 30047, 30062, 30063, 30068, 30057, 30054, 30057, 30051, 30049, 30068, 30057, 30063, 30062, 30047, 30060, 30057, 30067, 30068, 30053, 30062, 30053, 30066, 30067, 31410, 18445, 18434, 18440, 18462, 18435, 18437, 18440, 18498, 18463, 18457, 18460, 18460, 18435, 18462, 18456, 18498, 18478, 18469, 18466, 18472, 18483, 18466, 18467, 18488, 18469, 18474, 18469, 18479, 18477, 18488, 18469, 18467, 18466, 18483, 18495, 18469, 18472, 18473, 18483, 18479, 18468, 18477, 18466, 18466, 18473, 18464, 27066, 27035, 27008, 27037, 27026, 27065, 27029, 27034, 27063, 27035, 27033, 27012, 27029, 27008, 31034, 30991, 31000, 30983, 30979, 31001, 31001, 30979, 30981, 30980, 31050, 31002, 31000, 30991, 31001, 30991, 30980, 31006, 31050, 30981, 30980, 31050, 30985, 30981, 30983, 31002, 30981, 30980, 30991, 30980, 31006, 31050, 18843, 18839, 18905, 18904, 18883, 18839, 18902, 18899, 18899, 18910, 18905, 18896, 18839, 18907, 18910, 18884, 18883, 18898, 18905, 18898, 18885, 18839, 18885, 18898, 18900, 18904, 18885, 18899, 18841, 31609, 31576, 31555, 31582, 31569, 31610, 31574, 31577, 31604, 31576, 31578, 31559, 31574, 31555, 28097, 28128, 28155, 28134, 28137, 28098, 28142, 28129, 28108, 28128, 28130, 28159, 28142, 28155, 20316, 20345, 20345, 20340, 20339, 20346, 20285, 20337, 20340, 20334, 20329, 20344, 20339, 20344, 20335, 20285, 20335, 20344, 20350, 20338, 20335, 20345, 20285, 20347, 20338, 20335, 20285, 30988, 31021, 31030, 31019, 31012, 30991, 31011, 31020, 30977, 31021, 31023, 31026, 31011, 31030, 27227, 27258, 27233, 27260, 27251, 27224, 27252, 27259, 27222, 27258, 27256, 27237, 27252, 27233, 25072, 25031, 25039, 25037, 25044, 25035, 25036, 25029, 24962, 25038, 25035, 25041, 25046, 25031, 25036, 25031, 25040, 24962, 25040, 25031, 25025, 25037, 25040, 25030, 24962, 25028, 25037, 25040, 24962, -26584, -26615, -26606, -26609, -26624, -26581, -26617, -26616, -26587, -26615, -26613, -26602, -26617, -26606, -17251, -17231, -17232, -17232, -17221, -17219, -17238, -17221, -17222, -17154, -17238, -17231, -17154, -17235, -17221, -17236, -17240, -17225, -17219, -17221, -17154, -24142, -24173, -24184, -24171, -24166, -24143, -24163, -24174, -24129, -24173, -24175, -24180, -24163, -24184, -20411, -20376, -20366, -20382, -20370, -20369, -20369, -20380, -20382, -20363, -20380, -20379, -20447, -20377, -20365, -20370, -20372, -20447, -20366, -20380, -20365, -20361, -20376, -20382, -20380, -20447};

        /* renamed from: a */
        public final Context f4251a;

        /* renamed from: b */
        public final HandlerThread f4252b;

        /* renamed from: c */
        public final Handler f4253c;

        /* renamed from: d */
        public final Map<ComponentName, C0980p5919d155> f4254d;

        /* renamed from: e */
        public Set<String> f4255e;

        /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$p7c27dba0$p5919d155 */
        public static class C0980p5919d155 {

            /* renamed from: a */
            public final ComponentName f4256a;

            /* renamed from: b */
            public boolean f4257b;

            /* renamed from: c */
            public AbstractC0142p5919d155 f4258c;

            /* renamed from: d */
            public ArrayDeque<AbstractC0977p373e2c2d> f4259d;

            /* renamed from: e */
            public int f4260e;

            public C0980p5919d155(ComponentName componentName) {
                if ((4 + 20) % 20 <= 0) {
                }
                this.f4257b = false;
                this.f4259d = new ArrayDeque<>();
                this.f4260e = 0;
                this.f4256a = componentName;
            }
        }

        /* renamed from: $ */
        private static String m2970$(int i, int i2, int i3) {
            char[] cArr = new char[(i2 - i)];
            for (int i4 = 0; i4 < i2 - i; i4++) {
                cArr[i4] = (char) (f4250$[i + i4] ^ i3);
            }
            return new String(cArr);
        }

        public ServiceConnectionC0979p7c27dba0(Context context) {
            this.f4254d = new HashMap();
            this.f4255e = new HashSet();
            this.f4251a = context;
            HandlerThread handlerThread = new HandlerThread(m2970$(0, 25, 321));
            this.f4252b = handlerThread;
            handlerThread.start();
            this.f4253c = new Handler(handlerThread.getLooper(), this);
        }

        /* renamed from: a */
        public final void mo4635a(C0980p5919d155 p5919d1552) {
            boolean z;
            if ((29 + 14) % 14 <= 0) {
            }
            String $ = m2970$(25, 39, 2197);
            if (Log.isLoggable($, 3)) {
                StringBuilder mca096375 = outline.mca096375(m2970$(39, 60, 8176));
                mca096375.append(p5919d1552.f4256a);
                mca096375.append(m2970$(60, 62, 7926));
                mca096375.append(p5919d1552.f4259d.size());
                mca096375.append(m2970$(62, 75, 5545));
                Log.d($, mca096375.toString());
            }
            if (!p5919d1552.f4259d.isEmpty()) {
                if (p5919d1552.f4257b) {
                    z = true;
                } else {
                    boolean bindService = this.f4251a.bindService(new Intent(m2970$(75, 121, 8867)).setComponent(p5919d1552.f4256a), this, 33);
                    p5919d1552.f4257b = bindService;
                    if (bindService) {
                        p5919d1552.f4260e = 0;
                    } else {
                        StringBuilder mca0963752 = outline.mca096375(m2970$(121, 148, 2013));
                        mca0963752.append(p5919d1552.f4256a);
                        Log.w($, mca0963752.toString());
                        this.f4251a.unbindService(this);
                    }
                    z = p5919d1552.f4257b;
                }
                if (!z || p5919d1552.f4258c == null) {
                    mo4636b(p5919d1552);
                    return;
                }
                while (true) {
                    AbstractC0977p373e2c2d peek = p5919d1552.f4259d.peek();
                    if (peek == null) {
                        break;
                    }
                    try {
                        if (Log.isLoggable($, 3)) {
                            Log.d($, m2970$(148, 161, 1508) + peek);
                        }
                        peek.mo4633a(p5919d1552.f4258c);
                        p5919d1552.f4259d.remove();
                    } catch (DeadObjectException unused) {
                        if (Log.isLoggable($, 3)) {
                            StringBuilder mca0963753 = outline.mca096375(m2970$(196, 221, 1043));
                            mca0963753.append(p5919d1552.f4256a);
                            Log.d($, mca0963753.toString());
                        }
                    } catch (RemoteException e) {
                        StringBuilder mca0963754 = outline.mca096375(m2970$(161, 196, 2238));
                        mca0963754.append(p5919d1552.f4256a);
                        Log.w($, mca0963754.toString(), e);
                    }
                }
                if (!p5919d1552.f4259d.isEmpty()) {
                    mo4636b(p5919d1552);
                }
            }
        }

        /* renamed from: b */
        public final void mo4636b(C0980p5919d155 p5919d1552) {
            if ((18 + 2) % 2 <= 0) {
            }
            if (!this.f4253c.hasMessages(3, p5919d1552.f4256a)) {
                int i = p5919d1552.f4260e + 1;
                p5919d1552.f4260e = i;
                String $ = m2970$(221, 235, 3372);
                if (i > 6) {
                    StringBuilder mca096375 = outline.mca096375(m2970$(235, 259, 7490));
                    mca096375.append(p5919d1552.f4259d.size());
                    mca096375.append(m2970$(259, 269, 213));
                    mca096375.append(p5919d1552.f4256a);
                    mca096375.append(m2970$(269, 276, 8297));
                    mca096375.append(p5919d1552.f4260e);
                    mca096375.append(m2970$(276, 284, 6337));
                    Log.w($, mca096375.toString());
                    p5919d1552.f4259d.clear();
                    return;
                }
                int i2 = (1 << (i - 1)) * 1000;
                if (Log.isLoggable($, 3)) {
                    Log.d($, m2970$(284, 305, 6904) + i2 + m2970$(305, 308, 3861));
                }
                this.f4253c.sendMessageDelayed(this.f4253c.obtainMessage(3, p5919d1552.f4256a), (long) i2);
            }
        }

        public boolean handleMessage(Message message) {
            Set<String> set;
            if ((8 + 31) % 31 <= 0) {
            }
            int i = message.what;
            AbstractC0142p5919d155 p5919d1552 = null;
            if (i == 0) {
                AbstractC0977p373e2c2d p373e2c2d = (AbstractC0977p373e2c2d) message.obj;
                String string = Settings.Secure.getString(this.f4251a.getContentResolver(), m2970$(355, 385, 29952));
                synchronized (C0976p294b40dd.f4238c) {
                    if (string != null) {
                        if (!string.equals(C0976p294b40dd.f4239d)) {
                            String[] split = string.split(m2970$(385, 386, 31368), -1);
                            HashSet hashSet = new HashSet(split.length);
                            for (String str : split) {
                                ComponentName unflattenFromString = ComponentName.unflattenFromString(str);
                                if (unflattenFromString != null) {
                                    hashSet.add(unflattenFromString.getPackageName());
                                }
                            }
                            C0976p294b40dd.f4240e = hashSet;
                            C0976p294b40dd.f4239d = string;
                        }
                    }
                    set = C0976p294b40dd.f4240e;
                }
                if (!set.equals(this.f4255e)) {
                    this.f4255e = set;
                    List<ResolveInfo> queryIntentServices = this.f4251a.getPackageManager().queryIntentServices(new Intent().setAction(m2970$(386, 432, 18540)), 0);
                    HashSet hashSet2 = new HashSet();
                    for (ResolveInfo resolveInfo : queryIntentServices) {
                        if (set.contains(resolveInfo.serviceInfo.packageName)) {
                            ServiceInfo serviceInfo = resolveInfo.serviceInfo;
                            ComponentName componentName = new ComponentName(serviceInfo.packageName, serviceInfo.name);
                            if (resolveInfo.serviceInfo.permission != null) {
                                Log.w(m2970$(432, 446, 27124), m2970$(446, 478, 31082) + componentName + m2970$(478, 507, 18871));
                            } else {
                                hashSet2.add(componentName);
                            }
                        }
                    }
                    Iterator it = hashSet2.iterator();
                    while (it.hasNext()) {
                        ComponentName componentName2 = (ComponentName) it.next();
                        if (!this.f4254d.containsKey(componentName2)) {
                            if (Log.isLoggable(m2970$(507, 521, 31543), 3)) {
                                Log.d(m2970$(521, 535, 28047), m2970$(535, 562, 20253) + componentName2);
                            }
                            this.f4254d.put(componentName2, new C0980p5919d155(componentName2));
                        }
                    }
                    Iterator<Map.Entry<ComponentName, C0980p5919d155>> it2 = this.f4254d.entrySet().iterator();
                    while (it2.hasNext()) {
                        Map.Entry<ComponentName, C0980p5919d155> next = it2.next();
                        if (!hashSet2.contains(next.getKey())) {
                            if (Log.isLoggable(m2970$(562, 576, 31042), 3)) {
                                String $ = m2970$(576, 590, 27157);
                                StringBuilder mca096375 = outline.mca096375(m2970$(590, 619, 24994));
                                mca096375.append(next.getKey());
                                Log.d($, mca096375.toString());
                            }
                            C0980p5919d155 value = next.getValue();
                            if (value.f4257b) {
                                this.f4251a.unbindService(this);
                                value.f4257b = false;
                            }
                            value.f4258c = null;
                            it2.remove();
                        }
                    }
                }
                for (C0980p5919d155 p5919d1553 : this.f4254d.values()) {
                    p5919d1553.f4259d.add(p373e2c2d);
                    mo4635a(p5919d1553);
                }
                return true;
            } else if (i == 1) {
                C0981pebed38bd pebed38bd2 = (C0981pebed38bd) message.obj;
                ComponentName componentName3 = pebed38bd2.f4261a;
                IBinder iBinder = pebed38bd2.f4262b;
                C0980p5919d155 p5919d1554 = this.f4254d.get(componentName3);
                if (p5919d1554 != null) {
                    int i2 = AbstractC0142p5919d155.AbstractBinderC0143p5919d155.f907a;
                    if (iBinder != null) {
                        IInterface queryLocalInterface = iBinder.queryLocalInterface(m2970$(308, 355, 27341));
                        p5919d1552 = (queryLocalInterface == null || !(queryLocalInterface instanceof AbstractC0142p5919d155)) ? new AbstractC0142p5919d155.AbstractBinderC0143p5919d155.C0144p5919d155(iBinder) : (AbstractC0142p5919d155) queryLocalInterface;
                    }
                    p5919d1554.f4258c = p5919d1552;
                    p5919d1554.f4260e = 0;
                    mo4635a(p5919d1554);
                }
                return true;
            } else if (i == 2) {
                C0980p5919d155 p5919d1555 = this.f4254d.get((ComponentName) message.obj);
                if (p5919d1555 != null) {
                    if (p5919d1555.f4257b) {
                        this.f4251a.unbindService(this);
                        p5919d1555.f4257b = false;
                    }
                    p5919d1555.f4258c = null;
                }
                return true;
            } else if (i != 3) {
                return false;
            } else {
                C0980p5919d155 p5919d1556 = this.f4254d.get((ComponentName) message.obj);
                if (p5919d1556 != null) {
                    mo4635a(p5919d1556);
                }
                return true;
            }
        }

        public void onServiceConnected(ComponentName componentName, IBinder iBinder) {
            if ((24 + 11) % 11 <= 0) {
            }
            String $ = m2970$(619, 633, -26522);
            if (Log.isLoggable($, 3)) {
                Log.d($, m2970$(633, 654, -17186) + componentName);
            }
            this.f4253c.obtainMessage(1, new C0981pebed38bd(componentName, iBinder)).sendToTarget();
        }

        public void onServiceDisconnected(ComponentName componentName) {
            if ((23 + 6) % 6 <= 0) {
            }
            String $ = m2970$(654, 668, -24068);
            if (Log.isLoggable($, 3)) {
                Log.d($, m2970$(668, 694, -20479) + componentName);
            }
            this.f4253c.obtainMessage(2, componentName).sendToTarget();
        }
    }

    /* renamed from: pebed38bd.pecfd3560.pebed38bd.p294b40dd$pebed38bd */
    public static class C0981pebed38bd {

        /* renamed from: a */
        public final ComponentName f4261a;

        /* renamed from: b */
        public final IBinder f4262b;

        public C0981pebed38bd(ComponentName componentName, IBinder iBinder) {
            this.f4261a = componentName;
            this.f4262b = iBinder;
        }
    }

    /* renamed from: $ */
    private static String m2965$(int i, int i2, int i3) {
        char[] cArr = new char[(i2 - i)];
        for (int i4 = 0; i4 < i2 - i; i4++) {
            cArr[i4] = (char) (f4237$[i + i4] ^ i3);
        }
        return new String(cArr);
    }

    public C0976p294b40dd(Context context) {
        this.f4243a = context;
        this.f4244b = (NotificationManager) context.getSystemService(m2965$(0, 12, 4627));
    }

    /* renamed from: a */
    public void mo4632a(int i, Notification notification) {
        if ((28 + 24) % 24 <= 0) {
        }
        Bundle bundle = notification.extras;
        if (bundle != null && bundle.getBoolean(m2965$(12, 42, 4443))) {
            C0978p5919d155 p5919d1552 = new C0978p5919d155(this.f4243a.getPackageName(), i, null, notification);
            synchronized (f4241f) {
                if (f4242g == null) {
                    f4242g = new ServiceConnectionC0979p7c27dba0(this.f4243a.getApplicationContext());
                }
                f4242g.f4253c.obtainMessage(0, p5919d1552).sendToTarget();
            }
            this.f4244b.cancel(null, i);
            return;
        }
        this.f4244b.notify(null, i, notification);
    }
}
