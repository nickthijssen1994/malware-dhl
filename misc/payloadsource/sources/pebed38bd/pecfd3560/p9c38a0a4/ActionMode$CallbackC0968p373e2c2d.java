package pebed38bd.pecfd3560.p9c38a0a4;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.text.Editable;
import android.view.ActionMode;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.ArrayList;

/* renamed from: pebed38bd.pecfd3560.p9c38a0a4.p373e2c2d */
public class ActionMode$CallbackC0968p373e2c2d implements ActionMode.Callback {

    /* renamed from: $ */
    private static short[] f4184$ = {24804, 24819, 24827, 24825, 24800, 24819, 24799, 24802, 24819, 24827, 24791, 24802, 30557, 30545, 30547, 30480, 30559, 30544, 30554, 30540, 30545, 30551, 30554, 30480, 30551, 30544, 30538, 30555, 30540, 30544, 30559, 30546, 30480, 30536, 30551, 30555, 30537, 30480, 30547, 30555, 30544, 30539, 30480, 30579, 30555, 30544, 30539, 30588, 30539, 30551, 30546, 30554, 30555, 30540, 28135, 28136, 28130, 28148, 28137, 28143, 28130, 28072, 28143, 28136, 28146, 28131, 28136, 28146, 28072, 28135, 28133, 28146, 28143, 28137, 28136, 28072, 28118, 28116, 28105, 28101, 28099, 28117, 28117, 28121, 28114, 28099, 28126, 28114, 29134, 29151, 29122, 29134, 29077, 29130, 29142, 29147, 29139, 29140, 27497, 27494, 27500, 27514, 27495, 27489, 27500, 27430, 27489, 27494, 27516, 27501, 27494, 27516, 27430, 27501, 27504, 27516, 27514, 27497, 27430, 27480, 27482, 27463, 27467, 27469, 27483, 27483, 27479, 27484, 27469, 27472, 27484, 27479, 27482, 27469, 27465, 27468, 27463, 27462, 27460, 27473};

    /* renamed from: a */
    public final ActionMode.Callback f4185a;

    /* renamed from: b */
    public final TextView f4186b;

    /* renamed from: c */
    public Class f4187c;

    /* renamed from: d */
    public Method f4188d;

    /* renamed from: e */
    public boolean f4189e;

    /* renamed from: f */
    public boolean f4190f;

    /* renamed from: $ */
    private static String m2956$(int i, int i2, int i3) {
        char[] cArr = new char[(i2 - i)];
        for (int i4 = 0; i4 < i2 - i; i4++) {
            cArr[i4] = (char) (f4184$[i + i4] ^ i3);
        }
        return new String(cArr);
    }

    public ActionMode$CallbackC0968p373e2c2d(ActionMode.Callback callback, TextView textView) {
        this.f4185a = callback;
        this.f4186b = textView;
        this.f4190f = false;
    }

    public boolean onActionItemClicked(ActionMode actionMode, MenuItem menuItem) {
        return this.f4185a.onActionItemClicked(actionMode, menuItem);
    }

    public boolean onCreateActionMode(ActionMode actionMode, Menu menu) {
        return this.f4185a.onCreateActionMode(actionMode, menu);
    }

    public void onDestroyActionMode(ActionMode actionMode) {
        this.f4185a.onDestroyActionMode(actionMode);
    }

    /* JADX WARNING: Removed duplicated region for block: B:41:0x0115  */
    /* JADX WARNING: Removed duplicated region for block: B:55:? A[ExcHandler: IllegalAccessException | NoSuchMethodException | InvocationTargetException (unused java.lang.Throwable), SYNTHETIC, Splitter:B:18:0x0091] */
    /* JADX WARNING: Removed duplicated region for block: B:63:0x00e3 A[SYNTHETIC] */
    public boolean onPrepareActionMode(ActionMode actionMode, Menu menu) {
        String $;
        boolean z;
        String str;
        if ((3 + 15) % 15 <= 0) {
        }
        Context context = this.f4186b.getContext();
        PackageManager packageManager = context.getPackageManager();
        boolean z2 = this.f4190f;
        String $2 = m2956$(0, 12, 24726);
        if (!z2) {
            this.f4190f = true;
            try {
                Class<?> cls = Class.forName(m2956$(12, 54, 30526));
                this.f4187c = cls;
                this.f4188d = cls.getDeclaredMethod($2, Integer.TYPE);
                this.f4189e = true;
            } catch (ClassNotFoundException | NoSuchMethodException unused) {
                this.f4187c = null;
                this.f4188d = null;
                this.f4189e = false;
            }
        }
        Method declaredMethod = (!this.f4189e || !this.f4187c.isInstance(menu)) ? menu.getClass().getDeclaredMethod($2, Integer.TYPE) : this.f4188d;
        int size = menu.size() - 1;
        while (true) {
            $ = m2956$(54, 88, 28038);
            if (size < 0) {
                break;
            }
            try {
                MenuItem item = menu.getItem(size);
                if (item.getIntent() != null && $.equals(item.getIntent().getAction())) {
                    declaredMethod.invoke(menu, Integer.valueOf(size));
                }
                size--;
            } catch (IllegalAccessException | NoSuchMethodException | InvocationTargetException unused2) {
            }
        }
        ArrayList arrayList = new ArrayList();
        boolean z3 = context instanceof Activity;
        String $3 = m2956$(88, 98, 29114);
        if (z3) {
            for (ResolveInfo resolveInfo : packageManager.queryIntentActivities(new Intent().setAction($).setType($3), 0)) {
                if (!context.getPackageName().equals(resolveInfo.activityInfo.packageName)) {
                    ActivityInfo activityInfo = resolveInfo.activityInfo;
                    if (!activityInfo.exported || !((str = activityInfo.permission) == null || context.checkSelfPermission(str) == 0)) {
                        z = false;
                        if (!z) {
                            arrayList.add(resolveInfo);
                        }
                    }
                }
                z = true;
                if (!z) {
                }
            }
        }
        for (int i = 0; i < arrayList.size(); i++) {
            ResolveInfo resolveInfo2 = (ResolveInfo) arrayList.get(i);
            MenuItem add = menu.add(0, 0, i + 100, resolveInfo2.loadLabel(packageManager));
            TextView textView = this.f4186b;
            Intent putExtra = new Intent().setAction($).setType($3).putExtra(m2956$(98, 140, 27400), !((textView instanceof Editable) && textView.onCheckIsTextEditor() && textView.isEnabled()));
            ActivityInfo activityInfo2 = resolveInfo2.activityInfo;
            add.setIntent(putExtra.setClassName(activityInfo2.packageName, activityInfo2.name)).setShowAsAction(1);
        }
        return this.f4185a.onPrepareActionMode(actionMode, menu);
    }
}
