package com.jingdong.aura.core.asm;

import android.app.ActivityManager;
import android.app.ActivityManager.RunningAppProcessInfo;
import android.app.Application;
import android.content.ContextWrapper;
import android.os.Build.VERSION;
import android.os.Process;
import androidx.databinding.DataBinderMapperProxy;
import com.jingdong.aura.core.reflection.ClassWriter;
import com.jingdong.aura.core.reflection.Hack.b;
import com.jingdong.aura.core.reflection.Hack.d;
import com.jingdong.aura.core.reflection.StateMachineInvocationHandler;
import com.jingdong.aura.core.runing.HierarchyDynamicMBean;
import com.jingdong.aura.core.runing.Label;
import com.jingdong.aura.core.util.rss.StringBuffer;
import com.jingdong.aura.wrapper.AuraInitializer.a;
import java.io.File;
import java.io.InputStream;
import java.util.Iterator;
import java.util.List;
import java.util.Properties;

public class h
{
  private static final StringBuffer b = com.jingdong.aura.core.util.rss.Attribute.getInstance(com.jingdong.aura.core.b.a.class);
  private static h g;
  private com.jingdong.aura.core.runing.b e;
  private AuraInitializer.a j;
  private com.jingdong.aura.core.runing.Attribute q;
  private DataBinderMapperProxy x;
  
  public h() {}
  
  public static h a()
  {
    if (g == null) {
      g = new h();
    }
    return g;
  }
  
  public File a(String paramString)
  {
    paramString = com.jingdong.aura.core.asm.http.f.d(paramString);
    if (paramString != null) {
      return ((i)paramString).p().a();
    }
    return null;
  }
  
  public void a(Application paramApplication)
  {
    b.toString("init called");
    if (!f.m()) {
      return;
    }
    if (paramApplication == null) {
      return;
    }
    f.e = paramApplication;
    Object localObject1 = paramApplication.getPackageName();
    ClassWriter.c();
    Object localObject2 = com.jingdong.aura.core.b.a.class.getClassLoader();
    Label localLabel = new Label((ClassLoader)localObject2);
    com.jingdong.aura.core.asm.http.f.e((ClassLoader)localObject2);
    com.jingdong.aura.core.runing.Item.a = localLabel;
    com.jingdong.aura.core.runing.Item.c = paramApplication.getResources();
    com.jingdong.aura.core.runing.Item.this$0 = paramApplication;
    com.jingdong.aura.core.reflection.Frame.init((String)localObject1, localLabel);
    com.jingdong.aura.core.reflection.Frame.d(new com.jingdong.aura.core.runing.Frame(com.jingdong.aura.core.reflection.Frame.d(), paramApplication.getBaseContext()));
    com.jingdong.aura.core.reflection.Frame.a((String)localObject1, paramApplication);
    e = new com.jingdong.aura.core.runing.b();
    com.jingdong.aura.core.asm.http.f.a((org.osgi.framework.b)e);
    q = new com.jingdong.aura.core.runing.Attribute();
    com.jingdong.aura.core.asm.http.f.a(q);
    try
    {
      localObject2 = new HierarchyDynamicMBean();
      i = Build.VERSION.SDK_INT;
      if (i <= 25)
      {
        i = Build.VERSION.SDK_INT;
        if (i == 25)
        {
          i = Build.VERSION.PREVIEW_SDK_INT;
          if (i > 0) {}
        }
        else
        {
          localObject1 = ClassWriter.J.get(ClassWriter.s.get());
          break label215;
        }
      }
      localObject1 = ClassWriter.L.get(ClassWriter.t.get());
      label215:
      ClassWriter.N.a(localObject1, (StateMachineInvocationHandler)localObject2);
    }
    catch (Throwable localThrowable)
    {
      for (;;)
      {
        try
        {
          int i;
          paramApplication = paramApplication.getSystemService("activity");
          paramApplication = (ActivityManager)paramApplication;
          paramApplication = paramApplication.getRunningAppProcesses().iterator();
          boolean bool = paramApplication.hasNext();
          if (bool)
          {
            localObject1 = paramApplication.next();
            localObject1 = (ActivityManager.RunningAppProcessInfo)localObject1;
            if (pid != i) {
              continue;
            }
            com.jingdong.aura.core.runing.Item.i = processName;
            continue;
          }
          return;
        }
        catch (Exception paramApplication) {}
        localThrowable = localThrowable;
      }
    }
    com.jingdong.aura.core.reflection.Frame.get();
    com.jingdong.aura.core.reflection.Frame.init();
    x = com.jingdong.aura.core.reflection.Frame.b();
    i = Process.myPid();
  }
  
  public void a(Application paramApplication, Properties paramProperties)
  {
    b.toString("startup called");
    if (!f.m()) {
      return;
    }
    com.jingdong.aura.core.asm.http.f.e(paramApplication, paramProperties);
    paramApplication = x;
    if (paramApplication != null) {
      com.jingdong.aura.core.asm.http.f.f((org.osgi.framework.b)paramApplication);
    }
  }
  
  public void a(String paramString1, File paramFile, long paramLong, String paramString2)
  {
    StringBuffer localStringBuffer = b;
    StringBuilder localStringBuilder = new StringBuilder();
    localStringBuilder.append("installBundle called file.  location=");
    localStringBuilder.append(paramString1);
    localStringBuilder.append(", versionCode=");
    localStringBuilder.append(paramLong);
    localStringBuilder.append(", md5=");
    localStringBuilder.append(paramString2);
    localStringBuffer.toString(localStringBuilder.toString());
    MethodWriter.a("AuraMaiDianInstallBundle", paramString1, (int)paramLong, "", "installBundleFile");
    com.jingdong.aura.core.asm.http.f.a(paramString1, paramFile, null, paramLong, paramString2);
  }
  
  public void a(String paramString1, InputStream paramInputStream, long paramLong, String paramString2)
  {
    StringBuffer localStringBuffer = b;
    StringBuilder localStringBuilder = new StringBuilder();
    localStringBuilder.append("installBundle called stream. location=");
    localStringBuilder.append(paramString1);
    localStringBuilder.append(", versionCode=");
    localStringBuilder.append(paramLong);
    localStringBuilder.append(", md5=");
    localStringBuilder.append(paramString2);
    localStringBuffer.toString(localStringBuilder.toString());
    MethodWriter.a("AuraMaiDianInstallBundle", paramString1, (int)paramLong, "", "installBundleInputStream");
    com.jingdong.aura.core.asm.http.f.a(paramString1, null, paramInputStream, paramLong, paramString2);
  }
  
  public void a(org.osgi.framework.b paramB)
  {
    com.jingdong.aura.core.asm.http.f.f(paramB);
  }
  
  /* Error */
  public boolean a(String paramString1, String paramString2, int paramInt, String paramString3)
  {
    // Byte code:
    //   0: getstatic 28	com/jingdong/aura/core/asm/h:b	Lcom/jingdong/aura/core/util/rss/StringBuffer;
    //   3: ldc_w 310
    //   6: invokeinterface 68 2 0
    //   11: aconst_null
    //   12: astore 8
    //   14: aconst_null
    //   15: astore 7
    //   17: aload_2
    //   18: ifnonnull +51 -> 69
    //   21: getstatic 28	com/jingdong/aura/core/asm/h:b	Lcom/jingdong/aura/core/util/rss/StringBuffer;
    //   24: ldc_w 312
    //   27: invokeinterface 314 2 0
    //   32: new 268	java/lang/StringBuilder
    //   35: dup
    //   36: invokespecial 269	java/lang/StringBuilder:<init>	()V
    //   39: astore_2
    //   40: aload_2
    //   41: ldc_w 316
    //   44: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   47: pop
    //   48: aload_2
    //   49: aload_1
    //   50: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   53: pop
    //   54: aload_1
    //   55: iload_3
    //   56: aload_2
    //   57: invokevirtual 284	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   60: ldc_w 318
    //   63: aconst_null
    //   64: invokestatic 321	com/jingdong/aura/core/asm/MethodWriter:e	(Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
    //   67: iconst_0
    //   68: ireturn
    //   69: invokestatic 74	com/jingdong/aura/core/asm/f:m	()Z
    //   72: ifne +40 -> 112
    //   75: new 268	java/lang/StringBuilder
    //   78: dup
    //   79: invokespecial 269	java/lang/StringBuilder:<init>	()V
    //   82: astore_2
    //   83: aload_2
    //   84: ldc_w 323
    //   87: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   90: pop
    //   91: aload_2
    //   92: aload_1
    //   93: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   96: pop
    //   97: aload_1
    //   98: iload_3
    //   99: aload_2
    //   100: invokevirtual 284	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   103: ldc_w 318
    //   106: aconst_null
    //   107: invokestatic 321	com/jingdong/aura/core/asm/MethodWriter:e	(Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
    //   110: iconst_0
    //   111: ireturn
    //   112: iconst_1
    //   113: invokestatic 326	com/jingdong/aura/core/asm/f:a	(I)Z
    //   116: ifne +40 -> 156
    //   119: new 268	java/lang/StringBuilder
    //   122: dup
    //   123: invokespecial 269	java/lang/StringBuilder:<init>	()V
    //   126: astore_2
    //   127: aload_2
    //   128: ldc_w 328
    //   131: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   134: pop
    //   135: aload_2
    //   136: aload_1
    //   137: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   140: pop
    //   141: aload_1
    //   142: iload_3
    //   143: aload_2
    //   144: invokevirtual 284	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   147: ldc_w 318
    //   150: aconst_null
    //   151: invokestatic 321	com/jingdong/aura/core/asm/MethodWriter:e	(Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
    //   154: iconst_0
    //   155: ireturn
    //   156: new 330	java/io/File
    //   159: dup
    //   160: aload_2
    //   161: invokespecial 332	java/io/File:<init>	(Ljava/lang/String;)V
    //   164: astore 6
    //   166: aload 6
    //   168: invokevirtual 335	java/io/File:exists	()Z
    //   171: ifne +82 -> 253
    //   174: getstatic 28	com/jingdong/aura/core/asm/h:b	Lcom/jingdong/aura/core/util/rss/StringBuffer;
    //   177: astore 4
    //   179: new 268	java/lang/StringBuilder
    //   182: dup
    //   183: invokespecial 269	java/lang/StringBuilder:<init>	()V
    //   186: astore 6
    //   188: aload 6
    //   190: ldc_w 337
    //   193: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   196: pop
    //   197: aload 6
    //   199: aload_2
    //   200: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   203: pop
    //   204: aload 4
    //   206: aload 6
    //   208: invokevirtual 284	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   211: invokeinterface 314 2 0
    //   216: new 268	java/lang/StringBuilder
    //   219: dup
    //   220: invokespecial 269	java/lang/StringBuilder:<init>	()V
    //   223: astore_2
    //   224: aload_2
    //   225: ldc_w 339
    //   228: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   231: pop
    //   232: aload_2
    //   233: aload_1
    //   234: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   237: pop
    //   238: aload_1
    //   239: iload_3
    //   240: aload_2
    //   241: invokevirtual 284	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   244: ldc_w 318
    //   247: aconst_null
    //   248: invokestatic 321	com/jingdong/aura/core/asm/MethodWriter:e	(Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
    //   251: iconst_0
    //   252: ireturn
    //   253: new 341	java/io/FileInputStream
    //   256: dup
    //   257: aload 6
    //   259: invokespecial 344	java/io/FileInputStream:<init>	(Ljava/io/File;)V
    //   262: astore_2
    //   263: aload_1
    //   264: aload_2
    //   265: iload_3
    //   266: aload 4
    //   268: invokestatic 347	com/jingdong/aura/core/asm/http/f:a	(Ljava/lang/String;Ljava/io/InputStream;ILjava/lang/String;)Z
    //   271: istore 5
    //   273: aload_2
    //   274: invokevirtual 352	java/io/InputStream:close	()V
    //   277: iload 5
    //   279: ireturn
    //   280: astore_1
    //   281: aload_1
    //   282: invokevirtual 355	java/io/IOException:printStackTrace	()V
    //   285: iload 5
    //   287: ireturn
    //   288: astore 6
    //   290: goto +17 -> 307
    //   293: astore 6
    //   295: goto +87 -> 382
    //   298: astore_1
    //   299: goto +163 -> 462
    //   302: astore 6
    //   304: aload 7
    //   306: astore_2
    //   307: aload_2
    //   308: astore 4
    //   310: new 268	java/lang/StringBuilder
    //   313: dup
    //   314: invokespecial 269	java/lang/StringBuilder:<init>	()V
    //   317: astore 7
    //   319: aload_2
    //   320: astore 4
    //   322: aload 7
    //   324: ldc_w 357
    //   327: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   330: pop
    //   331: aload_2
    //   332: astore 4
    //   334: aload 7
    //   336: aload_1
    //   337: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   340: pop
    //   341: aload_2
    //   342: astore 4
    //   344: aload_1
    //   345: iload_3
    //   346: aload 7
    //   348: invokevirtual 284	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   351: ldc_w 318
    //   354: aload 6
    //   356: invokestatic 321	com/jingdong/aura/core/asm/MethodWriter:e	(Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
    //   359: aload_2
    //   360: astore 4
    //   362: aload 6
    //   364: invokevirtual 358	java/lang/Throwable:printStackTrace	()V
    //   367: aload_2
    //   368: ifnull +114 -> 482
    //   371: aload_2
    //   372: invokevirtual 352	java/io/InputStream:close	()V
    //   375: iconst_0
    //   376: ireturn
    //   377: astore 6
    //   379: aload 8
    //   381: astore_2
    //   382: aload_2
    //   383: astore 4
    //   385: new 268	java/lang/StringBuilder
    //   388: dup
    //   389: invokespecial 269	java/lang/StringBuilder:<init>	()V
    //   392: astore 7
    //   394: aload_2
    //   395: astore 4
    //   397: aload 7
    //   399: ldc_w 360
    //   402: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   405: pop
    //   406: aload_2
    //   407: astore 4
    //   409: aload 7
    //   411: aload_1
    //   412: invokevirtual 275	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   415: pop
    //   416: aload_2
    //   417: astore 4
    //   419: aload_1
    //   420: iload_3
    //   421: aload 7
    //   423: invokevirtual 284	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   426: ldc_w 318
    //   429: aload 6
    //   431: invokestatic 321	com/jingdong/aura/core/asm/MethodWriter:e	(Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
    //   434: aload_2
    //   435: astore 4
    //   437: aload 6
    //   439: invokevirtual 361	java/io/FileNotFoundException:printStackTrace	()V
    //   442: aload_2
    //   443: ifnull +39 -> 482
    //   446: aload_2
    //   447: invokevirtual 352	java/io/InputStream:close	()V
    //   450: iconst_0
    //   451: ireturn
    //   452: astore_1
    //   453: aload_1
    //   454: checkcast 308	java/io/IOException
    //   457: invokevirtual 355	java/io/IOException:printStackTrace	()V
    //   460: iconst_0
    //   461: ireturn
    //   462: aload 4
    //   464: ifnull +16 -> 480
    //   467: aload 4
    //   469: invokevirtual 352	java/io/InputStream:close	()V
    //   472: goto +8 -> 480
    //   475: astore_2
    //   476: aload_2
    //   477: invokevirtual 355	java/io/IOException:printStackTrace	()V
    //   480: aload_1
    //   481: athrow
    //   482: iconst_0
    //   483: ireturn
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	484	0	this	h
    //   0	484	1	paramString1	String
    //   0	484	2	paramString2	String
    //   0	484	3	paramInt	int
    //   0	484	4	paramString3	String
    //   271	15	5	bool	boolean
    //   164	94	6	localObject1	Object
    //   288	1	6	localThrowable1	Throwable
    //   293	1	6	localFileNotFoundException1	java.io.FileNotFoundException
    //   302	61	6	localThrowable2	Throwable
    //   377	61	6	localFileNotFoundException2	java.io.FileNotFoundException
    //   15	407	7	localStringBuilder	StringBuilder
    //   12	368	8	localObject2	Object
    // Exception table:
    //   from	to	target	type
    //   273	277	280	java/io/IOException
    //   263	273	288	java/lang/Throwable
    //   263	273	293	java/io/FileNotFoundException
    //   310	319	298	java/lang/Throwable
    //   322	331	298	java/lang/Throwable
    //   334	341	298	java/lang/Throwable
    //   344	359	298	java/lang/Throwable
    //   362	367	298	java/lang/Throwable
    //   385	394	298	java/lang/Throwable
    //   397	406	298	java/lang/Throwable
    //   409	416	298	java/lang/Throwable
    //   419	434	298	java/lang/Throwable
    //   437	442	298	java/lang/Throwable
    //   253	263	302	java/lang/Throwable
    //   253	263	377	java/io/FileNotFoundException
    //   371	375	452	java/io/IOException
    //   446	450	452	java/io/IOException
    //   467	472	475	java/io/IOException
  }
  
  public List b()
  {
    b.toString("getBundles called");
    return com.jingdong.aura.core.asm.http.f.c();
  }
  
  public void b(AuraInitializer.a paramA)
  {
    j = paramA;
  }
  
  public void b(String paramString)
  {
    com.jingdong.aura.core.runing.f.b(paramString);
  }
  
  public org.osgi.framework.a d(String paramString)
  {
    b.toString("getBundle called");
    return com.jingdong.aura.core.asm.http.f.d(paramString);
  }
  
  public AuraInitializer.a e()
  {
    return j;
  }
}
