package com.jingdong.sdk;

import android.app.Application;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.Build.VERSION;
import android.widget.ImageView;
import com.facebook.drawee.drawable.ScalingUtils.ScaleType;
import com.jd.feedback.FeedbackSDK;
import com.jd.feedback.FeedbackSDK.ImageLoader;
import com.jd.mobile.image.JDImageLoader;
import com.jingdong.app.util.image.JDDisplayImageOptions;
import com.jingdong.sdk.utils.PackageInfoUtil;
import com.jingdong.sdk.uuid.UUID;
import com.thestore.main.core.app.AppChannelManager;
import com.thestore.main.core.app.AppContext;
import com.thestore.main.core.app.MyApplication;
import java.io.File;

public class FeedbackControl
{
  public FeedbackControl() {}
  
  public static void init(Application paramApplication)
  {
    if (Build.VERSION.SDK_INT < 21) {
      return;
    }
    FeedbackSDK.init(paramApplication, new FeedbackSDK.ImageLoader()
    {
      public void load(ImageView paramAnonymousImageView, Uri paramAnonymousUri, Drawable paramAnonymousDrawable1, Drawable paramAnonymousDrawable2, String paramAnonymousString)
      {
        String str = paramAnonymousUri.toString();
        paramAnonymousUri = str;
        JDDisplayImageOptions localJDDisplayImageOptions = new JDDisplayImageOptions();
        localJDDisplayImageOptions.showImageForEmptyUri(null);
        if (paramAnonymousDrawable1 != null) {
          localJDDisplayImageOptions.showImageOnLoading(paramAnonymousDrawable1);
        }
        if (paramAnonymousDrawable2 != null) {
          localJDDisplayImageOptions.showImageOnFail(paramAnonymousDrawable2);
        }
        if ("center_crop".equals(paramAnonymousString)) {
          localJDDisplayImageOptions.setActualImageScaleType(ScalingUtils.ScaleType.CENTER_CROP);
        } else if ("fit_center".equals(paramAnonymousString)) {
          localJDDisplayImageOptions.setActualImageScaleType(ScalingUtils.ScaleType.FIT_CENTER);
        }
        paramAnonymousDrawable1 = paramAnonymousUri;
        if (!str.startsWith("content"))
        {
          paramAnonymousDrawable1 = paramAnonymousUri;
          if (!str.startsWith("http"))
          {
            paramAnonymousDrawable1 = paramAnonymousUri;
            if (!str.startsWith("file"))
            {
              paramAnonymousDrawable2 = Uri.fromFile(new File(str));
              paramAnonymousDrawable1 = paramAnonymousUri;
              if (paramAnonymousDrawable2 != null) {
                paramAnonymousDrawable1 = paramAnonymousDrawable2.toString();
              }
            }
          }
        }
        JDImageLoader.display(paramAnonymousDrawable1, paramAnonymousImageView, localJDDisplayImageOptions, null);
      }
    });
    FeedbackSDK.setClientVersion(PackageInfoUtil.getVersionName((Application)AppContext.APP));
    FeedbackSDK.setBuild(String.valueOf(PackageInfoUtil.getVersionCode((Application)AppContext.APP)));
    FeedbackSDK.setPartner(AppChannelManager.getInstance().getUnionKey());
    if (AppContext.isDebug())
    {
      FeedbackSDK.setAppKey("51bba9e7242542e1baed133cfbcf552d");
      FeedbackSDK.setSecret("5f844f885018bf3141cfccfd886b47b6");
    }
    else
    {
      FeedbackSDK.setAppKey("8c2073f5b9c0453692cbf2f03c92ca93");
      FeedbackSDK.setSecret("9e819c42aa359cad4137eb118568abec");
    }
    FeedbackSDK.setUuid(UUID.readAndroidId((Context)AppContext.APP));
    FeedbackSDK.setPackageName(AppContext.APP.getPackageName());
  }
}
