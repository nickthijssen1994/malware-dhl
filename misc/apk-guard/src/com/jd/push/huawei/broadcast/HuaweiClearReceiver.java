package com.jd.push.huawei.broadcast;

import android.content.BroadcastReceiver;
import android.content.ContentResolver;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageItemInfo;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.net.Uri;
import android.os.BaseBundle;
import android.os.Bundle;
import android.text.TextUtils;
import com.jd.push.common.util.LogUtils;
import java.util.List;

public class HuaweiClearReceiver
  extends BroadcastReceiver
{
  private final String SAVEFILE = "HuaweiClearReceiver";
  
  public HuaweiClearReceiver() {}
  
  private String getMainActivity(Context paramContext)
  {
    Object localObject1 = new Intent("android.intent.action.MAIN", null);
    ((Intent)localObject1).addCategory("android.intent.category.LAUNCHER");
    Object localObject2 = paramContext.getPackageManager();
    int i = 0;
    localObject1 = ((PackageManager)localObject2).queryIntentActivities((Intent)localObject1, 0);
    if (((List)localObject1).size() > 0) {
      while (i < ((List)localObject1).size())
      {
        localObject2 = getactivityInfo.name;
        if ((!TextUtils.isEmpty((CharSequence)localObject2)) && (((String)localObject2).startsWith(paramContext.getPackageName()))) {
          return localObject2;
        }
        i += 1;
      }
    }
    return "";
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    LogUtils.getInstance().e("HuaweiClearReceiver", "??sdk  clear ???");
    boolean bool = setBadgeNumber(paramContext, 0);
    paramContext = LogUtils.getInstance();
    paramIntent = new StringBuilder();
    paramIntent.append("");
    paramIntent.append(bool);
    paramContext.e("HuaweiClearReceiver", paramIntent.toString());
  }
  
  public boolean setBadgeNumber(Context paramContext, int paramInt)
  {
    try
    {
      Bundle localBundle = new Bundle();
      localBundle.putString("package", paramContext.getPackageName());
      localBundle.putString("class", getMainActivity(paramContext));
      localBundle.putInt("badgenumber", paramInt);
      paramContext.getApplicationContext().getContentResolver().call(Uri.parse("content://com.huawei.android.launcher.settings/badge/"), "change_badge", null, localBundle);
      return true;
    }
    catch (Exception paramContext)
    {
      LogUtils.getInstance().e("HuaweiClearReceiver", paramContext.getLocalizedMessage());
    }
    return false;
  }
}
