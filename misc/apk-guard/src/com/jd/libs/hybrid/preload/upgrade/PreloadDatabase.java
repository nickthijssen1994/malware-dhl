package com.jd.libs.hybrid.preload.upgrade;

import android.content.Context;
import androidx.room.Database;
import androidx.room.Room;
import androidx.room.RoomDatabase;
import androidx.room.RoomDatabase.Builder;
import androidx.room.TypeConverters;
import com.jd.libs.hybrid.preload.db.converter.RoomJdJsonObjConverts;
import com.jd.libs.hybrid.preload.db.converter.RoomListStrConverts;
import com.jd.libs.hybrid.preload.db.converter.RoomMapConverts;
import com.jd.libs.hybrid.preload.entity.PreloadInfoEntity;
import com.jd.libs.hybrid.preload.upgrade.signature.a;

@Database(entities={PreloadInfoEntity.class}, version=4)
@TypeConverters({RoomMapConverts.class, RoomJdJsonObjConverts.class, RoomListStrConverts.class})
public abstract class PreloadDatabase
  extends RoomDatabase
{
  private static volatile PreloadDatabase o;
  
  public PreloadDatabase() {}
  
  public static PreloadDatabase a(Context paramContext)
  {
    if (o == null) {
      try
      {
        if (o == null)
        {
          paramContext = Room.databaseBuilder(paramContext.getApplicationContext(), com.jd.libs.hybrid.preload.db.PreloadDatabase.class, "hybrid-preload.db");
          paramContext.fallbackToDestructiveMigration();
          o = (PreloadDatabase)paramContext.build();
        }
      }
      catch (Throwable paramContext)
      {
        throw paramContext;
      }
    }
    return o;
  }
  
  public abstract a a();
}
