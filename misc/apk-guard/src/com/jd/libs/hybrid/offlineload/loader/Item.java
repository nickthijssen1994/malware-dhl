package com.jd.libs.hybrid.offlineload.loader;

import com.jd.framework.network.JDResponse;
import com.jd.framework.network.error.JDError;
import com.jd.hybrid.downloader.Fragment;
import com.jd.libs.hybrid.base.asm.Log;
import com.jd.libs.hybrid.offlineload.asm.Handler;
import com.jd.libs.hybrid.offlineload.entity.CommonEntity;
import java.io.File;
import java.util.concurrent.Executor;

final class Item
  extends Fragment
{
  private final int a;
  private final CommonEntity d;
  
  Item(a paramA, CommonEntity paramCommonEntity, int paramInt)
  {
    d = paramCommonEntity;
    a = paramInt;
  }
  
  public final void onEnd(JDResponse paramJDResponse)
  {
    File localFile = (File)paramJDResponse.getData();
    paramJDResponse = paramJDResponse.getHeaders();
    com.jd.libs.hybrid.base.asm.f.a().e().execute(new a.a.1(this, localFile, paramJDResponse));
  }
  
  public final void onError(JDError paramJDError)
  {
    StringBuilder localStringBuilder1;
    StringBuilder localStringBuilder2;
    if (a < com.jd.libs.hybrid.base.f.b)
    {
      if (Log.i())
      {
        localStringBuilder1 = new StringBuilder("????(");
        localStringBuilder1.append(d.getUrl());
        localStringBuilder1.append(")????????????");
        if (paramJDError != null)
        {
          localStringBuilder2 = new StringBuilder("??:code = ");
          localStringBuilder2.append(paramJDError.getStatusCode());
          localStringBuilder2.append(", msg = ");
          localStringBuilder2.append(paramJDError.getMessage());
          paramJDError = localStringBuilder2.toString();
        }
        else
        {
          paramJDError = "";
        }
        localStringBuilder1.append(paramJDError);
        Log.w("CommonFileService", null, localStringBuilder1.toString());
      }
      a.set(b, d, a + 1);
      Connection.removeConnectionListener(d);
      return;
    }
    if (Log.i())
    {
      localStringBuilder1 = new StringBuilder("????(");
      localStringBuilder1.append(d.getUrl());
      localStringBuilder1.append(")?????");
      if (paramJDError != null)
      {
        localStringBuilder2 = new StringBuilder("??:code = ");
        localStringBuilder2.append(paramJDError.getStatusCode());
        localStringBuilder2.append(", msg = ");
        localStringBuilder2.append(paramJDError.getMessage());
        paramJDError = localStringBuilder2.toString();
      }
      else
      {
        paramJDError = "";
      }
      localStringBuilder1.append(paramJDError);
      Log.w("CommonFileService", null, localStringBuilder1.toString());
    }
    Connection.cleanup(d);
    Handler.a(b.d, d);
  }
}
