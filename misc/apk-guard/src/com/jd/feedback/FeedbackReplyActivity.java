package com.jd.feedback;

import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;
import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.DividerItemDecoration;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;
import com.jd.feedback.network.MimeType;
import com.jd.feedback.network.beans.MessageBean;
import com.jd.feedback.network.result.MessageRequestResult;
import com.jd.feedback.network.result.MessageRequestResult.FeedbackMessages;
import com.jd.feedback.views.ListAdapter;
import io.reactivex.Observable;
import io.reactivex.Observer;
import io.reactivex.android.schedulers.AndroidSchedulers;
import io.reactivex.disposables.Disposable;
import io.reactivex.functions.Consumer;
import io.reactivex.schedulers.Schedulers;
import java.util.ArrayList;
import java.util.List;

public class FeedbackReplyActivity
  extends AppCompatActivity
{
  public static String data;
  private ListAdapter adapter;
  private ImageView backButton;
  private Button createButton;
  private int d = 0;
  private List<MessageRequestResult.FeedbackMessages> files = new ArrayList();
  private String p;
  private RecyclerView recyclerView;
  private List<MessageBean> this$0 = new ArrayList();
  
  public FeedbackReplyActivity() {}
  
  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    setContentView(R.layout.activity_reply_detail);
    p = getIntent().getStringExtra(data);
    backButton = ((ImageView)findViewById(R.id.back));
    backButton.setOnClickListener(new View.OnClickListener()
    {
      public final void onClick(View paramAnonymousView)
      {
        finish();
      }
    });
    createButton = ((Button)findViewById(R.id.reply));
    createButton.setOnClickListener(new View.OnClickListener()
    {
      public final void onClick(View paramAnonymousView)
      {
        paramAnonymousView = new Intent((Context)FeedbackReplyActivity.this, FeedbackActivity.class);
        paramAnonymousView.putExtra(FeedbackReplyActivity.data, FeedbackReplyActivity.b(FeedbackReplyActivity.this));
        startActivity(paramAnonymousView);
      }
    });
    recyclerView = ((RecyclerView)findViewById(R.id.recycler_view));
    adapter = new ListAdapter(this$0);
    recyclerView.setAdapter(adapter);
    recyclerView.setLayoutManager(new LinearLayoutManager((Context)this, 1, false));
    paramBundle = new DividerItemDecoration((Context)this, 1);
    paramBundle.setDrawable(getResources().getDrawable(R.drawable.item_divider_horizontal_transparent));
    recyclerView.addItemDecoration(paramBundle);
  }
  
  public void onStart()
  {
    super.onStart();
    MimeType.get("1", p).doOnNext(new Consumer() {}).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer()
    {
      public final void onComplete() {}
      
      public final void onError(Throwable paramAnonymousThrowable)
      {
        Toast.makeText((Context)FeedbackReplyActivity.this, "??????", 0).show();
        StringBuilder localStringBuilder = new StringBuilder("Pull feedback reply error: ");
        localStringBuilder.append(paramAnonymousThrowable.getMessage());
        Log.e("FeedbackReplyActivity", localStringBuilder.toString(), paramAnonymousThrowable);
        paramAnonymousThrowable.printStackTrace();
      }
      
      public final void onSubscribe(Disposable paramAnonymousDisposable) {}
    });
  }
}
