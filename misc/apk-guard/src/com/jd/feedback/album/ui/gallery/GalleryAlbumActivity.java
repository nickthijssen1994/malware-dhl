package com.jd.feedback.album.ui.gallery;

import android.app.Activity;
import android.content.Intent;
import android.os.BaseBundle;
import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
import com.jd.feedback.R.layout;
import com.jd.feedback.R.string;
import com.jd.feedback.album.Paint;
import com.jd.feedback.album.a;
import com.jd.feedback.album.app.a.d;
import com.jd.feedback.album.d;
import com.jd.feedback.album.mvp.BaseActivity;
import com.jd.feedback.album.ui.e;
import java.util.ArrayList;
import java.util.Iterator;

public class GalleryAlbumActivity
  extends BaseActivity
  implements e
{
  public static com.jd.feedback.album.h<d> c;
  public static com.jd.feedback.album.h<d> e;
  public static a<String> k;
  public static a<ArrayList<d>> o;
  private ArrayList<d> a;
  private int b;
  private a.d<d> d;
  private boolean g;
  private com.jd.feedback.album.xy.asm.Label i;
  
  public GalleryAlbumActivity() {}
  
  private void c()
  {
    Object localObject = a.iterator();
    int j = 0;
    while (((Iterator)localObject).hasNext()) {
      if (nextb) {
        j += 1;
      }
    }
    localObject = getString(R.string.album_menu_finish);
    StringBuilder localStringBuilder = new StringBuilder();
    localStringBuilder.append((String)localObject);
    localStringBuilder.append("(");
    localStringBuilder.append(j);
    localStringBuilder.append(" / ");
    localStringBuilder.append(a.size());
    localStringBuilder.append(")");
    localObject = localStringBuilder.toString();
    d.a((String)localObject);
  }
  
  public final void a()
  {
    com.jd.feedback.album.Label localLabel = (com.jd.feedback.album.Label)a.get(b);
    b ^= true;
    c();
  }
  
  public final void a(int paramInt)
  {
    b = paramInt;
    Object localObject = d;
    StringBuilder localStringBuilder = new StringBuilder();
    localStringBuilder.append(paramInt + 1);
    localStringBuilder.append(" / ");
    localStringBuilder.append(a.size());
    ((com.jd.feedback.album.mvp.h)localObject).c(localStringBuilder.toString());
    localObject = (com.jd.feedback.album.Label)a.get(paramInt);
    if (g) {
      d.b(b);
    }
    d.c(e);
    if (a == 2)
    {
      if (!g) {
        d.d(true);
      }
      d.b(com.jd.feedback.album.view.f.a(x));
      d.a(true);
      return;
    }
    if (!g) {
      d.d(false);
    }
    d.a(false);
  }
  
  public final void b()
  {
    if (o != null)
    {
      ArrayList localArrayList = new ArrayList();
      Iterator localIterator = a.iterator();
      while (localIterator.hasNext())
      {
        com.jd.feedback.album.Label localLabel = (com.jd.feedback.album.Label)localIterator.next();
        if (b) {
          localArrayList.add(localLabel);
        }
      }
      o.a(localArrayList);
    }
    finish();
  }
  
  public void finish()
  {
    o = null;
    k = null;
    e = null;
    c = null;
    super.finish();
  }
  
  public void onBackPressed()
  {
    Paint localPaint = k;
    if (localPaint != null) {
      localPaint.a("User canceled.");
    }
    finish();
  }
  
  public final void onClick()
  {
    if (e != null) {
      a.get(b);
    }
  }
  
  public void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    setContentView(R.layout.album_activity_gallery);
    d = new b((Activity)this, this);
    paramBundle = getIntent().getExtras();
    if ((!set) && (paramBundle == null)) {
      throw new AssertionError();
    }
    i = ((com.jd.feedback.album.xy.asm.Label)paramBundle.getParcelable("KEY_INPUT_WIDGET"));
    a = paramBundle.getParcelableArrayList("KEY_INPUT_CHECKED_LIST");
    b = paramBundle.getInt("KEY_INPUT_CURRENT_POSITION");
    g = paramBundle.getBoolean("KEY_INPUT_GALLERY_CHECKABLE");
    d.d(i.a);
    d.a(i, g);
    d.a(a);
    int j = b;
    if (j == 0) {
      a(j);
    } else {
      d.a(j);
    }
    c();
  }
  
  public final void onRestoreInstanceState()
  {
    if (c != null) {
      a.get(b);
    }
  }
}
