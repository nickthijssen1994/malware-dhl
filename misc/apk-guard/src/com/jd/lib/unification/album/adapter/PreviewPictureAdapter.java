package com.jd.lib.unification.album.adapter;

import android.view.View;
import android.view.ViewGroup;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentStatePagerAdapter;
import com.jd.lib.unification.album.entity.LocalMedia;
import com.jd.lib.unification.album.frag.PreviewPictureFragment;
import java.util.ArrayList;

public class PreviewPictureAdapter
  extends FragmentStatePagerAdapter
{
  private PreviewPictureFragment currentFragment;
  private int currentPosition = 0;
  private boolean isAutoPlay = true;
  private ArrayList<LocalMedia> mPreviewPictureList;
  private PreviewPictureFragment oldFragment;
  private int oldpos = -1;
  
  public PreviewPictureAdapter(FragmentManager paramFragmentManager, ArrayList paramArrayList)
  {
    super(paramFragmentManager);
    mPreviewPictureList = paramArrayList;
  }
  
  public int getCount()
  {
    ArrayList localArrayList = mPreviewPictureList;
    if (localArrayList == null) {
      return 0;
    }
    return localArrayList.size();
  }
  
  public PreviewPictureFragment getCurrentFragment()
  {
    return currentFragment;
  }
  
  public Fragment getItem(int paramInt)
  {
    Object localObject = mPreviewPictureList;
    if (localObject != null) {
      localObject = (LocalMedia)((ArrayList)localObject).get(paramInt);
    } else {
      localObject = null;
    }
    return PreviewPictureFragment.newInstance((LocalMedia)localObject);
  }
  
  public int getItemPosition(Object paramObject)
  {
    return -2;
  }
  
  public boolean isViewFromObject(View paramView, Object paramObject)
  {
    return super.isViewFromObject(paramView, paramObject);
  }
  
  public void setCurrentPosition(int paramInt)
  {
    currentPosition = paramInt;
  }
  
  public void setPrimaryItem(ViewGroup paramViewGroup, int paramInt, Object paramObject)
  {
    if (!(paramObject instanceof PreviewPictureFragment)) {
      return;
    }
    currentFragment = ((PreviewPictureFragment)paramObject);
    PreviewPictureFragment localPreviewPictureFragment = oldFragment;
    if ((localPreviewPictureFragment != null) && (localPreviewPictureFragment != currentFragment)) {
      localPreviewPictureFragment.pauseVideo();
    }
    localPreviewPictureFragment = currentFragment;
    if ((localPreviewPictureFragment != null) && (oldpos != paramInt))
    {
      if ((currentPosition == paramInt) && (isAutoPlay))
      {
        localPreviewPictureFragment.adapterStart();
        isAutoPlay = false;
      }
      oldpos = paramInt;
      oldFragment = currentFragment;
    }
    super.setPrimaryItem(paramViewGroup, paramInt, paramObject);
  }
}
