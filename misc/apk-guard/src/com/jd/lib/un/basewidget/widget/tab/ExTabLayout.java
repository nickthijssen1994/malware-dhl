package com.jd.lib.un.basewidget.widget.tab;

import android.animation.Animator;
import android.animation.Animator.AnimatorListener;
import android.animation.AnimatorListenerAdapter;
import android.animation.ValueAnimator;
import android.animation.ValueAnimator.AnimatorUpdateListener;
import android.content.Context;
import android.content.res.ColorStateList;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.database.DataSetObserver;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.drawable.Drawable;
import android.os.Build.VERSION;
import android.text.Layout;
import android.text.TextUtils;
import android.util.AttributeSet;
import android.util.DisplayMetrics;
import android.util.TypedValue;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.MeasureSpec;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.view.ViewGroup.MarginLayoutParams;
import android.view.ViewParent;
import android.view.accessibility.AccessibilityEvent;
import android.view.accessibility.AccessibilityNodeInfo;
import android.view.accessibility.AccessibilityRecord;
import android.widget.FrameLayout;
import android.widget.FrameLayout.LayoutParams;
import android.widget.HorizontalScrollView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.TextView;
import androidx.appcompat.app.ActionBar.Tab;
import androidx.appcompat.content.res.AppCompatResources;
import androidx.appcompat.widget.TooltipCompat;
import androidx.core.util.Pools.Pool;
import androidx.core.util.Pools.SimplePool;
import androidx.core.util.Pools.SynchronizedPool;
import androidx.core.view.PointerIconCompat;
import androidx.core.view.ViewCompat;
import androidx.core.widget.TextViewCompat;
import androidx.viewpager.widget.PagerAdapter;
import androidx.viewpager.widget.ViewPager;
import androidx.viewpager.widget.ViewPager.DecorView;
import androidx.viewpager.widget.ViewPager.OnAdapterChangeListener;
import androidx.viewpager.widget.ViewPager.OnPageChangeListener;
import com.jd.lib.un.basewidget.R.dimen;
import com.jd.lib.un.basewidget.R.layout;
import com.jd.lib.un.basewidget.R.style;
import com.jd.lib.un.basewidget.R.styleable;
import java.lang.ref.WeakReference;
import java.util.ArrayList;
import java.util.Iterator;

@ViewPager.DecorView
public class ExTabLayout
  extends HorizontalScrollView
{
  private static final int ANIMATION_DURATION = 300;
  public static final int BOTTOM = 2;
  public static final int CENTER = 1;
  private static final boolean DEBUG = false;
  static final int DEFAULT_GAP_TEXT_ICON = 8;
  private static final int DEFAULT_HEIGHT = 48;
  private static final int DEFAULT_HEIGHT_WITH_TEXT_ICON = 72;
  public static final int EQUAL_TO_CUSTOM = -4;
  public static final int EQUAL_TO_ICON = -3;
  public static final int EQUAL_TO_TAB = -1;
  public static final int EQUAL_TO_TEXT = -2;
  static final int FIXED_WRAP_GUTTER_MIN = 16;
  public static final int GRAVITY_CENTER = 1;
  public static final int GRAVITY_FILL = 0;
  private static final int INVALID_WIDTH = -1;
  public static final int MODE_FIXED = 1;
  public static final int MODE_SCROLLABLE = 0;
  static final int MOTION_NON_ADJACENT_OFFSET = 24;
  private static final String SQL_UPDATE_6_4 = "TabLayout";
  private static final int TAB_MIN_WIDTH_MARGIN = 56;
  public static final int TYPE_DIALOG = 0;
  private static final Pools.Pool<Tab> sTabPool = (Pools.Pool)new Pools.SynchronizedPool(16);
  private AdapterChangeListener mAdapterChangeListener;
  private int mContentInsetStart;
  private OnTabSelectedListener mCurrentVpSelectedListener;
  int mMode;
  private TabLayoutOnPageChangeListener mPageChangeListener;
  private PagerAdapter mPagerAdapter;
  private DataSetObserver mPagerAdapterObserver;
  private final int mRequestedTabMaxWidth;
  private final int mRequestedTabMinWidth;
  private ValueAnimator mScrollAnimator;
  private final int mScrollableTabMinWidth;
  private OnTabSelectedListener mSelectedListener;
  private final ArrayList<OnTabSelectedListener> mSelectedListeners = new ArrayList();
  private Tab mSelectedTab;
  private boolean mSetupViewPagerImplicitly;
  final int mTabBackgroundResId;
  int mTabGravity;
  int mTabMaxWidth = Integer.MAX_VALUE;
  int mTabPaddingBottom;
  int mTabPaddingEnd;
  int mTabPaddingStart;
  int mTabPaddingTop;
  float mTabSelectedTextSize;
  private final SlidingTabStrip mTabStrip;
  int mTabTextAppearance;
  ColorStateList mTabTextColors;
  float mTabTextMultiLineSize;
  float mTabTextSize;
  private final Pools.Pool<TabView> mTabViewPool = (Pools.Pool)new Pools.SimplePool(12);
  private final ArrayList<Tab> mTabs = new ArrayList();
  ViewPager mViewPager;
  
  public ExTabLayout(Context paramContext)
  {
    this(paramContext, null);
  }
  
  public ExTabLayout(Context paramContext, AttributeSet paramAttributeSet)
  {
    this(paramContext, paramAttributeSet, 0);
  }
  
  public ExTabLayout(Context paramContext, AttributeSet paramAttributeSet, int paramInt)
  {
    super(paramContext, paramAttributeSet, paramInt);
    setHorizontalScrollBarEnabled(false);
    mTabStrip = new SlidingTabStrip(paramContext);
    super.addView(mTabStrip, 0, new FrameLayout.LayoutParams(-2, -1));
    paramContext = paramContext.obtainStyledAttributes(paramAttributeSet, R.styleable.ExTabLayout, paramInt, R.style.LibraryTabLayout);
    if (paramContext.hasValue(R.styleable.ExTabLayout_exTabIndicatorStretch))
    {
      float f = paramContext.getFloat(R.styleable.ExTabLayout_exTabIndicatorStretch, 0.0F);
      mTabStrip.setTabIndicatorStretch(f);
    }
    if (Build.VERSION.SDK_INT >= 21)
    {
      if (paramContext.getType(R.styleable.ExTabLayout_exTabIndicatorWidth) == 16) {
        mTabStrip.setTabIndicatorWidth(paramContext.getInt(R.styleable.ExTabLayout_exTabIndicatorWidth, -1));
      } else {
        mTabStrip.setTabIndicatorWidth(paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabIndicatorWidth, 0));
      }
      if (paramContext.getType(R.styleable.ExTabLayout_exTabIndicatorHeight) == 16) {
        mTabStrip.setTabIndicatorHeight(paramContext.getInt(R.styleable.ExTabLayout_exTabIndicatorHeight, -1));
      } else {
        mTabStrip.setTabIndicatorHeight(paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabIndicatorHeight, 0));
      }
    }
    else
    {
      paramAttributeSet = new TypedValue();
      if (paramContext.getValue(R.styleable.ExTabLayout_exTabIndicatorWidth, paramAttributeSet)) {
        if (type == 16) {
          mTabStrip.setTabIndicatorWidth(paramContext.getInt(R.styleable.ExTabLayout_exTabIndicatorWidth, -1));
        } else {
          mTabStrip.setTabIndicatorWidth(paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabIndicatorWidth, 0));
        }
      }
    }
    try
    {
      SlidingTabStrip localSlidingTabStrip = mTabStrip;
      paramInt = R.styleable.ExTabLayout_exTabIndicatorWidth;
      localSlidingTabStrip.setTabIndicatorWidth(paramContext.getInt(paramInt, -1));
    }
    catch (RuntimeException localRuntimeException)
    {
      for (;;) {}
    }
    mTabStrip.setTabIndicatorWidth(paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabIndicatorWidth, 0));
    if (paramContext.getValue(R.styleable.ExTabLayout_exTabIndicatorHeight, paramAttributeSet)) {
      if (type == 16) {
        mTabStrip.setTabIndicatorHeight(paramContext.getInt(R.styleable.ExTabLayout_exTabIndicatorHeight, -1));
      } else {
        mTabStrip.setTabIndicatorHeight(paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabIndicatorHeight, 0));
      }
    }
    try
    {
      paramAttributeSet = mTabStrip;
      paramInt = R.styleable.ExTabLayout_exTabIndicatorHeight;
      paramAttributeSet.setTabIndicatorHeight(paramContext.getInt(paramInt, -1));
    }
    catch (RuntimeException paramAttributeSet)
    {
      int i;
      for (;;) {}
    }
    mTabStrip.setTabIndicatorHeight(paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabIndicatorHeight, 0));
    mTabStrip.setTabIndicatorPadding(paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabIndicatorPadding, 0));
    mTabStrip.setTabIndicatorDrawable(paramContext.getDrawable(R.styleable.ExTabLayout_exTabIndicatorDrawable));
    mTabStrip.setTabIndicatorGravity(paramContext.getInt(R.styleable.ExTabLayout_exTabIndicatorGravity, 2));
    paramInt = R.styleable.ExTabLayout_exTabIndicatorColor;
    try
    {
      boolean bool = paramContext.hasValue(paramInt);
      if (bool)
      {
        paramAttributeSet = mTabStrip;
        paramInt = R.styleable.ExTabLayout_exTabIndicatorColor;
        paramAttributeSet.setTabIndicatorColor(paramContext.getColor(paramInt, 0));
      }
    }
    catch (Exception paramAttributeSet)
    {
      paramAttributeSet.printStackTrace();
    }
    paramInt = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabPadding, 0);
    mTabPaddingBottom = paramInt;
    mTabPaddingEnd = paramInt;
    mTabPaddingTop = paramInt;
    mTabPaddingStart = paramInt;
    mTabPaddingStart = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabPaddingStart, mTabPaddingStart);
    mTabPaddingTop = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabPaddingTop, mTabPaddingTop);
    mTabPaddingEnd = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabPaddingEnd, mTabPaddingEnd);
    mTabPaddingBottom = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabPaddingBottom, mTabPaddingBottom);
    mTabTextAppearance = paramContext.getResourceId(R.styleable.ExTabLayout_exTabTextAppearance, R.style.LibraryTextAppearanceTab);
    if (paramContext.hasValue(R.styleable.ExTabLayout_exTabTextColor)) {
      mTabTextColors = paramContext.getColorStateList(R.styleable.ExTabLayout_exTabTextColor);
    }
    if (paramContext.hasValue(R.styleable.ExTabLayout_exTabSelectedTextColor))
    {
      i = paramContext.getColor(R.styleable.ExTabLayout_exTabSelectedTextColor, 0);
      paramAttributeSet = mTabTextColors;
      if (paramAttributeSet == null) {
        paramInt = -16777216;
      } else {
        paramInt = paramAttributeSet.getDefaultColor();
      }
      mTabTextColors = createColorStateList(paramInt, i);
    }
    if (paramContext.hasValue(R.styleable.ExTabLayout_exTabTextSize)) {
      mTabTextSize = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabTextSize, 0);
    }
    if (paramContext.hasValue(R.styleable.ExTabLayout_exTabSelectedTextSize)) {
      mTabSelectedTextSize = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabSelectedTextSize, (int)mTabTextSize);
    } else {
      mTabSelectedTextSize = mTabTextSize;
    }
    mRequestedTabMinWidth = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabMinWidth, -1);
    mRequestedTabMaxWidth = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabMaxWidth, -1);
    mTabBackgroundResId = paramContext.getResourceId(R.styleable.ExTabLayout_exTabBackground, 0);
    mContentInsetStart = paramContext.getDimensionPixelSize(R.styleable.ExTabLayout_exTabContentStart, 0);
    mMode = paramContext.getInt(R.styleable.ExTabLayout_exTabMode, 1);
    mTabGravity = paramContext.getInt(R.styleable.ExTabLayout_exTabGravity, 0);
    paramContext.recycle();
    paramContext = getResources();
    mTabTextMultiLineSize = paramContext.getDimensionPixelSize(R.dimen.design_tab_text_size_2line);
    mScrollableTabMinWidth = paramContext.getDimensionPixelSize(R.dimen.design_tab_scrollable_min_width);
    applyModeAndGravity();
  }
  
  private void addTabFromItemView(TabItem paramTabItem)
  {
    Tab localTab = newTab();
    if (mText != null) {
      localTab.setText(mText);
    }
    if (mIcon != null) {
      localTab.setIcon(mIcon);
    }
    if (mCustomLayout != 0) {
      localTab.setCustomView(mCustomLayout);
    }
    if (!TextUtils.isEmpty(paramTabItem.getContentDescription())) {
      localTab.setContentDescription(paramTabItem.getContentDescription());
    }
    addTab(localTab);
  }
  
  private void addTabView(Tab paramTab)
  {
    TabView localTabView = mView;
    mTabStrip.addView(localTabView, paramTab.getPosition(), createLayoutParamsForTabs());
  }
  
  private void addViewInternal(View paramView)
  {
    if ((paramView instanceof TabItem))
    {
      addTabFromItemView((TabItem)paramView);
      return;
    }
    throw new IllegalArgumentException("Only TabItem instances can be added to TabLayout");
  }
  
  private void animateToTab(int paramInt)
  {
    if (paramInt == -1) {
      return;
    }
    if ((getWindowToken() != null) && (ViewCompat.isLaidOut(this)) && (!mTabStrip.childrenNeedLayout()))
    {
      int i = getScrollX();
      int j = calculateScrollXForTab(paramInt, 0.0F);
      if (i != j)
      {
        ensureScrollAnimator();
        mScrollAnimator.setIntValues(new int[] { i, j });
        mScrollAnimator.start();
      }
      mTabStrip.animateIndicatorToPosition(paramInt, 300);
      return;
    }
    setScrollPosition(paramInt, 0.0F, true);
  }
  
  private void applyModeAndGravity()
  {
    int i;
    if (mMode == 0) {
      i = Math.max(0, mContentInsetStart - mTabPaddingStart);
    } else {
      i = 0;
    }
    ViewCompat.setPaddingRelative(mTabStrip, i, 0, 0, 0);
    switch (mMode)
    {
    default: 
      break;
    case 1: 
      mTabStrip.setGravity(1);
      break;
    case 0: 
      mTabStrip.setGravity(8388611);
    }
    updateTabViews(true);
  }
  
  private int calculateScrollXForTab(int paramInt, float paramFloat)
  {
    int j = mMode;
    int i = 0;
    if (j == 0)
    {
      View localView2 = mTabStrip.getChildAt(paramInt);
      paramInt += 1;
      View localView1;
      if (paramInt < mTabStrip.getChildCount()) {
        localView1 = mTabStrip.getChildAt(paramInt);
      } else {
        localView1 = null;
      }
      if (localView2 != null) {
        paramInt = localView2.getWidth();
      } else {
        paramInt = 0;
      }
      if (localView1 != null) {
        i = localView1.getWidth();
      }
      j = localView2.getLeft() + paramInt / 2 - getWidth() / 2;
      paramInt = (int)((paramInt + i) * 0.5F * paramFloat);
      if (ViewCompat.getLayoutDirection(this) == 0) {
        return j + paramInt;
      }
      return j - paramInt;
    }
    return 0;
  }
  
  private void configureTab(Tab paramTab, int paramInt)
  {
    paramTab.setPosition(paramInt);
    mTabs.add(paramInt, paramTab);
    int i = mTabs.size();
    for (;;)
    {
      paramInt += 1;
      if (paramInt >= i) {
        break;
      }
      ((Tab)mTabs.get(paramInt)).setPosition(paramInt);
    }
  }
  
  private static ColorStateList createColorStateList(int paramInt1, int paramInt2)
  {
    return new ColorStateList(new int[][] { View.SELECTED_STATE_SET, View.EMPTY_STATE_SET }, new int[] { paramInt2, paramInt1 });
  }
  
  private LinearLayout.LayoutParams createLayoutParamsForTabs()
  {
    LinearLayout.LayoutParams localLayoutParams = new LinearLayout.LayoutParams(-2, -1);
    updateTabViewLayoutParams(localLayoutParams);
    return localLayoutParams;
  }
  
  private TabView createTabView(Tab paramTab)
  {
    Object localObject1 = mTabViewPool;
    if (localObject1 != null) {
      localObject1 = (TabView)((Pools.Pool)localObject1).acquire();
    } else {
      localObject1 = null;
    }
    Object localObject2 = localObject1;
    if (localObject1 == null) {
      localObject2 = new TabView(getContext());
    }
    ((TabView)localObject2).setTab(paramTab);
    ((View)localObject2).setFocusable(true);
    ((View)localObject2).setMinimumWidth(getTabMinWidth());
    return localObject2;
  }
  
  private void dispatchTabReselected(Tab paramTab)
  {
    int i = mSelectedListeners.size() - 1;
    while (i >= 0)
    {
      ((OnTabSelectedListener)mSelectedListeners.get(i)).onTabReselected(paramTab);
      i -= 1;
    }
  }
  
  private void dispatchTabSelected(Tab paramTab)
  {
    int i = mSelectedListeners.size() - 1;
    while (i >= 0)
    {
      ((OnTabSelectedListener)mSelectedListeners.get(i)).onTabSelected(paramTab);
      i -= 1;
    }
  }
  
  private void dispatchTabUnselected(Tab paramTab)
  {
    int i = mSelectedListeners.size() - 1;
    while (i >= 0)
    {
      ((OnTabSelectedListener)mSelectedListeners.get(i)).onTabUnselected(paramTab);
      i -= 1;
    }
  }
  
  private void ensureScrollAnimator()
  {
    if (mScrollAnimator == null)
    {
      mScrollAnimator = new ValueAnimator();
      mScrollAnimator.setInterpolator(AnimationUtils.FAST_OUT_SLOW_IN_INTERPOLATOR);
      mScrollAnimator.setDuration(300L);
      mScrollAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener()
      {
        public void onAnimationUpdate(ValueAnimator paramAnonymousValueAnimator)
        {
          scrollTo(((Integer)paramAnonymousValueAnimator.getAnimatedValue()).intValue(), 0);
        }
      });
    }
  }
  
  private int getDefaultHeight()
  {
    int m = mTabs.size();
    int k = 0;
    int i = 0;
    int j;
    for (;;)
    {
      j = k;
      if (i >= m) {
        break;
      }
      Tab localTab = (Tab)mTabs.get(i);
      if ((localTab != null) && (localTab.getIcon() != null) && (!TextUtils.isEmpty(localTab.getText())))
      {
        j = 1;
        break;
      }
      i += 1;
    }
    if (j != 0) {
      return 72;
    }
    return 48;
  }
  
  private float getScrollPosition()
  {
    return mTabStrip.getIndicatorPosition();
  }
  
  private int getTabMinWidth()
  {
    int i = mRequestedTabMinWidth;
    if (i != -1) {
      return i;
    }
    if (mMode == 0) {
      return mScrollableTabMinWidth;
    }
    return 0;
  }
  
  private int getTabScrollRange()
  {
    return Math.max(0, mTabStrip.getWidth() - getWidth() - getPaddingLeft() - getPaddingRight());
  }
  
  private void removeTabViewAt(int paramInt)
  {
    TabView localTabView = (TabView)mTabStrip.getChildAt(paramInt);
    mTabStrip.removeViewAt(paramInt);
    if (localTabView != null)
    {
      localTabView.reset();
      mTabViewPool.release(localTabView);
    }
    requestLayout();
  }
  
  private void setSelectedTabView(int paramInt)
  {
    int j = mTabStrip.getChildCount();
    if (paramInt < j)
    {
      int i = 0;
      while (i < j)
      {
        View localView = mTabStrip.getChildAt(i);
        boolean bool;
        if (i == paramInt) {
          bool = true;
        } else {
          bool = false;
        }
        localView.setSelected(bool);
        i += 1;
      }
    }
  }
  
  private void setupWithViewPager(ViewPager paramViewPager, boolean paramBoolean1, boolean paramBoolean2)
  {
    Object localObject = mViewPager;
    if (localObject != null)
    {
      TabLayoutOnPageChangeListener localTabLayoutOnPageChangeListener = mPageChangeListener;
      if (localTabLayoutOnPageChangeListener != null) {
        ((ViewPager)localObject).removeOnPageChangeListener(localTabLayoutOnPageChangeListener);
      }
      localObject = mAdapterChangeListener;
      if (localObject != null) {
        mViewPager.removeOnAdapterChangeListener((ViewPager.OnAdapterChangeListener)localObject);
      }
    }
    localObject = mCurrentVpSelectedListener;
    if (localObject != null)
    {
      removeOnTabSelectedListener((OnTabSelectedListener)localObject);
      mCurrentVpSelectedListener = null;
    }
    if (paramViewPager != null)
    {
      mViewPager = paramViewPager;
      if (mPageChangeListener == null) {
        mPageChangeListener = new TabLayoutOnPageChangeListener(this);
      }
      mPageChangeListener.reset();
      paramViewPager.addOnPageChangeListener(mPageChangeListener);
      mCurrentVpSelectedListener = new ViewPagerOnTabSelectedListener(paramViewPager);
      addOnTabSelectedListener(mCurrentVpSelectedListener);
      localObject = paramViewPager.getAdapter();
      if (localObject != null) {
        setPagerAdapter((PagerAdapter)localObject, paramBoolean1);
      }
      if (mAdapterChangeListener == null) {
        mAdapterChangeListener = new AdapterChangeListener();
      }
      mAdapterChangeListener.setAutoRefresh(paramBoolean1);
      paramViewPager.addOnAdapterChangeListener(mAdapterChangeListener);
      setScrollPosition(paramViewPager.getCurrentItem(), 0.0F, true);
    }
    else
    {
      mViewPager = null;
      setPagerAdapter(null, false);
    }
    mSetupViewPagerImplicitly = paramBoolean2;
  }
  
  private void updateAllTabs()
  {
    int j = mTabs.size();
    int i = 0;
    while (i < j)
    {
      ((Tab)mTabs.get(i)).updateView();
      i += 1;
    }
  }
  
  private void updateTabViewLayoutParams(LinearLayout.LayoutParams paramLayoutParams)
  {
    if ((mMode == 1) && (mTabGravity == 0))
    {
      width = 0;
      weight = 1.0F;
      return;
    }
    width = -2;
    weight = 0.0F;
  }
  
  public void addOnTabSelectedListener(OnTabSelectedListener paramOnTabSelectedListener)
  {
    if (!mSelectedListeners.contains(paramOnTabSelectedListener)) {
      mSelectedListeners.add(paramOnTabSelectedListener);
    }
  }
  
  public void addTab(Tab paramTab)
  {
    addTab(paramTab, mTabs.isEmpty());
  }
  
  public void addTab(Tab paramTab, int paramInt)
  {
    addTab(paramTab, paramInt, mTabs.isEmpty());
  }
  
  public void addTab(Tab paramTab, int paramInt, boolean paramBoolean)
  {
    if (mParent == this)
    {
      configureTab(paramTab, paramInt);
      addTabView(paramTab);
      if (paramBoolean) {
        paramTab.select();
      }
    }
    else
    {
      throw new IllegalArgumentException("Tab belongs to a different TabLayout.");
    }
  }
  
  public void addTab(Tab paramTab, boolean paramBoolean)
  {
    addTab(paramTab, mTabs.size(), paramBoolean);
  }
  
  public void addView(View paramView)
  {
    addViewInternal(paramView);
  }
  
  public void addView(View paramView, int paramInt)
  {
    addViewInternal(paramView);
  }
  
  public void addView(View paramView, int paramInt, ViewGroup.LayoutParams paramLayoutParams)
  {
    addViewInternal(paramView);
  }
  
  public void addView(View paramView, ViewGroup.LayoutParams paramLayoutParams)
  {
    addViewInternal(paramView);
  }
  
  public void clearOnTabSelectedListeners()
  {
    mSelectedListeners.clear();
  }
  
  int dpToPx(int paramInt)
  {
    return Math.round(getResourcesgetDisplayMetricsdensity * paramInt);
  }
  
  public FrameLayout.LayoutParams generateLayoutParams(AttributeSet paramAttributeSet)
  {
    return generateDefaultLayoutParams();
  }
  
  public int getSelectedTabPosition()
  {
    Tab localTab = mSelectedTab;
    if (localTab != null) {
      return localTab.getPosition();
    }
    return -1;
  }
  
  public Tab getTabAt(int paramInt)
  {
    if ((paramInt >= 0) && (paramInt < getTabCount())) {
      return (Tab)mTabs.get(paramInt);
    }
    return null;
  }
  
  public int getTabCount()
  {
    return mTabs.size();
  }
  
  public int getTabGravity()
  {
    return mTabGravity;
  }
  
  int getTabMaxWidth()
  {
    return mTabMaxWidth;
  }
  
  public int getTabMode()
  {
    return mMode;
  }
  
  public ColorStateList getTabTextColors()
  {
    return mTabTextColors;
  }
  
  public Tab newTab()
  {
    Tab localTab2 = (Tab)sTabPool.acquire();
    Tab localTab1 = localTab2;
    if (localTab2 == null) {
      localTab1 = new Tab();
    }
    mParent = this;
    mView = createTabView(localTab1);
    return localTab1;
  }
  
  protected void onAttachedToWindow()
  {
    super.onAttachedToWindow();
    if (mViewPager == null)
    {
      ViewParent localViewParent = getParent();
      if ((localViewParent instanceof ViewPager)) {
        setupWithViewPager((ViewPager)localViewParent, true, true);
      }
    }
  }
  
  protected void onDetachedFromWindow()
  {
    super.onDetachedFromWindow();
    if (mSetupViewPagerImplicitly)
    {
      setupWithViewPager(null);
      mSetupViewPagerImplicitly = false;
    }
  }
  
  protected void onMeasure(int paramInt1, int paramInt2)
  {
    int i = dpToPx(getDefaultHeight()) + getPaddingTop() + getPaddingBottom();
    int j = View.MeasureSpec.getMode(paramInt2);
    if (j != Integer.MIN_VALUE)
    {
      if (j == 0) {
        paramInt2 = View.MeasureSpec.makeMeasureSpec(i, 1073741824);
      }
    }
    else {
      paramInt2 = View.MeasureSpec.makeMeasureSpec(Math.min(i, View.MeasureSpec.getSize(paramInt2)), 1073741824);
    }
    j = View.MeasureSpec.getSize(paramInt1);
    if (View.MeasureSpec.getMode(paramInt1) != 0)
    {
      i = mRequestedTabMaxWidth;
      if (i <= 0) {
        i = j - dpToPx(56);
      }
      mTabMaxWidth = i;
    }
    super.onMeasure(paramInt1, paramInt2);
    if (getChildCount() == 1)
    {
      paramInt1 = 0;
      View localView = getChildAt(0);
      switch (mMode)
      {
      default: 
        break;
      case 1: 
        if (localView.getMeasuredWidth() != getMeasuredWidth()) {
          paramInt1 = 1;
        }
        break;
      case 0: 
        if (localView.getMeasuredWidth() < getMeasuredWidth()) {
          paramInt1 = 1;
        }
        break;
      }
      if (paramInt1 != 0)
      {
        paramInt1 = ViewGroup.getChildMeasureSpec(paramInt2, getPaddingTop() + getPaddingBottom(), getLayoutParamsheight);
        localView.measure(View.MeasureSpec.makeMeasureSpec(getMeasuredWidth(), 1073741824), paramInt1);
      }
    }
  }
  
  void populateFromPagerAdapter()
  {
    removeAllTabs();
    Object localObject = mPagerAdapter;
    if (localObject != null)
    {
      int j = ((PagerAdapter)localObject).getCount();
      int i = 0;
      while (i < j)
      {
        addTab(newTab().setText(mPagerAdapter.getPageTitle(i)), false);
        i += 1;
      }
      localObject = mViewPager;
      if ((localObject != null) && (j > 0))
      {
        i = ((ViewPager)localObject).getCurrentItem();
        if ((i != getSelectedTabPosition()) && (i < getTabCount())) {
          selectTab(getTabAt(i));
        }
      }
    }
  }
  
  public void removeAllTabs()
  {
    int i = mTabStrip.getChildCount() - 1;
    while (i >= 0)
    {
      removeTabViewAt(i);
      i -= 1;
    }
    Iterator localIterator = mTabs.iterator();
    while (localIterator.hasNext())
    {
      Tab localTab = (Tab)localIterator.next();
      localIterator.remove();
      localTab.reset();
      sTabPool.release(localTab);
    }
    mSelectedTab = null;
  }
  
  public void removeOnTabSelectedListener(OnTabSelectedListener paramOnTabSelectedListener)
  {
    mSelectedListeners.remove(paramOnTabSelectedListener);
  }
  
  public void removeTab(Tab paramTab)
  {
    if (mParent == this)
    {
      removeTabAt(paramTab.getPosition());
      return;
    }
    throw new IllegalArgumentException("Tab does not belong to this TabLayout.");
  }
  
  public void removeTabAt(int paramInt)
  {
    Tab localTab = mSelectedTab;
    int i;
    if (localTab != null) {
      i = localTab.getPosition();
    } else {
      i = 0;
    }
    removeTabViewAt(paramInt);
    localTab = (Tab)mTabs.remove(paramInt);
    if (localTab != null)
    {
      localTab.reset();
      sTabPool.release(localTab);
    }
    int k = mTabs.size();
    int j = paramInt;
    while (j < k)
    {
      ((Tab)mTabs.get(j)).setPosition(j);
      j += 1;
    }
    if (i == paramInt)
    {
      if (mTabs.isEmpty()) {
        localTab = null;
      } else {
        localTab = (Tab)mTabs.get(Math.max(0, paramInt - 1));
      }
      selectTab(localTab);
    }
  }
  
  void selectTab(Tab paramTab)
  {
    selectTab(paramTab, true);
  }
  
  void selectTab(Tab paramTab, boolean paramBoolean)
  {
    Tab localTab = mSelectedTab;
    if (localTab == paramTab)
    {
      if (localTab != null)
      {
        dispatchTabReselected(paramTab);
        animateToTab(paramTab.getPosition());
      }
    }
    else
    {
      int i;
      if (paramTab != null) {
        i = paramTab.getPosition();
      } else {
        i = -1;
      }
      if (paramBoolean)
      {
        if (((localTab == null) || (localTab.getPosition() == -1)) && (i != -1)) {
          setScrollPosition(i, 0.0F, true);
        } else {
          animateToTab(i);
        }
        if (i != -1) {
          setSelectedTabView(i);
        }
      }
      if (localTab != null) {
        dispatchTabUnselected(localTab);
      }
      mSelectedTab = paramTab;
      if (paramTab != null) {
        dispatchTabSelected(paramTab);
      }
    }
  }
  
  public void setOnTabSelectedListener(OnTabSelectedListener paramOnTabSelectedListener)
  {
    OnTabSelectedListener localOnTabSelectedListener = mSelectedListener;
    if (localOnTabSelectedListener != null) {
      removeOnTabSelectedListener(localOnTabSelectedListener);
    }
    mSelectedListener = paramOnTabSelectedListener;
    if (paramOnTabSelectedListener != null) {
      addOnTabSelectedListener(paramOnTabSelectedListener);
    }
  }
  
  void setPagerAdapter(PagerAdapter paramPagerAdapter, boolean paramBoolean)
  {
    PagerAdapter localPagerAdapter = mPagerAdapter;
    if (localPagerAdapter != null)
    {
      DataSetObserver localDataSetObserver = mPagerAdapterObserver;
      if (localDataSetObserver != null) {
        localPagerAdapter.unregisterDataSetObserver(localDataSetObserver);
      }
    }
    mPagerAdapter = paramPagerAdapter;
    if ((paramBoolean) && (paramPagerAdapter != null))
    {
      if (mPagerAdapterObserver == null) {
        mPagerAdapterObserver = new PagerAdapterObserver();
      }
      paramPagerAdapter.registerDataSetObserver(mPagerAdapterObserver);
    }
    populateFromPagerAdapter();
  }
  
  void setScrollAnimatorListener(Animator.AnimatorListener paramAnimatorListener)
  {
    ensureScrollAnimator();
    mScrollAnimator.addListener(paramAnimatorListener);
  }
  
  public void setScrollPosition(int paramInt, float paramFloat, boolean paramBoolean)
  {
    setScrollPosition(paramInt, paramFloat, paramBoolean, true);
  }
  
  void setScrollPosition(int paramInt, float paramFloat, boolean paramBoolean1, boolean paramBoolean2)
  {
    int i = Math.round(paramInt + paramFloat);
    if (i >= 0)
    {
      if (i >= mTabStrip.getChildCount()) {
        return;
      }
      if (paramBoolean2) {
        mTabStrip.setIndicatorPositionFromTabPosition(paramInt, paramFloat);
      }
      ValueAnimator localValueAnimator = mScrollAnimator;
      if ((localValueAnimator != null) && (localValueAnimator.isRunning())) {
        mScrollAnimator.cancel();
      }
      scrollTo(calculateScrollXForTab(paramInt, paramFloat), 0);
      if (paramBoolean1) {
        setSelectedTabView(i);
      }
    }
  }
  
  public void setTabGravity(int paramInt)
  {
    if (mTabGravity != paramInt)
    {
      mTabGravity = paramInt;
      applyModeAndGravity();
    }
  }
  
  public void setTabIndicatorColor(int paramInt)
  {
    mTabStrip.setTabIndicatorColor(paramInt);
  }
  
  public void setTabIndicatorDrawable(Drawable paramDrawable)
  {
    mTabStrip.setTabIndicatorDrawable(paramDrawable);
  }
  
  public void setTabIndicatorGravity(int paramInt)
  {
    mTabStrip.setTabIndicatorGravity(paramInt);
  }
  
  public void setTabIndicatorHeight(int paramInt)
  {
    mTabStrip.setTabIndicatorHeight(paramInt);
  }
  
  public void setTabIndicatorPadding(int paramInt)
  {
    mTabStrip.setTabIndicatorPadding(paramInt);
  }
  
  public void setTabIndicatorStretch(float paramFloat)
  {
    mTabStrip.setTabIndicatorStretch(paramFloat);
  }
  
  public void setTabIndicatorWidth(int paramInt)
  {
    mTabStrip.setTabIndicatorWidth(paramInt);
  }
  
  public void setTabMode(int paramInt)
  {
    if (paramInt != mMode)
    {
      mMode = paramInt;
      applyModeAndGravity();
    }
  }
  
  public void setTabTextColors(int paramInt1, int paramInt2)
  {
    setTabTextColors(createColorStateList(paramInt1, paramInt2));
  }
  
  public void setTabTextColors(ColorStateList paramColorStateList)
  {
    if (mTabTextColors != paramColorStateList)
    {
      mTabTextColors = paramColorStateList;
      updateAllTabs();
    }
  }
  
  public void setTabTextSize(int paramInt1, int paramInt2)
  {
    float f1 = mTabTextSize;
    float f2 = paramInt1;
    if (f1 != f2)
    {
      mTabTextSize = f2;
      mTabSelectedTextSize = paramInt2;
      updateAllTabs();
    }
  }
  
  public void setTabsFromPagerAdapter(PagerAdapter paramPagerAdapter)
  {
    setPagerAdapter(paramPagerAdapter, false);
  }
  
  public void setupWithViewPager(ViewPager paramViewPager)
  {
    setupWithViewPager(paramViewPager, true);
  }
  
  public void setupWithViewPager(ViewPager paramViewPager, boolean paramBoolean)
  {
    setupWithViewPager(paramViewPager, paramBoolean, false);
  }
  
  public boolean shouldDelayChildPressedState()
  {
    return getTabScrollRange() > 0;
  }
  
  void updateTabViews(boolean paramBoolean)
  {
    int i = 0;
    while (i < mTabStrip.getChildCount())
    {
      View localView = mTabStrip.getChildAt(i);
      localView.setMinimumWidth(getTabMinWidth());
      updateTabViewLayoutParams((LinearLayout.LayoutParams)localView.getLayoutParams());
      if (paramBoolean) {
        localView.requestLayout();
      }
      i += 1;
    }
  }
  
  private class AdapterChangeListener
    implements ViewPager.OnAdapterChangeListener
  {
    private boolean mAutoRefresh;
    
    AdapterChangeListener() {}
    
    public void onAdapterChanged(ViewPager paramViewPager, PagerAdapter paramPagerAdapter1, PagerAdapter paramPagerAdapter2)
    {
      if (mViewPager == paramViewPager) {
        setPagerAdapter(paramPagerAdapter2, mAutoRefresh);
      }
    }
    
    void setAutoRefresh(boolean paramBoolean)
    {
      mAutoRefresh = paramBoolean;
    }
  }
  
  public static abstract interface OnTabSelectedListener
  {
    public abstract void onTabReselected(ExTabLayout.Tab paramTab);
    
    public abstract void onTabSelected(ExTabLayout.Tab paramTab);
    
    public abstract void onTabUnselected(ExTabLayout.Tab paramTab);
  }
  
  private class PagerAdapterObserver
    extends DataSetObserver
  {
    PagerAdapterObserver() {}
    
    public void onChanged()
    {
      populateFromPagerAdapter();
    }
    
    public void onInvalidated()
    {
      populateFromPagerAdapter();
    }
  }
  
  private class SlidingTabStrip
    extends LinearLayout
  {
    private ValueAnimator mIndicatorAnimator;
    private int mIndicatorLeft = -1;
    private int mIndicatorRight = -1;
    private int mLayoutDirection = -1;
    int mSelectedPosition = -1;
    float mSelectionOffset;
    private Drawable mTabIndicatorDrawable;
    private int mTabIndicatorGravity;
    private int mTabIndicatorHeight;
    private int mTabIndicatorPadding;
    private final Paint mTabIndicatorPaint;
    private float mTabIndicatorStretch;
    private int mTabIndicatorWidth;
    
    SlidingTabStrip(Context paramContext)
    {
      super();
      setWillNotDraw(false);
      mTabIndicatorPaint = new Paint();
    }
    
    private float calculateStretch(float paramFloat)
    {
      if (paramFloat < 0.5D) {
        return paramFloat + mTabIndicatorStretch * paramFloat;
      }
      return paramFloat + (1.0F - paramFloat) * mTabIndicatorStretch;
    }
    
    private void updateIndicatorPosition()
    {
      Object localObject = getChildAt(mSelectedPosition);
      int i;
      int j;
      if ((localObject != null) && (((View)localObject).getWidth() > 0))
      {
        localObject = getToTabStripLeftDistance((View)localObject);
        int m = localObject[0];
        int k = localObject[1];
        i = m;
        j = k;
        if (mSelectionOffset > 0.0F)
        {
          i = m;
          j = k;
          if (mSelectedPosition < getChildCount() - 1)
          {
            localObject = getToTabStripLeftDistance(getChildAt(mSelectedPosition + 1));
            i = localObject[0];
            j = localObject[1];
            float f = mSelectionOffset;
            i = AnimationUtils.lerp(m, i, f);
            j = AnimationUtils.lerp(k, j, calculateStretch(f));
          }
        }
      }
      else
      {
        i = -1;
        j = -1;
      }
      setIndicatorPosition(i, j);
    }
    
    void animateIndicatorToPosition(final int paramInt1, int paramInt2)
    {
      Object localObject = mIndicatorAnimator;
      if ((localObject != null) && (((ValueAnimator)localObject).isRunning())) {
        mIndicatorAnimator.cancel();
      }
      final int i;
      if (ViewCompat.getLayoutDirection(this) == 1) {
        i = 1;
      } else {
        i = 0;
      }
      localObject = getChildAt(paramInt1);
      if (localObject == null)
      {
        updateIndicatorPosition();
        return;
      }
      localObject = getToTabStripLeftDistance((View)localObject);
      final int k = localObject[0];
      final int m = localObject[1];
      final int j;
      if (Math.abs(paramInt1 - mSelectedPosition) <= 1)
      {
        i = mIndicatorLeft;
        j = mIndicatorRight;
      }
      else
      {
        j = dpToPx(24);
        if (paramInt1 < mSelectedPosition)
        {
          if (i != 0)
          {
            j = k - j;
            i = j;
          }
          else
          {
            j += m;
            i = j;
          }
        }
        else if (i != 0)
        {
          j += m;
          i = j;
        }
        else
        {
          j = k - j;
          i = j;
        }
      }
      if ((i != k) || (j != m))
      {
        localObject = new ValueAnimator();
        mIndicatorAnimator = ((ValueAnimator)localObject);
        ((ValueAnimator)localObject).setInterpolator(AnimationUtils.FAST_OUT_SLOW_IN_INTERPOLATOR);
        ((ValueAnimator)localObject).setDuration(paramInt2);
        ((ValueAnimator)localObject).setFloatValues(new float[] { 0.0F, 1.0F });
        ((ValueAnimator)localObject).addUpdateListener(new ValueAnimator.AnimatorUpdateListener()
        {
          public void onAnimationUpdate(ValueAnimator paramAnonymousValueAnimator)
          {
            float f = paramAnonymousValueAnimator.getAnimatedFraction();
            int i = i;
            int j = k;
            if (i < j)
            {
              setIndicatorPosition(AnimationUtils.lerp(i, j, f), AnimationUtils.lerp(j, m, ExTabLayout.SlidingTabStrip.this.calculateStretch(f)));
              return;
            }
            paramAnonymousValueAnimator = ExTabLayout.SlidingTabStrip.this;
            paramAnonymousValueAnimator.setIndicatorPosition(AnimationUtils.lerp(i, j, paramAnonymousValueAnimator.calculateStretch(f)), AnimationUtils.lerp(j, m, f));
          }
        });
        ((Animator)localObject).addListener(new AnimatorListenerAdapter()
        {
          public void onAnimationEnd(Animator paramAnonymousAnimator)
          {
            paramAnonymousAnimator = ExTabLayout.SlidingTabStrip.this;
            mSelectedPosition = paramInt1;
            mSelectionOffset = 0.0F;
          }
        });
        ((ValueAnimator)localObject).start();
      }
    }
    
    boolean childrenNeedLayout()
    {
      int j = getChildCount();
      int i = 0;
      while (i < j)
      {
        if (getChildAt(i).getWidth() <= 0) {
          return true;
        }
        i += 1;
      }
      return false;
    }
    
    public void draw(Canvas paramCanvas)
    {
      super.draw(paramCanvas);
    }
    
    View getCustom(View paramView)
    {
      if ((paramView instanceof ExTabLayout.TabView))
      {
        paramView = (ExTabLayout.TabView)paramView;
        if (ExTabLayout.TabView.access$400(paramView) != null) {
          return ExTabLayout.TabView.access$400(paramView);
        }
        return paramView;
      }
      return paramView;
    }
    
    View getIcon(View paramView)
    {
      if ((paramView instanceof ExTabLayout.TabView))
      {
        paramView = (ExTabLayout.TabView)paramView;
        if (ExTabLayout.TabView.access$200(paramView) != null) {
          return ExTabLayout.TabView.access$200(paramView);
        }
        if (ExTabLayout.TabView.access$300(paramView) != null) {
          return ExTabLayout.TabView.access$300(paramView);
        }
        return paramView;
      }
      return paramView;
    }
    
    float getIndicatorPosition()
    {
      return mSelectedPosition + mSelectionOffset;
    }
    
    int getLineHeight(View paramView)
    {
      int j = mTabIndicatorHeight;
      int i = j;
      if (j < 0)
      {
        switch (j)
        {
        default: 
          return paramView.getHeight();
        case -2: 
          return getTextView(paramView).getHeight();
        case -3: 
          return getIcon(paramView).getHeight();
        }
        i = getCustom(paramView).getHeight();
      }
      return i;
    }
    
    int getLineWidth(View paramView)
    {
      int j = mTabIndicatorWidth;
      int i = j;
      if (j < 0)
      {
        switch (j)
        {
        default: 
          return paramView.getWidth();
        case -2: 
          return getTextView(paramView).getWidth();
        case -3: 
          return getIcon(paramView).getWidth();
        }
        i = getCustom(paramView).getWidth();
      }
      return i;
    }
    
    View getTextView(View paramView)
    {
      if ((paramView instanceof ExTabLayout.TabView))
      {
        paramView = (ExTabLayout.TabView)paramView;
        if (ExTabLayout.TabView.access$000(paramView) != null) {
          return ExTabLayout.TabView.access$000(paramView);
        }
        if (ExTabLayout.TabView.access$100(paramView) != null) {
          return ExTabLayout.TabView.access$100(paramView);
        }
        return paramView;
      }
      return paramView;
    }
    
    int[] getToTabStripLeftDistance(View paramView)
    {
      int i = getLineWidth(paramView);
      int j = paramView.getLeft() + (paramView.getWidth() - i) / 2;
      return new int[] { j, j + i };
    }
    
    protected void onDraw(Canvas paramCanvas)
    {
      super.onDraw(paramCanvas);
      int k = mIndicatorLeft;
      if (k >= 0)
      {
        int m = mIndicatorRight;
        if (m > k)
        {
          int j = getLineHeight(getChildAt(mSelectedPosition));
          int i;
          switch (mTabIndicatorGravity)
          {
          default: 
            i = getHeight();
            int n = getHeight();
            int i1 = mTabIndicatorPadding;
            i = i - j - i1;
            j = n - i1;
            break;
          case 1: 
            i = getHeight() / 2 - j / 2;
            j += i;
            break;
          case 0: 
            i = mTabIndicatorPadding;
            j = j + 0 + i;
            i += 0;
          }
          Drawable localDrawable = mTabIndicatorDrawable;
          if (localDrawable != null)
          {
            localDrawable.setBounds(k, i, m, j);
            mTabIndicatorDrawable.draw(paramCanvas);
            return;
          }
          paramCanvas.drawRect(k, i, m, j, mTabIndicatorPaint);
        }
      }
    }
    
    protected void onLayout(boolean paramBoolean, int paramInt1, int paramInt2, int paramInt3, int paramInt4)
    {
      super.onLayout(paramBoolean, paramInt1, paramInt2, paramInt3, paramInt4);
      ValueAnimator localValueAnimator = mIndicatorAnimator;
      if ((localValueAnimator != null) && (localValueAnimator.isRunning()))
      {
        mIndicatorAnimator.cancel();
        long l = mIndicatorAnimator.getDuration();
        animateIndicatorToPosition(mSelectedPosition, Math.round((1.0F - mIndicatorAnimator.getAnimatedFraction()) * (float)l));
        return;
      }
      updateIndicatorPosition();
    }
    
    protected void onMeasure(int paramInt1, int paramInt2)
    {
      super.onMeasure(paramInt1, paramInt2);
      if (View.MeasureSpec.getMode(paramInt1) != 1073741824) {
        return;
      }
      int i = mMode;
      int m = 1;
      if ((i == 1) && (mTabGravity == 1))
      {
        int i1 = getChildCount();
        int n = 0;
        i = 0;
        Object localObject;
        int k;
        for (int j = 0; i < i1; j = k)
        {
          localObject = getChildAt(i);
          k = j;
          if (((View)localObject).getVisibility() == 0) {
            k = Math.max(j, ((View)localObject).getMeasuredWidth());
          }
          i += 1;
        }
        if (j <= 0) {
          return;
        }
        i = dpToPx(16);
        if (j * i1 <= getMeasuredWidth() - i * 2)
        {
          i = 0;
          k = n;
          while (k < i1)
          {
            localObject = (LinearLayout.LayoutParams)getChildAt(k).getLayoutParams();
            if ((width != j) || (weight != 0.0F))
            {
              width = j;
              weight = 0.0F;
              i = 1;
            }
            k += 1;
          }
        }
        else
        {
          localObject = ExTabLayout.this;
          mTabGravity = 0;
          ((ExTabLayout)localObject).updateTabViews(false);
          i = m;
        }
        if (i != 0) {
          super.onMeasure(paramInt1, paramInt2);
        }
      }
    }
    
    public void onRtlPropertiesChanged(int paramInt)
    {
      super.onRtlPropertiesChanged(paramInt);
      if ((Build.VERSION.SDK_INT < 23) && (mLayoutDirection != paramInt))
      {
        requestLayout();
        mLayoutDirection = paramInt;
      }
    }
    
    void setIndicatorPosition(int paramInt1, int paramInt2)
    {
      if ((paramInt1 != mIndicatorLeft) || (paramInt2 != mIndicatorRight))
      {
        mIndicatorLeft = paramInt1;
        mIndicatorRight = paramInt2;
        ViewCompat.postInvalidateOnAnimation(this);
      }
    }
    
    void setIndicatorPositionFromTabPosition(int paramInt, float paramFloat)
    {
      ValueAnimator localValueAnimator = mIndicatorAnimator;
      if ((localValueAnimator != null) && (localValueAnimator.isRunning())) {
        mIndicatorAnimator.cancel();
      }
      mSelectedPosition = paramInt;
      mSelectionOffset = paramFloat;
      updateIndicatorPosition();
    }
    
    void setTabIndicatorColor(int paramInt)
    {
      if (mTabIndicatorPaint.getColor() != paramInt)
      {
        mTabIndicatorPaint.setColor(paramInt);
        ViewCompat.postInvalidateOnAnimation(this);
      }
    }
    
    void setTabIndicatorDrawable(Drawable paramDrawable)
    {
      Drawable localDrawable = mTabIndicatorDrawable;
      if ((localDrawable == null) || (localDrawable != paramDrawable))
      {
        mTabIndicatorDrawable = paramDrawable;
        ViewCompat.postInvalidateOnAnimation(this);
      }
    }
    
    void setTabIndicatorGravity(int paramInt)
    {
      if (mTabIndicatorGravity != paramInt)
      {
        mTabIndicatorGravity = paramInt;
        ViewCompat.postInvalidateOnAnimation(this);
      }
    }
    
    void setTabIndicatorHeight(int paramInt)
    {
      if (mTabIndicatorHeight != paramInt)
      {
        mTabIndicatorHeight = paramInt;
        ViewCompat.postInvalidateOnAnimation(this);
      }
    }
    
    void setTabIndicatorPadding(int paramInt)
    {
      if (mTabIndicatorPadding != paramInt)
      {
        mTabIndicatorPadding = paramInt;
        ViewCompat.postInvalidateOnAnimation(this);
      }
    }
    
    void setTabIndicatorStretch(float paramFloat)
    {
      if ((paramFloat >= 0.0F) && (paramFloat <= 1.0F))
      {
        if (mTabIndicatorStretch != paramFloat)
        {
          mTabIndicatorStretch = paramFloat;
          ViewCompat.postInvalidateOnAnimation(this);
        }
      }
      else {
        throw new IllegalArgumentException("stretch should be >=0 && <=1");
      }
    }
    
    void setTabIndicatorWidth(int paramInt)
    {
      if (mTabIndicatorWidth != paramInt)
      {
        mTabIndicatorWidth = paramInt;
        ViewCompat.postInvalidateOnAnimation(this);
      }
    }
  }
  
  public static final class Tab
  {
    public static final int INVALID_POSITION = -1;
    private CharSequence mContentDesc;
    private View mCustomView;
    private Drawable mIcon;
    ExTabLayout mParent;
    private int mPosition = -1;
    private Object mTag;
    private CharSequence mText;
    ExTabLayout.TabView mView;
    
    Tab() {}
    
    public CharSequence getContentDescription()
    {
      return mContentDesc;
    }
    
    public View getCustomView()
    {
      return mCustomView;
    }
    
    public Drawable getIcon()
    {
      return mIcon;
    }
    
    public int getPosition()
    {
      return mPosition;
    }
    
    public Object getTag()
    {
      return mTag;
    }
    
    public CharSequence getText()
    {
      return mText;
    }
    
    public boolean isSelected()
    {
      ExTabLayout localExTabLayout = mParent;
      if (localExTabLayout != null) {
        return localExTabLayout.getSelectedTabPosition() == mPosition;
      }
      throw new IllegalArgumentException("Tab not attached to a TabLayout");
    }
    
    void reset()
    {
      mParent = null;
      mView = null;
      mTag = null;
      mIcon = null;
      mText = null;
      mContentDesc = null;
      mPosition = -1;
      mCustomView = null;
    }
    
    public void select()
    {
      ExTabLayout localExTabLayout = mParent;
      if (localExTabLayout != null)
      {
        localExTabLayout.selectTab(this);
        return;
      }
      throw new IllegalArgumentException("Tab not attached to a TabLayout");
    }
    
    public Tab setContentDescription(int paramInt)
    {
      ExTabLayout localExTabLayout = mParent;
      if (localExTabLayout != null) {
        return setContentDescription(localExTabLayout.getResources().getText(paramInt));
      }
      throw new IllegalArgumentException("Tab not attached to a TabLayout");
    }
    
    public Tab setContentDescription(CharSequence paramCharSequence)
    {
      mContentDesc = paramCharSequence;
      updateView();
      return this;
    }
    
    public Tab setCustomView(int paramInt)
    {
      return setCustomView(LayoutInflater.from(mView.getContext()).inflate(paramInt, mView, false));
    }
    
    public Tab setCustomView(View paramView)
    {
      mCustomView = paramView;
      updateView();
      return this;
    }
    
    public Tab setIcon(int paramInt)
    {
      ExTabLayout localExTabLayout = mParent;
      if (localExTabLayout != null) {
        return setIcon(AppCompatResources.getDrawable(localExTabLayout.getContext(), paramInt));
      }
      throw new IllegalArgumentException("Tab not attached to a TabLayout");
    }
    
    public Tab setIcon(Drawable paramDrawable)
    {
      mIcon = paramDrawable;
      updateView();
      return this;
    }
    
    void setPosition(int paramInt)
    {
      mPosition = paramInt;
    }
    
    public Tab setTag(Object paramObject)
    {
      mTag = paramObject;
      return this;
    }
    
    public Tab setText(int paramInt)
    {
      ExTabLayout localExTabLayout = mParent;
      if (localExTabLayout != null) {
        return setText(localExTabLayout.getResources().getText(paramInt));
      }
      throw new IllegalArgumentException("Tab not attached to a TabLayout");
    }
    
    public Tab setText(CharSequence paramCharSequence)
    {
      mText = paramCharSequence;
      updateView();
      return this;
    }
    
    void updateView()
    {
      ExTabLayout.TabView localTabView = mView;
      if (localTabView != null) {
        localTabView.update();
      }
    }
  }
  
  public static class TabLayoutOnPageChangeListener
    implements ViewPager.OnPageChangeListener
  {
    private int mPreviousScrollState;
    private int mScrollState;
    private final WeakReference<ExTabLayout> mTabLayoutRef;
    
    public TabLayoutOnPageChangeListener(ExTabLayout paramExTabLayout)
    {
      mTabLayoutRef = new WeakReference(paramExTabLayout);
    }
    
    public void onPageScrollStateChanged(int paramInt)
    {
      mPreviousScrollState = mScrollState;
      mScrollState = paramInt;
    }
    
    public void onPageScrolled(int paramInt1, float paramFloat, int paramInt2)
    {
      ExTabLayout localExTabLayout = (ExTabLayout)mTabLayoutRef.get();
      if (localExTabLayout != null)
      {
        paramInt2 = mScrollState;
        boolean bool2 = false;
        boolean bool1;
        if ((paramInt2 == 2) && (mPreviousScrollState != 1)) {
          bool1 = false;
        } else {
          bool1 = true;
        }
        if ((mScrollState != 2) || (mPreviousScrollState != 0)) {
          bool2 = true;
        }
        localExTabLayout.setScrollPosition(paramInt1, paramFloat, bool1, bool2);
      }
    }
    
    public void onPageSelected(int paramInt)
    {
      ExTabLayout localExTabLayout = (ExTabLayout)mTabLayoutRef.get();
      if ((localExTabLayout != null) && (localExTabLayout.getSelectedTabPosition() != paramInt) && (paramInt < localExTabLayout.getTabCount()))
      {
        int i = mScrollState;
        boolean bool;
        if ((i != 0) && ((i != 2) || (mPreviousScrollState != 0))) {
          bool = false;
        } else {
          bool = true;
        }
        localExTabLayout.selectTab(localExTabLayout.getTabAt(paramInt), bool);
      }
    }
    
    void reset()
    {
      mScrollState = 0;
      mPreviousScrollState = 0;
    }
  }
  
  class TabView
    extends LinearLayout
  {
    private ImageView mCustomIconView;
    private TextView mCustomTextView;
    private View mCustomView;
    private int mDefaultMaxLines = 2;
    private ImageView mIconView;
    private ExTabLayout.Tab mTab;
    private TextView mTextView;
    
    public TabView(Context paramContext)
    {
      super();
      if (mTabBackgroundResId != 0) {
        ViewCompat.setBackground(this, AppCompatResources.getDrawable(paramContext, mTabBackgroundResId));
      }
      ViewCompat.setPaddingRelative(this, mTabPaddingStart, mTabPaddingTop, mTabPaddingEnd, mTabPaddingBottom);
      setGravity(17);
      setOrientation(1);
      setClickable(true);
      ViewCompat.setPointerIcon(this, PointerIconCompat.getSystemIcon(getContext(), 1002));
    }
    
    private float approximateLineWidth(Layout paramLayout, int paramInt, float paramFloat)
    {
      return paramLayout.getLineWidth(paramInt) * (paramFloat / paramLayout.getPaint().getTextSize());
    }
    
    private void updateTextAndIcon(TextView paramTextView, ImageView paramImageView)
    {
      Object localObject1 = mTab;
      Object localObject2 = null;
      Drawable localDrawable;
      if (localObject1 != null) {
        localDrawable = ((ExTabLayout.Tab)localObject1).getIcon();
      } else {
        localDrawable = null;
      }
      localObject1 = mTab;
      CharSequence localCharSequence;
      if (localObject1 != null) {
        localCharSequence = ((ExTabLayout.Tab)localObject1).getText();
      } else {
        localCharSequence = null;
      }
      localObject1 = mTab;
      if (localObject1 != null) {
        localObject1 = ((ExTabLayout.Tab)localObject1).getContentDescription();
      } else {
        localObject1 = null;
      }
      int j = 0;
      if (paramImageView != null)
      {
        if (localDrawable != null)
        {
          paramImageView.setImageDrawable(localDrawable);
          paramImageView.setVisibility(0);
          setVisibility(0);
        }
        else
        {
          paramImageView.setVisibility(8);
          paramImageView.setImageDrawable(null);
        }
        paramImageView.setContentDescription((CharSequence)localObject1);
      }
      boolean bool = TextUtils.isEmpty(localCharSequence) ^ true;
      if (paramTextView != null)
      {
        if (bool)
        {
          paramTextView.setText(localCharSequence);
          paramTextView.setVisibility(0);
          setVisibility(0);
        }
        else
        {
          paramTextView.setVisibility(8);
          paramTextView.setText(null);
        }
        paramTextView.setContentDescription((CharSequence)localObject1);
      }
      if (paramImageView != null)
      {
        paramTextView = (ViewGroup.MarginLayoutParams)paramImageView.getLayoutParams();
        int i = j;
        if (bool)
        {
          i = j;
          if (paramImageView.getVisibility() == 0) {
            i = dpToPx(8);
          }
        }
        if (i != bottomMargin)
        {
          bottomMargin = i;
          paramImageView.requestLayout();
        }
      }
      if (bool) {
        localObject1 = localObject2;
      }
      TooltipCompat.setTooltipText(this, (CharSequence)localObject1);
    }
    
    public ExTabLayout.Tab getTab()
    {
      return mTab;
    }
    
    public void onInitializeAccessibilityEvent(AccessibilityEvent paramAccessibilityEvent)
    {
      super.onInitializeAccessibilityEvent(paramAccessibilityEvent);
      paramAccessibilityEvent.setClassName(ActionBar.Tab.class.getName());
    }
    
    public void onInitializeAccessibilityNodeInfo(AccessibilityNodeInfo paramAccessibilityNodeInfo)
    {
      super.onInitializeAccessibilityNodeInfo(paramAccessibilityNodeInfo);
      paramAccessibilityNodeInfo.setClassName(ActionBar.Tab.class.getName());
    }
    
    public void onMeasure(int paramInt1, int paramInt2)
    {
      int j = View.MeasureSpec.getSize(paramInt1);
      int k = View.MeasureSpec.getMode(paramInt1);
      int m = getTabMaxWidth();
      int i = paramInt1;
      if (m > 0) {
        if (k != 0)
        {
          i = paramInt1;
          if (j <= m) {}
        }
        else
        {
          i = View.MeasureSpec.makeMeasureSpec(mTabMaxWidth, Integer.MIN_VALUE);
        }
      }
      super.onMeasure(i, paramInt2);
      if (mTextView != null)
      {
        getResources();
        if (mTextView.isSelected()) {
          f2 = mTabSelectedTextSize;
        } else {
          f2 = mTabTextSize;
        }
        j = mDefaultMaxLines;
        Object localObject = mIconView;
        k = 1;
        float f1;
        if ((localObject != null) && (((View)localObject).getVisibility() == 0))
        {
          paramInt1 = 1;
          f1 = f2;
        }
        else
        {
          localObject = mTextView;
          paramInt1 = j;
          f1 = f2;
          if (localObject != null)
          {
            paramInt1 = j;
            f1 = f2;
            if (((TextView)localObject).getLineCount() > 1) {
              if (mTextView.isSelected())
              {
                f1 = mTabSelectedTextSize;
                paramInt1 = j;
              }
              else
              {
                f1 = mTabTextMultiLineSize;
                paramInt1 = j;
              }
            }
          }
        }
        float f2 = mTextView.getTextSize();
        m = mTextView.getLineCount();
        j = TextViewCompat.getMaxLines(mTextView);
        if ((f1 != f2) || ((j >= 0) && (paramInt1 != j)))
        {
          j = k;
          if (mMode == 1)
          {
            j = k;
            if (f1 > f2)
            {
              j = k;
              if (m == 1)
              {
                localObject = mTextView.getLayout();
                if (localObject != null)
                {
                  j = k;
                  if (approximateLineWidth((Layout)localObject, 0, f1) <= getMeasuredWidth() - getPaddingLeft() - getPaddingRight()) {}
                }
                else
                {
                  j = 0;
                }
              }
            }
          }
          if (j != 0)
          {
            mTextView.setTextSize(0, f1);
            mTextView.setMaxLines(paramInt1);
            super.onMeasure(i, paramInt2);
          }
        }
      }
    }
    
    public boolean performClick()
    {
      boolean bool = super.performClick();
      if (mTab != null)
      {
        if (!bool) {
          playSoundEffect(0);
        }
        mTab.select();
        return true;
      }
      return bool;
    }
    
    void reset()
    {
      setTab(null);
      setSelected(false);
    }
    
    public void setSelected(boolean paramBoolean)
    {
      int i;
      if (isSelected() != paramBoolean) {
        i = 1;
      } else {
        i = 0;
      }
      super.setSelected(paramBoolean);
      if ((i != 0) && (paramBoolean) && (Build.VERSION.SDK_INT < 16)) {
        sendAccessibilityEvent(4);
      }
      Object localObject = mTextView;
      if (localObject != null)
      {
        ((TextView)localObject).setSelected(paramBoolean);
        if (i != 0)
        {
          localObject = mTextView;
          float f;
          if (paramBoolean) {
            f = mTabSelectedTextSize;
          } else {
            f = mTabTextSize;
          }
          ((TextView)localObject).setTextSize(0, f);
        }
      }
      localObject = mIconView;
      if (localObject != null) {
        ((ImageView)localObject).setSelected(paramBoolean);
      }
      localObject = mCustomView;
      if (localObject != null) {
        ((View)localObject).setSelected(paramBoolean);
      }
    }
    
    void setTab(ExTabLayout.Tab paramTab)
    {
      if (paramTab != mTab)
      {
        mTab = paramTab;
        update();
      }
    }
    
    final void update()
    {
      ExTabLayout.Tab localTab = mTab;
      if (localTab != null) {
        localObject1 = localTab.getCustomView();
      } else {
        localObject1 = null;
      }
      if (localObject1 != null)
      {
        Object localObject2 = ((View)localObject1).getParent();
        if (localObject2 != this)
        {
          if (localObject2 != null) {
            ((ViewGroup)localObject2).removeView((View)localObject1);
          }
          addView((View)localObject1);
        }
        mCustomView = ((View)localObject1);
        localObject2 = mTextView;
        if (localObject2 != null) {
          ((View)localObject2).setVisibility(8);
        }
        localObject2 = mIconView;
        if (localObject2 != null)
        {
          ((View)localObject2).setVisibility(8);
          mIconView.setImageDrawable(null);
        }
        mCustomTextView = ((TextView)((View)localObject1).findViewById(16908308));
        localObject2 = mCustomTextView;
        if (localObject2 != null) {
          mDefaultMaxLines = TextViewCompat.getMaxLines((TextView)localObject2);
        }
        mCustomIconView = ((ImageView)((View)localObject1).findViewById(16908294));
      }
      else
      {
        localObject1 = mCustomView;
        if (localObject1 != null)
        {
          removeView((View)localObject1);
          mCustomView = null;
        }
        mCustomTextView = null;
        mCustomIconView = null;
      }
      Object localObject1 = mCustomView;
      boolean bool2 = false;
      if (localObject1 == null)
      {
        if (mIconView == null)
        {
          localObject1 = (ImageView)LayoutInflater.from(getContext()).inflate(R.layout.extab_icon, this, false);
          addView((View)localObject1, 0);
          mIconView = ((ImageView)localObject1);
        }
        if (mTextView == null)
        {
          localObject1 = (TextView)LayoutInflater.from(getContext()).inflate(R.layout.extab_text, this, false);
          addView((View)localObject1);
          mTextView = ((TextView)localObject1);
          mDefaultMaxLines = TextViewCompat.getMaxLines(mTextView);
        }
        TextViewCompat.setTextAppearance(mTextView, mTabTextAppearance);
        if (mTabTextColors != null) {
          mTextView.setTextColor(mTabTextColors);
        }
        if (mTabSelectedTextSize != mTabTextSize)
        {
          localObject1 = mTextView;
          float f;
          if (((View)localObject1).isSelected()) {
            f = mTabSelectedTextSize;
          } else {
            f = mTabTextSize;
          }
          ((TextView)localObject1).setTextSize(f);
        }
        updateTextAndIcon(mTextView, mIconView);
      }
      else if ((mCustomTextView != null) || (mCustomIconView != null))
      {
        updateTextAndIcon(mCustomTextView, mCustomIconView);
      }
      boolean bool1 = bool2;
      if (localTab != null)
      {
        bool1 = bool2;
        if (localTab.isSelected()) {
          bool1 = true;
        }
      }
      setSelected(bool1);
    }
  }
  
  public static class ViewPagerOnTabSelectedListener
    implements ExTabLayout.OnTabSelectedListener
  {
    private final ViewPager mViewPager;
    
    public ViewPagerOnTabSelectedListener(ViewPager paramViewPager)
    {
      mViewPager = paramViewPager;
    }
    
    public void onTabReselected(ExTabLayout.Tab paramTab) {}
    
    public void onTabSelected(ExTabLayout.Tab paramTab)
    {
      mViewPager.setCurrentItem(paramTab.getPosition());
    }
    
    public void onTabUnselected(ExTabLayout.Tab paramTab) {}
  }
}
