package com.jd.framework.network.request;

import java.util.concurrent.PriorityBlockingQueue;
import java.util.concurrent.atomic.AtomicInteger;

public class JDFileRequestQueue
{
  private final PriorityBlockingQueue<JDFileRequest> mRequestQueue = new PriorityBlockingQueue();
  private AtomicInteger mSequenceGenerator = new AtomicInteger();
  
  public JDFileRequestQueue() {}
  
  public JDFileRequest add(JDFileRequest paramJDFileRequest)
  {
    if (paramJDFileRequest.getSequence() == -1) {
      paramJDFileRequest.setSequence(getSequenceNumber());
    }
    mRequestQueue.add(paramJDFileRequest);
    return paramJDFileRequest;
  }
  
  public int getSequenceNumber()
  {
    return mSequenceGenerator.incrementAndGet();
  }
  
  public JDFileRequest take()
    throws InterruptedException
  {
    return (JDFileRequest)mRequestQueue.take();
  }
}
