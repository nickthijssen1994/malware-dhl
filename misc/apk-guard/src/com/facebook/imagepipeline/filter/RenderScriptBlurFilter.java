package com.facebook.imagepipeline.filter;

import android.content.Context;
import android.graphics.Bitmap;
import android.os.Build.VERSION;
import android.renderscript.Allocation;
import android.renderscript.Element;
import android.renderscript.RenderScript;
import android.renderscript.ScriptIntrinsicBlur;
import com.facebook.common.internal.Preconditions;

public abstract class RenderScriptBlurFilter
{
  public static final int BLUR_MAX_RADIUS = 25;
  
  public RenderScriptBlurFilter() {}
  
  public static void blurBitmap(Bitmap paramBitmap1, Bitmap paramBitmap2, Context paramContext, int paramInt)
  {
    Preconditions.checkNotNull(paramBitmap1);
    Preconditions.checkNotNull(paramBitmap2);
    Preconditions.checkNotNull(paramContext);
    boolean bool;
    if ((paramInt > 0) && (paramInt <= 25)) {
      bool = true;
    } else {
      bool = false;
    }
    Preconditions.checkArgument(bool);
    Context localContext = null;
    try
    {
      RenderScript localRenderScript = RenderScript.create(paramContext);
      paramContext = localRenderScript;
      localContext = paramContext;
      ScriptIntrinsicBlur localScriptIntrinsicBlur = ScriptIntrinsicBlur.create(localRenderScript, Element.U8_4(localRenderScript));
      localContext = paramContext;
      paramBitmap2 = Allocation.createFromBitmap(localRenderScript, paramBitmap2);
      localContext = paramContext;
      Allocation localAllocation = Allocation.createFromBitmap(localRenderScript, paramBitmap1);
      localContext = paramContext;
      localScriptIntrinsicBlur.setRadius(paramInt);
      localContext = paramContext;
      localScriptIntrinsicBlur.setInput(paramBitmap2);
      localContext = paramContext;
      localScriptIntrinsicBlur.forEach(localAllocation);
      localContext = paramContext;
      localAllocation.copyTo(paramBitmap1);
      if (localRenderScript != null)
      {
        localRenderScript.destroy();
        return;
      }
    }
    catch (Throwable paramBitmap1)
    {
      if (localContext != null) {
        localContext.destroy();
      }
      throw paramBitmap1;
    }
  }
  
  public static boolean canUseRenderScript()
  {
    return Build.VERSION.SDK_INT >= 17;
  }
}
