package com.facebook.imagepipeline.producers;

import android.util.SparseArray;
import com.facebook.imagepipeline.common.Priority;
import com.facebook.imagepipeline.core.ImagePipelineConfig;
import com.facebook.imagepipeline.image.EncodedImageOrigin;
import com.facebook.imagepipeline.request.ImageRequest;
import com.facebook.imagepipeline.request.ImageRequest.RequestLevel;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javax.annotation.Nullable;
import javax.annotation.concurrent.GuardedBy;

public class BaseProducerContext
  implements ProducerContext
{
  @GuardedBy("this")
  private final List<ProducerContextCallbacks> mCallbacks;
  private final Object mCallerContext;
  private EncodedImageOrigin mEncodedImageOrigin = EncodedImageOrigin.NOT_SET;
  private final SparseArray<String> mExtras = new SparseArray();
  private final ImagePipelineConfig mImagePipelineConfig;
  private final ImageRequest mImageRequest;
  @GuardedBy("this")
  private boolean mIsCancelled;
  @GuardedBy("this")
  private boolean mIsIntermediateResultExpected;
  @GuardedBy("this")
  private boolean mIsPrefetch;
  private final ImageRequest.RequestLevel mLowestPermittedRequestLevel;
  @GuardedBy("this")
  private Priority mPriority;
  private final ProducerListener2 mProducerListener;
  @Nullable
  private final String mUiComponentId;
  private final String mUserId;
  
  public BaseProducerContext(ImageRequest paramImageRequest, String paramString, ProducerListener2 paramProducerListener2, Object paramObject, ImageRequest.RequestLevel paramRequestLevel, boolean paramBoolean1, boolean paramBoolean2, Priority paramPriority, ImagePipelineConfig paramImagePipelineConfig)
  {
    this(paramImageRequest, paramString, null, paramProducerListener2, paramObject, paramRequestLevel, paramBoolean1, paramBoolean2, paramPriority, paramImagePipelineConfig);
  }
  
  public BaseProducerContext(ImageRequest paramImageRequest, String paramString1, String paramString2, ProducerListener2 paramProducerListener2, Object paramObject, ImageRequest.RequestLevel paramRequestLevel, boolean paramBoolean1, boolean paramBoolean2, Priority paramPriority, ImagePipelineConfig paramImagePipelineConfig)
  {
    mImageRequest = paramImageRequest;
    mUserId = paramString1;
    mUiComponentId = paramString2;
    mProducerListener = paramProducerListener2;
    mCallerContext = paramObject;
    mLowestPermittedRequestLevel = paramRequestLevel;
    mIsPrefetch = paramBoolean1;
    mPriority = paramPriority;
    mIsIntermediateResultExpected = paramBoolean2;
    mIsCancelled = false;
    mCallbacks = new ArrayList();
    mImagePipelineConfig = paramImagePipelineConfig;
  }
  
  public static void callOnCancellationRequested(List paramList)
  {
    if (paramList == null) {
      return;
    }
    paramList = paramList.iterator();
    while (paramList.hasNext()) {
      ((ProducerContextCallbacks)paramList.next()).onCancellationRequested();
    }
  }
  
  public static void callOnIsIntermediateResultExpectedChanged(List paramList)
  {
    if (paramList == null) {
      return;
    }
    paramList = paramList.iterator();
    while (paramList.hasNext()) {
      ((ProducerContextCallbacks)paramList.next()).onIsIntermediateResultExpectedChanged();
    }
  }
  
  public static void callOnIsPrefetchChanged(List paramList)
  {
    if (paramList == null) {
      return;
    }
    paramList = paramList.iterator();
    while (paramList.hasNext()) {
      ((ProducerContextCallbacks)paramList.next()).onIsPrefetchChanged();
    }
  }
  
  public static void callOnPriorityChanged(List paramList)
  {
    if (paramList == null) {
      return;
    }
    paramList = paramList.iterator();
    while (paramList.hasNext()) {
      ((ProducerContextCallbacks)paramList.next()).onPriorityChanged();
    }
  }
  
  public void addCallbacks(ProducerContextCallbacks paramProducerContextCallbacks)
  {
    try
    {
      mCallbacks.add(paramProducerContextCallbacks);
      boolean bool = mIsCancelled;
      if (bool)
      {
        paramProducerContextCallbacks.onCancellationRequested();
        return;
      }
    }
    catch (Throwable paramProducerContextCallbacks)
    {
      throw paramProducerContextCallbacks;
    }
  }
  
  public void cancel()
  {
    callOnCancellationRequested(cancelNoCallbacks());
  }
  
  public List cancelNoCallbacks()
  {
    try
    {
      boolean bool = mIsCancelled;
      if (bool) {
        return null;
      }
      mIsCancelled = true;
      ArrayList localArrayList = new ArrayList(mCallbacks);
      return localArrayList;
    }
    catch (Throwable localThrowable)
    {
      throw localThrowable;
    }
  }
  
  public Object getCallerContext()
  {
    return mCallerContext;
  }
  
  public EncodedImageOrigin getEncodedImageOrigin()
  {
    return mEncodedImageOrigin;
  }
  
  public String getExtra(int paramInt)
  {
    return (String)mExtras.get(paramInt, "");
  }
  
  public String getId()
  {
    return mUserId;
  }
  
  public ImagePipelineConfig getImagePipelineConfig()
  {
    return mImagePipelineConfig;
  }
  
  public ImageRequest getImageRequest()
  {
    return mImageRequest;
  }
  
  public ImageRequest.RequestLevel getLowestPermittedRequestLevel()
  {
    return mLowestPermittedRequestLevel;
  }
  
  public Priority getPriority()
  {
    try
    {
      Priority localPriority = mPriority;
      return localPriority;
    }
    catch (Throwable localThrowable)
    {
      throw localThrowable;
    }
  }
  
  public ProducerListener2 getProducerListener()
  {
    return mProducerListener;
  }
  
  public String getUiComponentId()
  {
    return mUiComponentId;
  }
  
  public boolean isCancelled()
  {
    try
    {
      boolean bool = mIsCancelled;
      return bool;
    }
    catch (Throwable localThrowable)
    {
      throw localThrowable;
    }
  }
  
  public boolean isIntermediateResultExpected()
  {
    try
    {
      boolean bool = mIsIntermediateResultExpected;
      return bool;
    }
    catch (Throwable localThrowable)
    {
      throw localThrowable;
    }
  }
  
  public boolean isPrefetch()
  {
    try
    {
      boolean bool = mIsPrefetch;
      return bool;
    }
    catch (Throwable localThrowable)
    {
      throw localThrowable;
    }
  }
  
  public void setEncodedImageOrigin(EncodedImageOrigin paramEncodedImageOrigin)
  {
    mEncodedImageOrigin = paramEncodedImageOrigin;
  }
  
  public void setExtra(int paramInt, String paramString)
  {
    mExtras.put(paramInt, paramString);
  }
  
  public List setIsIntermediateResultExpectedNoCallbacks(boolean paramBoolean)
  {
    try
    {
      boolean bool = mIsIntermediateResultExpected;
      if (paramBoolean == bool) {
        return null;
      }
      mIsIntermediateResultExpected = paramBoolean;
      ArrayList localArrayList = new ArrayList(mCallbacks);
      return localArrayList;
    }
    catch (Throwable localThrowable)
    {
      throw localThrowable;
    }
  }
  
  public List setIsPrefetchNoCallbacks(boolean paramBoolean)
  {
    try
    {
      boolean bool = mIsPrefetch;
      if (paramBoolean == bool) {
        return null;
      }
      mIsPrefetch = paramBoolean;
      ArrayList localArrayList = new ArrayList(mCallbacks);
      return localArrayList;
    }
    catch (Throwable localThrowable)
    {
      throw localThrowable;
    }
  }
  
  public List setPriorityNoCallbacks(Priority paramPriority)
  {
    try
    {
      Priority localPriority = mPriority;
      if (paramPriority == localPriority) {
        return null;
      }
      mPriority = paramPriority;
      paramPriority = new ArrayList(mCallbacks);
      return paramPriority;
    }
    catch (Throwable paramPriority)
    {
      throw paramPriority;
    }
  }
}
