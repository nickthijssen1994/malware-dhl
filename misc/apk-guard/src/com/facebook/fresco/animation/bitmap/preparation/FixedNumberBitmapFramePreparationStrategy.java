package com.facebook.fresco.animation.bitmap.preparation;

import com.facebook.common.logging.FLog;
import com.facebook.fresco.animation.backend.AnimationBackend;
import com.facebook.fresco.animation.backend.AnimationInformation;
import com.facebook.fresco.animation.bitmap.BitmapFrameCache;

public class FixedNumberBitmapFramePreparationStrategy
  implements BitmapFramePreparationStrategy
{
  private static final int DEFAULT_FRAMES_TO_PREPARE = 3;
  private static final Class<?> SHORT = FixedNumberBitmapFramePreparationStrategy.class;
  private final int mFramesToPrepare;
  
  public FixedNumberBitmapFramePreparationStrategy()
  {
    this(3);
  }
  
  public FixedNumberBitmapFramePreparationStrategy(int paramInt)
  {
    mFramesToPrepare = paramInt;
  }
  
  public void prepareFrames(BitmapFramePreparer paramBitmapFramePreparer, BitmapFrameCache paramBitmapFrameCache, AnimationBackend paramAnimationBackend, int paramInt)
  {
    int i = 1;
    while (i <= mFramesToPrepare)
    {
      int j = (paramInt + i) % paramAnimationBackend.getFrameCount();
      if (FLog.isLoggable(2)) {
        FLog.v(SHORT, "Preparing frame %d, last drawn: %d", Integer.valueOf(j), Integer.valueOf(paramInt));
      }
      if (!paramBitmapFramePreparer.prepareFrame(paramBitmapFrameCache, paramAnimationBackend, j)) {
        return;
      }
      i += 1;
    }
  }
}
