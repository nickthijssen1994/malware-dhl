package com.facebook.react.views.nativecode;

import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.RectF;
import android.graphics.Region.Op;
import com.facebook.react.bridge.JSApplicationIllegalArgumentException;
import com.facebook.react.bridge.ReadableArray;
import com.facebook.react.uimanager.ReactShadowNodeImpl;
import javax.annotation.Nullable;

public class ARTGroupShadowNode
  extends ARTVirtualNode
{
  @Nullable
  protected RectF mClipping;
  
  public ARTGroupShadowNode() {}
  
  private static RectF createClipping(float[] paramArrayOfFloat)
  {
    if (paramArrayOfFloat.length == 4) {
      return new RectF(paramArrayOfFloat[0], paramArrayOfFloat[1], paramArrayOfFloat[0] + paramArrayOfFloat[2], paramArrayOfFloat[1] + paramArrayOfFloat[3]);
    }
    throw new JSApplicationIllegalArgumentException("Clipping should be array of length 4 (e.g. [x, y, width, height])");
  }
  
  public void draw(Canvas paramCanvas, Paint paramPaint, float paramFloat)
  {
    paramFloat *= mOpacity;
    if (paramFloat > 0.01F)
    {
      saveAndSetupCanvas(paramCanvas);
      Object localObject = mClipping;
      if (localObject != null) {
        paramCanvas.clipRect(left * mScale, mClipping.top * mScale, mClipping.right * mScale, mClipping.bottom * mScale, Region.Op.REPLACE);
      }
      int i = 0;
      while (i < getChildCount())
      {
        localObject = (ARTVirtualNode)getChildAt(i);
        ((ARTVirtualNode)localObject).draw(paramCanvas, paramPaint, paramFloat);
        ((ReactShadowNodeImpl)localObject).markUpdateSeen();
        i += 1;
      }
      restoreCanvas(paramCanvas);
    }
  }
  
  public boolean isVirtual()
  {
    return true;
  }
  
  public void setClipping(ReadableArray paramReadableArray)
  {
    paramReadableArray = PropHelper.toFloatArray(paramReadableArray);
    if (paramReadableArray != null)
    {
      mClipping = createClipping(paramReadableArray);
      markUpdated();
    }
  }
}
