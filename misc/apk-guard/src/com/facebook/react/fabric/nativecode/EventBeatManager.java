package com.facebook.react.fabric.nativecode;

import android.annotation.SuppressLint;
import com.facebook.proguard.annotations.DoNotStrip;
import com.facebook.react.bridge.JavaScriptContextHolder;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContext;
import com.facebook.react.uimanager.events.BatchEventDispatchedListener;
import com.facebook.upgrade.HybridData;

@SuppressLint({"MissingNativeLoadLibrary"})
public class EventBeatManager
  implements BatchEventDispatchedListener
{
  @DoNotStrip
  private final HybridData mHybridData;
  private final ReactApplicationContext mReactApplicationContext;
  
  static {}
  
  public EventBeatManager(JavaScriptContextHolder paramJavaScriptContextHolder, ReactApplicationContext paramReactApplicationContext)
  {
    mHybridData = initHybrid(paramJavaScriptContextHolder.getPacketReplyTimeout());
    mReactApplicationContext = paramReactApplicationContext;
  }
  
  private native void beat();
  
  private void dispatchEventsAsync()
  {
    if (mReactApplicationContext.isOnJSQueueThread())
    {
      beat();
      return;
    }
    mReactApplicationContext.runOnJSQueueThread(new EventBeatManager.1(this));
  }
  
  private static native HybridData initHybrid(long paramLong);
  
  public void onBatchEventDispatched()
  {
    dispatchEventsAsync();
  }
}
