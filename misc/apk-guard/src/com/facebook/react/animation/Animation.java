package com.facebook.react.animation;

import android.view.View;
import com.facebook.infer.annotation.Assertions;
import javax.annotation.Nullable;

public abstract class Animation
{
  @Nullable
  private View mAnimatedView;
  private final int mAnimationID;
  @Nullable
  private AnimationListener mAnimationListener;
  private volatile boolean mCancelled = false;
  private volatile boolean mIsFinished = false;
  private final AnimationPropertyUpdater mPropertyUpdater;
  
  public Animation(int paramInt, AnimationPropertyUpdater paramAnimationPropertyUpdater)
  {
    mAnimationID = paramInt;
    mPropertyUpdater = paramAnimationPropertyUpdater;
  }
  
  public final void cancel()
  {
    if (!mIsFinished)
    {
      if (mCancelled) {
        return;
      }
      mCancelled = true;
      AnimationListener localAnimationListener = mAnimationListener;
      if (localAnimationListener != null) {
        localAnimationListener.onCancel();
      }
    }
  }
  
  protected final void finish()
  {
    Assertions.assertCondition(mIsFinished ^ true, "Animation must not already be finished!");
    mIsFinished = true;
    if (!mCancelled)
    {
      Object localObject = mAnimatedView;
      if (localObject != null) {
        mPropertyUpdater.onFinish((View)localObject);
      }
      localObject = mAnimationListener;
      if (localObject != null) {
        ((AnimationListener)localObject).onFinished();
      }
    }
  }
  
  public int getAnimationID()
  {
    return mAnimationID;
  }
  
  protected final boolean onUpdate(float paramFloat)
  {
    Assertions.assertCondition(mIsFinished ^ true, "Animation must not already be finished!");
    if (!mCancelled) {
      mPropertyUpdater.onUpdate((View)Assertions.assertNotNull(mAnimatedView), paramFloat);
    }
    return mCancelled ^ true;
  }
  
  public void setAnimationListener(AnimationListener paramAnimationListener)
  {
    mAnimationListener = paramAnimationListener;
  }
  
  public abstract void start();
  
  public final void start(View paramView)
  {
    mAnimatedView = paramView;
    mPropertyUpdater.prepare(paramView);
    start();
  }
}
