package com.huawei.hms.aaid.init;

import android.content.Context;
import android.content.pm.PackageItemInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.BaseBundle;
import com.huawei.hms.aaid.utils.PushPreferences;
import com.huawei.hms.opendevice.ClassWriter;
import com.huawei.hms.opendevice.Download;
import com.huawei.hms.support.model.HMSLog;

public class AutoInitHelper
{
  public AutoInitHelper() {}
  
  public static void doAutoInit(Context paramContext)
  {
    try
    {
      boolean bool = isAutoInitEnabled(paramContext);
      if (bool)
      {
        HMSLog.append("AutoInit", "Push init start");
        new Thread(new Download(paramContext)).start();
        return;
      }
    }
    catch (Exception paramContext)
    {
      HMSLog.l("AutoInit", "Push init failed", paramContext);
    }
  }
  
  public static boolean isAutoInitEnabled(Context paramContext)
  {
    ClassWriter localClassWriter = ClassWriter.a(paramContext);
    if (localClassWriter.containsKey("push_kit_auto_init_enabled")) {
      return localClassWriter.getBoolean("push_kit_auto_init_enabled");
    }
    try
    {
      paramContext = paramContext.getPackageManager().getApplicationInfo(paramContext.getPackageName(), 128);
      paramContext = metaData;
    }
    catch (PackageManager.NameNotFoundException paramContext)
    {
      boolean bool;
      label50:
      for (;;) {}
    }
    try
    {
      bool = paramContext.getBoolean("push_kit_auto_init_enabled");
      return bool;
    }
    catch (PackageManager.NameNotFoundException paramContext)
    {
      break label50;
    }
    return false;
  }
  
  public static void setAutoInitEnabled(Context paramContext, boolean paramBoolean)
  {
    ClassWriter localClassWriter = ClassWriter.a(paramContext);
    boolean bool = localClassWriter.getBoolean("push_kit_auto_init_enabled");
    localClassWriter.saveBoolean("push_kit_auto_init_enabled", paramBoolean);
    if ((paramBoolean) && (!bool)) {
      doAutoInit(paramContext);
    }
  }
}
