package com.huawei.hms.aaid.utils;

import android.content.ContentValues;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Build.VERSION;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

public class PushPreferences
{
  public SharedPreferences prefs;
  
  public PushPreferences(Context paramContext, String paramString)
  {
    if (paramContext != null)
    {
      Context localContext = paramContext;
      if (Build.VERSION.SDK_INT >= 24)
      {
        localContext = paramContext.createDeviceProtectedStorageContext();
        SharedPreferences localSharedPreferences = localContext.getSharedPreferences("move_to_de_records", 0);
        if (!localSharedPreferences.getBoolean(paramString, false)) {
          if (!localContext.moveSharedPreferencesFrom(paramContext, paramString))
          {
            localContext = paramContext;
          }
          else
          {
            paramContext = localSharedPreferences.edit();
            paramContext.putBoolean(paramString, true);
            paramContext.apply();
          }
        }
      }
      prefs = localContext.getSharedPreferences(paramString, 0);
      return;
    }
    throw new NullPointerException("context is null!");
  }
  
  public boolean clear()
  {
    SharedPreferences localSharedPreferences = prefs;
    if (localSharedPreferences != null) {
      return localSharedPreferences.edit().clear().commit();
    }
    return false;
  }
  
  public boolean containsKey(String paramString)
  {
    SharedPreferences localSharedPreferences = prefs;
    return (localSharedPreferences != null) && (localSharedPreferences.contains(paramString));
  }
  
  public Map getAll()
  {
    SharedPreferences localSharedPreferences = prefs;
    if (localSharedPreferences != null) {
      return localSharedPreferences.getAll();
    }
    return new HashMap();
  }
  
  public boolean getBoolean(String paramString)
  {
    SharedPreferences localSharedPreferences = prefs;
    return (localSharedPreferences != null) && (localSharedPreferences.getBoolean(paramString, false));
  }
  
  public int getInt(String paramString)
  {
    SharedPreferences localSharedPreferences = prefs;
    if (localSharedPreferences != null) {
      return localSharedPreferences.getInt(paramString, 0);
    }
    return 0;
  }
  
  public long getLong(String paramString)
  {
    SharedPreferences localSharedPreferences = prefs;
    if (localSharedPreferences != null) {
      return localSharedPreferences.getLong(paramString, 0L);
    }
    return 0L;
  }
  
  public String getString(String paramString)
  {
    SharedPreferences localSharedPreferences = prefs;
    if (localSharedPreferences != null) {
      return localSharedPreferences.getString(paramString, "");
    }
    return "";
  }
  
  public ContentValues read()
  {
    Object localObject1 = prefs;
    if (localObject1 == null) {
      return null;
    }
    Object localObject2 = ((SharedPreferences)localObject1).getAll();
    if (localObject2 == null) {
      return null;
    }
    localObject1 = new ContentValues();
    localObject2 = ((Map)localObject2).entrySet().iterator();
    while (((Iterator)localObject2).hasNext())
    {
      Object localObject3 = (Map.Entry)((Iterator)localObject2).next();
      String str = (String)((Map.Entry)localObject3).getKey();
      localObject3 = ((Map.Entry)localObject3).getValue();
      if ((localObject3 instanceof String)) {
        ((ContentValues)localObject1).put(str, String.valueOf(localObject3));
      } else if ((!(localObject3 instanceof Integer)) && (!(localObject3 instanceof Short)) && (!(localObject3 instanceof Byte)))
      {
        if ((localObject3 instanceof Long)) {
          ((ContentValues)localObject1).put(str, (Long)localObject3);
        } else if ((localObject3 instanceof Float)) {
          ((ContentValues)localObject1).put(str, (Float)localObject3);
        } else if ((localObject3 instanceof Double)) {
          ((ContentValues)localObject1).put(str, Float.valueOf((float)((Double)localObject3).doubleValue()));
        } else if ((localObject3 instanceof Boolean)) {
          ((ContentValues)localObject1).put(str, (Boolean)localObject3);
        }
      }
      else {
        ((ContentValues)localObject1).put(str, (Integer)localObject3);
      }
    }
    return localObject1;
  }
  
  public boolean removeKey(String paramString)
  {
    Object localObject = prefs;
    if ((localObject != null) && (((SharedPreferences)localObject).contains(paramString)))
    {
      localObject = prefs.edit();
      if (localObject != null) {
        return ((SharedPreferences.Editor)localObject).remove(paramString).commit();
      }
    }
    return false;
  }
  
  public boolean removeKey(String[] paramArrayOfString)
  {
    Object localObject = prefs;
    int i = 0;
    if (localObject == null) {
      return false;
    }
    int j = paramArrayOfString.length;
    while (i < j)
    {
      localObject = paramArrayOfString[i];
      if (prefs.contains((String)localObject)) {
        prefs.edit().remove((String)localObject);
      }
      i += 1;
    }
    prefs.edit().commit();
    return true;
  }
  
  public boolean save(String paramString, Object paramObject)
  {
    SharedPreferences.Editor localEditor = prefs.edit();
    if ((paramObject instanceof String)) {
      localEditor.putString(paramString, String.valueOf(paramObject));
    } else if ((paramObject instanceof Integer)) {
      localEditor.putInt(paramString, ((Integer)paramObject).intValue());
    } else if ((paramObject instanceof Short)) {
      localEditor.putInt(paramString, ((Short)paramObject).shortValue());
    } else if ((paramObject instanceof Byte)) {
      localEditor.putInt(paramString, ((Byte)paramObject).byteValue());
    } else if ((paramObject instanceof Long)) {
      localEditor.putLong(paramString, ((Long)paramObject).longValue());
    } else if ((paramObject instanceof Float)) {
      localEditor.putFloat(paramString, ((Float)paramObject).floatValue());
    } else if ((paramObject instanceof Double)) {
      localEditor.putFloat(paramString, (float)((Double)paramObject).doubleValue());
    } else if ((paramObject instanceof Boolean)) {
      localEditor.putBoolean(paramString, ((Boolean)paramObject).booleanValue());
    }
    return localEditor.commit();
  }
  
  public void saveBoolean(String paramString, boolean paramBoolean)
  {
    Object localObject = prefs;
    if (localObject == null) {
      return;
    }
    localObject = ((SharedPreferences)localObject).edit();
    if (localObject != null) {
      ((SharedPreferences.Editor)localObject).putBoolean(paramString, paramBoolean).commit();
    }
  }
  
  public void saveInt(String paramString, Integer paramInteger)
  {
    Object localObject = prefs;
    if (localObject == null) {
      return;
    }
    localObject = ((SharedPreferences)localObject).edit();
    if (localObject != null) {
      ((SharedPreferences.Editor)localObject).putInt(paramString, paramInteger.intValue()).commit();
    }
  }
  
  public void saveLong(String paramString, Long paramLong)
  {
    Object localObject = prefs;
    if (localObject == null) {
      return;
    }
    localObject = ((SharedPreferences)localObject).edit();
    if (localObject != null) {
      ((SharedPreferences.Editor)localObject).putLong(paramString, paramLong.longValue()).commit();
    }
  }
  
  public void saveMap(Map paramMap)
  {
    paramMap = paramMap.entrySet().iterator();
    while (paramMap.hasNext())
    {
      Map.Entry localEntry = (Map.Entry)paramMap.next();
      save((String)localEntry.getKey(), localEntry.getValue());
    }
  }
  
  public boolean saveString(String paramString1, String paramString2)
  {
    Object localObject = prefs;
    if (localObject == null) {
      return false;
    }
    localObject = ((SharedPreferences)localObject).edit();
    if (localObject != null) {
      return ((SharedPreferences.Editor)localObject).putString(paramString1, paramString2).commit();
    }
    return false;
  }
  
  public boolean write(ContentValues paramContentValues)
  {
    if (prefs != null)
    {
      if (paramContentValues == null) {
        return false;
      }
      boolean bool = true;
      paramContentValues = paramContentValues.valueSet().iterator();
      while (paramContentValues.hasNext())
      {
        Map.Entry localEntry = (Map.Entry)paramContentValues.next();
        if (!save((String)localEntry.getKey(), localEntry.getValue())) {
          bool = false;
        }
      }
      return bool;
    }
    return false;
  }
}
