package com.huawei.hms.support.mozilla.push;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import com.huawei.hms.android.HwBuildEx.VERSION;
import com.huawei.hms.support.model.HMSLog;
import com.huawei.hms.support.mozilla.push.pushselfshow.SelfShow;
import com.huawei.hms.support.mozilla.push.utils.common.NotificationUtil;
import com.huawei.hms.utils.ResourceLoaderUtil;

public class PushMsgReceiver
  extends BroadcastReceiver
{
  public static final String PAGE_KEY = "PushMsgReceiver";
  
  public PushMsgReceiver() {}
  
  public static void invokeSelfShow(Context paramContext, Intent paramIntent)
  {
    if (paramIntent.hasExtra("selfshow_info"))
    {
      if (!NotificationUtil.areNotificationsEnabled(paramContext))
      {
        StringBuilder localStringBuilder = new StringBuilder();
        localStringBuilder.append(paramContext.getPackageName());
        localStringBuilder.append(" disable display notification.");
        HMSLog.append("PushMsgReceiver", localStringBuilder.toString());
      }
      SelfShow.onReceive(paramContext, paramIntent);
    }
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    if (paramIntent != null)
    {
      if (paramContext == null) {
        return;
      }
      Object localObject = new StringBuilder();
      ((StringBuilder)localObject).append("push receive broadcast message, Intent:");
      ((StringBuilder)localObject).append(paramIntent.getAction());
      ((StringBuilder)localObject).append(" pkgName:");
      ((StringBuilder)localObject).append(paramContext.getPackageName());
      HMSLog.append("PushMsgReceiver", ((StringBuilder)localObject).toString());
      try
      {
        paramIntent.getStringExtra("TestIntent");
        localObject = paramIntent.getAction();
        if (ResourceLoaderUtil.getmContext() == null) {
          ResourceLoaderUtil.setmContext(paramContext.getApplicationContext());
        }
        if ((!"com.huawei.intent.action.PUSH_DELAY_NOTIFY".equals(localObject)) && ((!"com.huawei.intent.action.PUSH".equals(localObject)) || (HwBuildEx.VERSION.EMUI_SDK_INT >= 10)))
        {
          paramContext = new StringBuilder();
          paramContext.append("message can't be recognised:");
          paramContext.append(paramIntent.toUri(0));
          HMSLog.append("PushMsgReceiver", paramContext.toString());
          return;
        }
        invokeSelfShow(paramContext, paramIntent);
        return;
      }
      catch (Exception paramContext)
      {
        for (;;) {}
      }
      HMSLog.toString("PushMsgReceiver", "intent has some error");
      return;
    }
  }
}
