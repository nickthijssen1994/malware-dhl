package com.huawei.hms.push.labs;

import android.content.Context;
import com.huawei.hms.aaid.HmsInstanceId;
import com.huawei.hms.aaid.constant.ErrorEnum;
import com.huawei.hms.common.ApiException;
import com.huawei.hms.common.internal.Preconditions;
import com.huawei.hms.push.HmsMessaging;
import com.huawei.hms.push.labs.entity.ICallbackResult;
import com.huawei.hms.push.labs.entity.TokenResult;
import com.huawei.hms.push.labs.entity.UPSRegisterCallBack;
import com.huawei.hms.push.labs.entity.UPSTurnCallBack;
import com.huawei.hms.push.labs.entity.UPSUnRegisterCallBack;
import com.huawei.hms.support.model.HMSLog;
import com.huawei.hms.support.mozilla.push.utils.CommFun;
import com.huawei.provider.tasks.Task;

public final class UPSService
{
  public UPSService() {}
  
  public static void registerToken(Context paramContext, String paramString1, String paramString2, String paramString3, UPSRegisterCallBack paramUPSRegisterCallBack)
  {
    HMSLog.append("UPSService", "invoke registerToken");
    Preconditions.checkNotNull(paramUPSRegisterCallBack);
    if (!CommFun.isEmui10Plus())
    {
      paramUPSRegisterCallBack.onResult(new TokenResult(ErrorEnum.ERROR_OPERATION_NOT_SUPPORTED.getExternalCode()));
      return;
    }
    try
    {
      paramContext = HmsInstanceId.getInstance(paramContext).getToken(paramString1, null);
      paramUPSRegisterCallBack.onResult(new TokenResult(paramContext));
      return;
    }
    catch (ApiException paramContext)
    {
      paramUPSRegisterCallBack.onResult(new TokenResult(paramContext.getStatusCode(), paramContext.getMessage()));
    }
  }
  
  public static void turnOffPush(Context paramContext, UPSTurnCallBack paramUPSTurnCallBack)
  {
    HMSLog.append("UPSService", "invoke turnOffPush");
    Preconditions.checkNotNull(paramUPSTurnCallBack);
    if (!CommFun.isEmui10Plus())
    {
      paramUPSTurnCallBack.onResult(new TokenResult(ErrorEnum.ERROR_OPERATION_NOT_SUPPORTED.getExternalCode()));
      return;
    }
    HmsMessaging.getInstance(paramContext).turnOffPush().addOnCompleteListener(new UPSService.2(paramUPSTurnCallBack));
  }
  
  public static void turnOnPush(Context paramContext, UPSTurnCallBack paramUPSTurnCallBack)
  {
    HMSLog.append("UPSService", "invoke turnOnPush");
    Preconditions.checkNotNull(paramUPSTurnCallBack);
    if (!CommFun.isEmui10Plus())
    {
      paramUPSTurnCallBack.onResult(new TokenResult(ErrorEnum.ERROR_OPERATION_NOT_SUPPORTED.getExternalCode()));
      return;
    }
    HmsMessaging.getInstance(paramContext).turnOnPush().addOnCompleteListener(new UPSService.1(paramUPSTurnCallBack));
  }
  
  public static void unRegisterToken(Context paramContext, UPSUnRegisterCallBack paramUPSUnRegisterCallBack)
  {
    HMSLog.append("UPSService", "invoke unRegisterToken");
    Preconditions.checkNotNull(paramUPSUnRegisterCallBack);
    if (!CommFun.isEmui10Plus())
    {
      paramUPSUnRegisterCallBack.onResult(new TokenResult(ErrorEnum.ERROR_OPERATION_NOT_SUPPORTED.getExternalCode()));
      return;
    }
    try
    {
      HmsInstanceId.getInstance(paramContext).deleteToken(null, null);
      paramUPSUnRegisterCallBack.onResult(new TokenResult());
      return;
    }
    catch (ApiException paramContext)
    {
      paramUPSUnRegisterCallBack.onResult(new TokenResult(paramContext.getStatusCode(), paramContext.getMessage()));
    }
  }
}
