package com.huawei.hms.framework.network.grs.data;

import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import com.huawei.hms.framework.common.Logger;
import com.huawei.hms.framework.common.PLSharedPreferences;
import java.util.Map;

public class ByteVector
{
  private static final String TAG = "c";
  private PLSharedPreferences data = null;
  
  public ByteVector(Context paramContext)
  {
    String str = paramContext.getPackageName();
    Logger.info(TAG, "get pkgname from context is{%s}", new Object[] { str });
    StringBuilder localStringBuilder = new StringBuilder();
    localStringBuilder.append("share_pre_grs_conf_");
    localStringBuilder.append(str);
    data = new PLSharedPreferences(paramContext, localStringBuilder.toString());
    show(paramContext);
  }
  
  private void show(Context paramContext)
  {
    try
    {
      paramContext = paramContext.getPackageManager().getPackageInfo(paramContext.getPackageName(), 16384);
      long l = versionCode;
      paramContext = Long.toString(l);
      String str = get("version", "");
      if (paramContext.equals(str)) {
        return;
      }
      Logger.e(TAG, "app version changed! old version{%s} and new version{%s}", new Object[] { str, paramContext });
      putLong();
      add("version", paramContext);
      return;
    }
    catch (PackageManager.NameNotFoundException paramContext)
    {
      for (;;) {}
    }
    Logger.append(TAG, "get app version failed and catch NameNotFoundException");
    return;
  }
  
  public void add(String paramString1, String paramString2)
  {
    data.putString(paramString1, paramString2);
  }
  
  public String get(String paramString1, String paramString2)
  {
    return data.getString(paramString1, paramString2);
  }
  
  public Map get()
  {
    return data.getAll();
  }
  
  public void put(String paramString)
  {
    data.remove(paramString);
  }
  
  public void putLong()
  {
    data.clear();
  }
  
  public String read()
  {
    return get("cp", "");
  }
}
