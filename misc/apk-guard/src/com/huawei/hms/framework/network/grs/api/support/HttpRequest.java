package com.huawei.hms.framework.network.grs.api.support;

import android.content.Context;
import android.text.TextUtils;
import com.huawei.hms.framework.common.Logger;
import com.huawei.hms.framework.network.grs.api.d;
import com.huawei.hms.framework.network.grs.api.exception.CustomSSLSocketFactory;
import com.huawei.hms.framework.network.grs.api.exception.Date;
import com.jd.sentry.performance.network.instrumentation.urlconnection.ShooterUrlConnectionInstrumentation;
import java.net.URL;
import java.net.URLConnection;
import javax.net.ssl.HttpsURLConnection;
import org.apache.http.conn.ssl.X509HostnameVerifier;

public class HttpRequest
{
  public static HttpsURLConnection createConnection(String paramString1, Context paramContext, String paramString2)
  {
    if (TextUtils.isEmpty(paramString1)) {
      return null;
    }
    paramString1 = (URLConnection)ShooterUrlConnectionInstrumentation.openConnection(new URL(paramString1).openConnection());
    if ((paramString1 instanceof HttpsURLConnection)) {
      paramString1 = (HttpsURLConnection)paramString1;
    }
    try
    {
      paramString1.setSSLSocketFactory(Date.add(paramContext));
      X509HostnameVerifier localX509HostnameVerifier = CustomSSLSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER;
      paramString1.setHostnameVerifier(localX509HostnameVerifier);
    }
    catch (IllegalArgumentException localIllegalArgumentException)
    {
      for (;;) {}
    }
    Logger.append("URLConnectionHelper", "init https ssl socket failed.");
    paramString1.setConnectTimeout(10000);
    paramString1.setReadTimeout(10000);
    paramContext = d.d(paramContext, "NetworkKit-grs", paramString2);
    paramString2 = new StringBuilder();
    paramString2.append("request to grs server with a User-Agent header is:");
    paramString2.append(paramContext);
    Logger.debug("URLConnectionHelper", paramString2.toString());
    paramString1.setRequestProperty("User-Agent", paramContext);
    return paramString1;
    Logger.append("URLConnectionHelper", "urlConnection is not an instance of HttpsURLConnection");
    return null;
  }
}
