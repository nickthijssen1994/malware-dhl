package com.huawei.hms.stats;

import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageItemInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.BaseBundle;
import android.provider.Settings.Secure;
import android.provider.Settings.SettingNotFoundException;
import com.huawei.hms.framework.network.grs.GrsApp;
import com.huawei.hms.support.model.HMSLog;

public class ClassWriter
{
  public static int i;
  public static final Object s = new Object();
  
  public static boolean a(Context paramContext)
  {
    localObject = s;
    for (;;)
    {
      boolean bool;
      try
      {
        j = i;
        bool = true;
        if (j == 0)
        {
          if (paramContext == null) {
            return true;
          }
          if (getIcon(paramContext))
          {
            HMSLog.append("AnalyticsSwitchHolder", "Builder->biReportSetting :true");
            i = 1;
          }
          else if (load(paramContext))
          {
            HMSLog.append("AnalyticsSwitchHolder", "Builder->biSetting :true");
            i = 2;
          }
          else if ("CN".equalsIgnoreCase(GrsApp.getInstance().getIssueCountryCode(paramContext)))
          {
            i = 1;
          }
          else
          {
            HMSLog.append("AnalyticsSwitchHolder", "not ChinaROM");
          }
        }
      }
      catch (Throwable paramContext)
      {
        int j;
        throw paramContext;
      }
      try
      {
        j = Settings.Secure.getInt(paramContext.getContentResolver(), "hw_app_analytics_state");
      }
      catch (Settings.SettingNotFoundException paramContext)
      {
        continue;
      }
      try
      {
        paramContext = new StringBuilder();
        paramContext.append("hw_app_analytics_state value is ");
        paramContext.append(j);
        HMSLog.append("AnalyticsSwitchHolder", paramContext.toString());
        if (j == 1) {
          i = 1;
        } else {
          i = 2;
        }
      }
      catch (Settings.SettingNotFoundException paramContext)
      {
        continue;
        bool = false;
      }
    }
    HMSLog.append("AnalyticsSwitchHolder", "Get OOBE failed");
    i = 2;
    if (i != 1) {
      return bool;
    }
  }
  
  public static boolean getIcon(Context paramContext)
  {
    if (paramContext == null)
    {
      HMSLog.toString("AnalyticsSwitchHolder", "In getBiIsReportSetting, context is null.");
      return false;
    }
    PackageManager localPackageManager = paramContext.getPackageManager();
    if (localPackageManager != null) {}
    try
    {
      paramContext = localPackageManager.getPackageInfo(paramContext.getPackageName(), 128);
      paramContext = applicationInfo;
      if ((paramContext == null) || (metaData == null)) {
        break label71;
      }
      paramContext = metaData;
      boolean bool = paramContext.getBoolean("com.huawei.hms.client.bireport.setting");
      return bool;
    }
    catch (PackageManager.NameNotFoundException paramContext)
    {
      label71:
      for (;;) {}
    }
    HMSLog.toString("AnalyticsSwitchHolder", "In getBiIsReportSetting, Failed to read meta data bi report setting.");
    HMSLog.append("AnalyticsSwitchHolder", "In getBiIsReportSetting, configuration not found for bi report setting.");
    return false;
  }
  
  public static boolean load(Context paramContext)
  {
    if (paramContext == null)
    {
      HMSLog.toString("AnalyticsSwitchHolder", "In getBiSetting, context is null.");
      return false;
    }
    PackageManager localPackageManager = paramContext.getPackageManager();
    if (localPackageManager != null) {}
    try
    {
      paramContext = localPackageManager.getPackageInfo(paramContext.getPackageName(), 128);
      paramContext = applicationInfo;
      if ((paramContext == null) || (metaData == null)) {
        break label71;
      }
      paramContext = metaData;
      boolean bool = paramContext.getBoolean("com.huawei.hms.client.bi.setting");
      return bool;
    }
    catch (PackageManager.NameNotFoundException paramContext)
    {
      label71:
      for (;;) {}
    }
    HMSLog.toString("AnalyticsSwitchHolder", "In getBiSetting, Failed to read meta data bisetting.");
    HMSLog.append("AnalyticsSwitchHolder", "In getBiSetting, configuration not found for bisetting.");
    return false;
  }
}
