package com.huawei.hms.opendevice;

import android.content.Context;
import android.text.TextUtils;
import com.huawei.android.hms.openid.R.string;
import com.huawei.hms.aaid.utils.PushPreferences;
import com.huawei.secure.android.common.encrypt.utils.EncryptUtil;
import com.huawei.secure.android.common.encrypt.utils.RootKeyUtil;
import com.huawei.secure.android.common.encrypt.utils.WorkKeyCryptUtil;

public abstract class f
{
  public static RootKeyUtil o;
  
  public static RootKeyUtil a(Context paramContext, PushPreferences paramPushPreferences)
  {
    if (o == null) {
      if (!TextUtils.isEmpty(paramPushPreferences.getString("Jarvis"))) {
        o = RootKeyUtil.newInstance(paramPushPreferences.getString("CaptainA"), paramPushPreferences.getString("IronMan"), paramPushPreferences.getString("CaptainM"), paramPushPreferences.getString("SpokesMan"));
      } else {
        b(paramContext);
      }
    }
    return o;
  }
  
  public static byte[] a(Context paramContext)
  {
    byte[] arrayOfByte1 = Format.decode(paramContext.getString(R.string.push_cat_head));
    paramContext = Format.decode(paramContext.getString(R.string.push_cat_body));
    byte[] arrayOfByte2 = Format.decode(getText());
    return a(add(add(arrayOfByte1, paramContext), arrayOfByte2));
  }
  
  public static byte[] a(byte[] paramArrayOfByte)
  {
    int i = 0;
    if ((paramArrayOfByte != null) && (paramArrayOfByte.length != 0))
    {
      while (i < paramArrayOfByte.length)
      {
        paramArrayOfByte[i] = ((byte)(paramArrayOfByte[i] >> 2));
        i += 1;
      }
      return paramArrayOfByte;
    }
    return new byte[0];
  }
  
  public static byte[] add(byte[] paramArrayOfByte1, byte[] paramArrayOfByte2)
  {
    int i = 0;
    if ((paramArrayOfByte1 != null) && (paramArrayOfByte2 != null) && (paramArrayOfByte1.length != 0) && (paramArrayOfByte2.length != 0))
    {
      int j = paramArrayOfByte1.length;
      if (j != paramArrayOfByte2.length) {
        return new byte[0];
      }
      byte[] arrayOfByte = new byte[j];
      while (i < j)
      {
        arrayOfByte[i] = ((byte)(paramArrayOfByte1[i] ^ paramArrayOfByte2[i]));
        i += 1;
      }
      return arrayOfByte;
    }
    return new byte[0];
  }
  
  public static void b(Context paramContext)
  {
    paramContext = new PushPreferences(paramContext, "LocalAvengers");
    if (!TextUtils.isEmpty(paramContext.getString("Jarvis"))) {
      return;
    }
    Object localObject2 = EncryptUtil.generateSecureRandom(32);
    Object localObject3 = EncryptUtil.generateSecureRandom(32);
    Object localObject1 = EncryptUtil.generateSecureRandom(32);
    byte[] arrayOfByte = EncryptUtil.generateSecureRandom(32);
    localObject2 = Format.toString((byte[])localObject2);
    localObject3 = Format.toString((byte[])localObject3);
    localObject1 = Format.toString((byte[])localObject1);
    o = RootKeyUtil.newInstance((String)localObject2, (String)localObject3, (String)localObject1, arrayOfByte);
    paramContext.saveString("CaptainA", (String)localObject2);
    paramContext.saveString("IronMan", (String)localObject3);
    paramContext.saveString("CaptainM", (String)localObject1);
    paramContext.saveString("SpokesMan", Format.toString(arrayOfByte));
    paramContext.saveString("Jarvis", WorkKeyCryptUtil.encryptWorkKey(Format.toString(EncryptUtil.generateSecureRandom(32)), o));
  }
  
  public static String c(Context paramContext)
  {
    PushPreferences localPushPreferences = new PushPreferences(paramContext, "LocalAvengers");
    paramContext = a(paramContext, localPushPreferences);
    return WorkKeyCryptUtil.decryptWorkKey(localPushPreferences.getString("Jarvis"), paramContext);
  }
  
  public static String getText()
  {
    return "2A57086C86EF54970C1E6EB37BFC72B1";
  }
}
