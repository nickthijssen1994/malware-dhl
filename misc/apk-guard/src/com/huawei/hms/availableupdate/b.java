package com.huawei.hms.availableupdate;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.DialogInterface.OnKeyListener;
import android.view.View;
import android.widget.ProgressBar;
import android.widget.TextView;
import com.huawei.hms.support.model.HMSLog;
import com.huawei.hms.utils.ResourceLoaderUtil;
import java.text.NumberFormat;

public class b
  extends h
{
  public int a = 0;
  public DialogInterface.OnKeyListener b = new MenuDialogHelper(null);
  public ProgressBar mSeekBar;
  public TextView mStatusText;
  
  public b() {}
  
  public void a(int paramInt)
  {
    a = paramInt;
  }
  
  public void b(int paramInt)
  {
    Object localObject = f();
    if ((localObject != null) && (!((Activity)localObject).isFinishing()))
    {
      if (mStatusText != null)
      {
        localObject = mSeekBar;
        if (localObject == null) {
          return;
        }
        ((ProgressBar)localObject).setProgress(paramInt);
        localObject = NumberFormat.getPercentInstance().format(paramInt / 100.0F);
        mStatusText.setText((CharSequence)localObject);
      }
    }
    else {
      HMSLog.get("DownloadProgress", "In setDownloading, The activity is null or finishing.");
    }
  }
  
  public AlertDialog onCreate()
  {
    AlertDialog.Builder localBuilder = new AlertDialog.Builder(f(), a());
    View localView = View.inflate(f(), ResourceLoaderUtil.getLayoutId("hms_download_progress"), null);
    localBuilder.setView(localView);
    localBuilder.setCancelable(false);
    localBuilder.setOnKeyListener(b);
    mSeekBar = ((ProgressBar)localView.findViewById(ResourceLoaderUtil.getIdId("download_info_progress")));
    mStatusText = ((TextView)localView.findViewById(ResourceLoaderUtil.getIdId("hms_progress_text")));
    b(a);
    return localBuilder.create();
  }
}
