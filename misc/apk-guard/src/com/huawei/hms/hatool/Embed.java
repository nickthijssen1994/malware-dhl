package com.huawei.hms.hatool;

import android.util.Pair;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

public class Embed
  implements Object
{
  public String a;
  public String b;
  public String c;
  public android.content.Context i = b.f();
  
  public Embed(String paramString1, String paramString2, String paramString3)
  {
    a = paramString1;
    c = paramString2;
    b = paramString3;
  }
  
  public void run()
  {
    Log.i("hmsSdk", "eventReportTask is running");
    boolean bool1 = AtomicBoolean.get(i);
    if (bool1)
    {
      Log.i("hmsSdk", "workKey is refresh,begin report all data");
      c = "alltype";
    }
    java.lang.Object localObject1 = i;
    java.lang.Object localObject2 = a;
    java.lang.Object localObject3 = c;
    android.content.Context localContext2;
    try
    {
      localObject1 = ClassReader.b((android.content.Context)localObject1, (String)localObject2, (String)localObject3);
      int j = ((Map)localObject1).size();
      if (j == 0)
      {
        localObject1 = a;
        localObject2 = c;
        Log.log("hmsSdk", "no have events to report: tag:%s : type:%s", new java.lang.Object[] { localObject1, localObject2 });
        if ("alltype".equals(c))
        {
          Context.put(i, "stat_v2_1", new String[0]);
          Context.put(i, "cached_v2_1", new String[0]);
          return;
        }
        localObject1 = k.a(a, c);
        Context.put(i, "stat_v2_1", new String[] { localObject1 });
        Context.put(i, "cached_v2_1", new String[] { localObject1 });
        return;
      }
      localObject1 = ((Map)localObject1).entrySet().iterator();
      for (;;)
      {
        boolean bool2 = ((Iterator)localObject1).hasNext();
        if (!bool2) {
          break;
        }
        localObject2 = ((Iterator)localObject1).next();
        localObject3 = (Map.Entry)localObject2;
        localObject2 = ((Map.Entry)localObject3).getKey();
        localObject2 = (String)localObject2;
        localObject3 = ((Map.Entry)localObject3).getValue();
        localObject3 = (List)localObject3;
        run((String)localObject2, (List)localObject3);
      }
      if (!"alltype".equals(c))
      {
        localObject3 = k.a(a, c);
        Context.put(i, "stat_v2_1", new String[] { localObject3 });
        localObject1 = i;
        localObject2 = new String[1];
        localObject2[0] = localObject3;
      }
    }
    catch (Throwable localThrowable)
    {
      break label622;
    }
    catch (Exception localException)
    {
      localObject2 = new StringBuilder();
      ((StringBuilder)localObject2).append("readEventRecords handData Exception:");
      ((StringBuilder)localObject2).append(((Exception)localException).getMessage());
      Log.remove("hmsSdk", ((StringBuilder)localObject2).toString());
      if (!"alltype".equals(c))
      {
        localObject3 = k.a(a, c);
        Context.put(i, "stat_v2_1", new String[] { localObject3 });
        android.content.Context localContext1 = i;
        localObject2 = new String[1];
        localObject2[0] = localObject3;
      }
    }
    catch (IllegalArgumentException localIllegalArgumentException)
    {
      localObject2 = new StringBuilder();
      ((StringBuilder)localObject2).append("readEventRecords handData IllegalArgumentException:");
      ((StringBuilder)localObject2).append(((IllegalArgumentException)localIllegalArgumentException).getMessage());
      Log.remove("hmsSdk", ((StringBuilder)localObject2).toString());
      if ("alltype".equals(c))
      {
        Context.put(i, "stat_v2_1", new String[0]);
        Context.put(i, "cached_v2_1", new String[0]);
        break label604;
      }
      localObject3 = k.a(a, c);
      Context.put(i, "stat_v2_1", new String[] { localObject3 });
      localContext2 = i;
      localObject2 = new String[1];
      localObject2[0] = localObject3;
    }
    Context.put(localContext2, "cached_v2_1", (String[])localObject2);
    label604:
    if (bool1)
    {
      Log.i("hmsSdk", "refresh local key");
      ClassWriter.get().b();
      return;
      label622:
      if ("alltype".equals(c))
      {
        Context.put(i, "stat_v2_1", new String[0]);
        Context.put(i, "cached_v2_1", new String[0]);
      }
      else
      {
        localObject2 = k.a(a, c);
        Context.put(i, "stat_v2_1", new String[] { localObject2 });
        Context.put(i, "cached_v2_1", new String[] { localObject2 });
      }
      throw localContext2;
    }
  }
  
  public final void run(String paramString, List paramList)
  {
    paramString = k.convert(paramString);
    new Switch(paramList, (String)first, (String)second, b).a();
  }
}
