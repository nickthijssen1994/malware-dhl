package com.huawei.hms.common.internal;

import android.os.Parcelable;
import com.huawei.hms.support.model.HMSLog;
import com.huawei.provider.tasks.CancellationToken;
import com.huawei.provider.tasks.TaskCompletionSource;

public abstract class TaskApiCall<ClientT extends AnyClient, ResultT>
{
  private static final String PAGE_KEY = "TaskApiCall";
  private int apiLevel = 1;
  private final String mRequestJson;
  private final String mUri;
  private Parcelable parcelable;
  private CancellationToken token;
  private String transactionId;
  
  public TaskApiCall(String paramString1, String paramString2)
  {
    mUri = paramString1;
    mRequestJson = paramString2;
    parcelable = null;
    transactionId = null;
  }
  
  public TaskApiCall(String paramString1, String paramString2, String paramString3)
  {
    mUri = paramString1;
    mRequestJson = paramString2;
    parcelable = null;
    transactionId = paramString3;
  }
  
  public TaskApiCall(String paramString1, String paramString2, String paramString3, int paramInt)
  {
    mUri = paramString1;
    mRequestJson = paramString2;
    parcelable = null;
    transactionId = paramString3;
    apiLevel = paramInt;
  }
  
  protected abstract void doExecute(AnyClient paramAnyClient, ResponseErrorCode paramResponseErrorCode, String paramString, TaskCompletionSource paramTaskCompletionSource);
  
  public int getApiLevel()
  {
    return apiLevel;
  }
  
  public int getMinApkVersion()
  {
    return 30000000;
  }
  
  public Parcelable getParcelable()
  {
    return parcelable;
  }
  
  public String getRequestJson()
  {
    return mRequestJson;
  }
  
  public CancellationToken getToken()
  {
    return token;
  }
  
  public String getTransactionId()
  {
    return transactionId;
  }
  
  public String getUri()
  {
    return mUri;
  }
  
  public final void onResponse(AnyClient paramAnyClient, ResponseErrorCode paramResponseErrorCode, String paramString, TaskCompletionSource paramTaskCompletionSource)
  {
    CancellationToken localCancellationToken = token;
    if ((localCancellationToken != null) && (localCancellationToken.isCancellationRequested()))
    {
      paramAnyClient = new StringBuilder();
      paramAnyClient.append("This Task has been canceled, uri:");
      paramAnyClient.append(mUri);
      paramAnyClient.append(", transactionId:");
      paramAnyClient.append(transactionId);
      HMSLog.append("TaskApiCall", paramAnyClient.toString());
      return;
    }
    doExecute(paramAnyClient, paramResponseErrorCode, paramString, paramTaskCompletionSource);
  }
  
  public void setApiLevel(int paramInt)
  {
    apiLevel = paramInt;
  }
  
  public void setParcelable(Parcelable paramParcelable)
  {
    parcelable = paramParcelable;
  }
  
  public void setToken(CancellationToken paramCancellationToken)
  {
    token = paramCancellationToken;
  }
  
  public void setTransactionId(String paramString)
  {
    transactionId = paramString;
  }
}
