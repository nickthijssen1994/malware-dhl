package com.huawei.hms.common.internal;

import android.content.Context;
import com.huawei.hms.api.Api;
import com.huawei.hms.configurations.TermSession;
import java.lang.ref.WeakReference;

public class ConnectionManagerKey<TOption extends com.huawei.hms.api.Api.ApiOptions>
{
  private final Api<TOption> mApi;
  private final WeakReference<Context> mContextRef;
  private final int mHashKey;
  private final boolean mHaveOption;
  private final TOption mOption;
  private final String subAppId;
  
  private ConnectionManagerKey(Context paramContext, TermSession paramTermSession, com.huawei.hms.configurations.Api.ApiOptions paramApiOptions, String paramString)
  {
    mHaveOption = false;
    mContextRef = new WeakReference(paramContext);
    mApi = paramTermSession;
    mOption = paramApiOptions;
    mHashKey = Objects.hashCode(new Object[] { mContextRef.get(), mApi, mOption });
    subAppId = paramString;
  }
  
  private ConnectionManagerKey(TermSession paramTermSession, String paramString)
  {
    mHaveOption = true;
    mApi = paramTermSession;
    mOption = null;
    mHashKey = System.identityHashCode(this);
    subAppId = paramString;
    mContextRef = null;
  }
  
  public static ConnectionManagerKey createConnectionManagerKey(Context paramContext, TermSession paramTermSession, com.huawei.hms.configurations.Api.ApiOptions paramApiOptions, String paramString)
  {
    return new ConnectionManagerKey(paramContext, paramTermSession, paramApiOptions, paramString);
  }
  
  public static ConnectionManagerKey createConnectionManagerKey(TermSession paramTermSession, String paramString)
  {
    return new ConnectionManagerKey(paramTermSession, paramString);
  }
  
  public final boolean equals(Object paramObject)
  {
    if (paramObject == this) {
      return true;
    }
    if (!(paramObject instanceof ConnectionManagerKey)) {
      return false;
    }
    paramObject = (ConnectionManagerKey)paramObject;
    if ((mContextRef != null) && (mContextRef != null)) {
      return (mHaveOption == mHaveOption) && (Objects.equal(mApi, mApi)) && (Objects.equal(mOption, mOption)) && (Objects.equal(subAppId, subAppId)) && (Objects.equal(mContextRef.get(), mContextRef.get()));
    }
    if ((mContextRef == null) && (mContextRef == null)) {
      return (mHaveOption == mHaveOption) && (Objects.equal(mApi, mApi)) && (Objects.equal(mOption, mOption)) && (Objects.equal(subAppId, subAppId));
    }
    return false;
  }
  
  public final int hashCode()
  {
    return mHashKey;
  }
}
