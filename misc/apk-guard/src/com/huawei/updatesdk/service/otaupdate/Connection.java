package com.huawei.updatesdk.service.otaupdate;

import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;
import com.huawei.updatesdk.text.hyphenation.b;
import java.util.Locale;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class Connection
{
  private static String data;
  
  public Connection() {}
  
  public void execute(Context paramContext, String paramString, Database paramDatabase)
  {
    if ((b.write(paramContext, paramString)) && (Frame.get().set()))
    {
      paramContext = new TileProviderMNM.IndexTask(paramDatabase);
      paramContext.executeOnExecutor(Executors.newSingleThreadExecutor(), new Void[0]);
      Locale localLocale = Locale.ROOT;
      try
      {
        paramString = String.format(localLocale, "content://%s.commondata/item/4", new Object[] { paramString });
        data = paramString;
        paramString = TimeUnit.MILLISECONDS;
        paramContext.get(500L, paramString);
        return;
      }
      catch (Exception paramString)
      {
        paramContext.cancel(true);
        paramContext = new StringBuilder();
        paramContext.append("init AutoUpdateInfo error: ");
        paramContext.append(((Exception)paramString).toString());
        Log.e("AutoUpdateUtil", paramContext.toString());
        paramDatabase.execute(Boolean.valueOf(false));
        return;
      }
    }
    paramDatabase.execute(Boolean.valueOf(false));
  }
}
