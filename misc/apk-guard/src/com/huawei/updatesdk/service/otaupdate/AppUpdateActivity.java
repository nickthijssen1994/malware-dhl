package com.huawei.updatesdk.service.otaupdate;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.content.ActivityNotFoundException;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnDismissListener;
import android.content.DialogInterface.OnKeyListener;
import android.content.DialogInterface.OnShowListener;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.content.res.Resources.Theme;
import android.os.AsyncTask;
import android.os.BaseBundle;
import android.os.Build.VERSION;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.text.SpannableString;
import android.text.SpannableStringInternal;
import android.text.TextUtils;
import android.text.style.StrikethroughSpan;
import android.text.style.TextAppearanceSpan;
import android.util.DisplayMetrics;
import android.util.TypedValue;
import android.view.ContextThemeWrapper;
import android.view.Display;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.ProgressBar;
import android.widget.ScrollView;
import android.widget.TextView;
import android.widget.Toast;
import com.huawei.updatesdk.org.android.asm.util.Label;
import com.huawei.updatesdk.org.shared.log.PebbleKit.PebbleDataReceiver;
import com.huawei.updatesdk.org.shared.transport.transform.ClassReader;
import com.huawei.updatesdk.service.appmgr.bean.ApkUpgradeInfo;
import com.huawei.updatesdk.text.digests.a;
import com.huawei.updatesdk.text.hyphenation.b;
import com.huawei.updatesdk.text.xy.AnnotationVisitor;
import java.io.Serializable;
import java.util.concurrent.Executors;

public class AppUpdateActivity
  extends Activity
  implements com.huawei.updatesdk.text.digests.h, c
{
  private String a = "com.huawei.appmarket";
  private boolean b = false;
  private com.huawei.updatesdk.text.xy.h c;
  private ApkUpgradeInfo d = null;
  private AlertDialog dialog;
  private int e = -99;
  private boolean f = false;
  private boolean g = false;
  private n h;
  private boolean i = false;
  private com.huawei.updatesdk.text.xy.h m;
  private TextView mPath;
  private ProgressBar mProgress;
  private com.huawei.updatesdk.org.shared.transport.f n;
  private int p = -99;
  private int state = -99;
  private Intent x = null;
  
  public AppUpdateActivity() {}
  
  private Intent a(int paramInt1, int paramInt2, int paramInt3)
  {
    Intent localIntent = new Intent();
    localIntent.putExtra("downloadStatus", paramInt3);
    localIntent.putExtra("installState", paramInt1);
    localIntent.putExtra("installType", paramInt2);
    return localIntent;
  }
  
  private void a()
  {
    int j = com.huawei.updatesdk.text.hyphenation.ByteVector.putByte().b();
    if ((j >= 11) && (j < 17)) {
      c.a(h.b(this, "upsdk_update_all_button"), h.d(this, "upsdk_white"));
    }
  }
  
  private void a(String paramString)
  {
    Object localObject = new Intent("com.huawei.appmarket.intent.action.ThirdUpdateAction");
    ((Intent)localObject).setPackage(a);
    ((Intent)localObject).putExtra("APP_PACKAGENAME", paramString);
    ((Intent)localObject).putExtra("APP_MUST_UPDATE_BTN", g);
    i = false;
    try
    {
      startActivityForResult((Intent)localObject, 1002);
      return;
    }
    catch (ActivityNotFoundException paramString)
    {
      localObject = new StringBuilder();
      ((StringBuilder)localObject).append("goHiappUpgrade error: ");
      ((StringBuilder)localObject).append(paramString.toString());
      com.huawei.updatesdk.org.android.remote.calendar.widget.Log.append("AppUpdateActivity", ((StringBuilder)localObject).toString());
      i = true;
      paramString = new Intent();
      paramString.putExtra("status", 8);
      f.a().d(paramString);
      b(d);
    }
  }
  
  private void a(String paramString1, String paramString2)
  {
    Intent localIntent;
    if ((!TextUtils.isEmpty(paramString1)) && (!TextUtils.isEmpty(paramString2)))
    {
      localIntent = new Intent("com.huawei.appmarket.appmarket.intent.action.AppDetail.withdetailId");
      localIntent.setPackage(a);
      localIntent.putExtra("appDetailId", paramString2);
      localIntent.putExtra("thirdId", paramString1);
      localIntent.addFlags(268468224);
    }
    try
    {
      startActivity(localIntent);
      if (f) {
        return;
      }
      finish();
      return;
    }
    catch (ActivityNotFoundException paramString1)
    {
      for (;;) {}
    }
    l.a(this);
    l.a(a);
    paramString1 = new Intent();
    paramString1.putExtra("status", 8);
    f.a().d(paramString1);
    paramString1 = c;
    if (paramString1 != null)
    {
      paramString1.a();
      return;
      p = 1;
      finish();
      return;
    }
  }
  
  private void b()
  {
    com.huawei.updatesdk.text.xy.h localH = c;
    if (localH != null)
    {
      localH.a(new l(null));
      c.a(new m(null));
    }
  }
  
  private void b(com.huawei.updatesdk.org.shared.log.d paramD)
  {
    paramD = paramD.d();
    if (paramD != null)
    {
      int j = paramD.getInt("download_status_param", -1);
      f.a().a(a(-1, -1, j));
      if (!ClassReader.a(j))
      {
        close();
        if (ClassReader.accept(j))
        {
          Toast.makeText(this, getString(h.getString(this, "upsdk_third_app_dl_install_failed")), 0).show();
          finish();
        }
      }
    }
  }
  
  private void b(ApkUpgradeInfo paramApkUpgradeInfo)
  {
    if (paramApkUpgradeInfo == null)
    {
      finish();
      return;
    }
    String str3 = getString(h.getString(this, "upsdk_ota_title"));
    String str2 = getString(h.getString(this, "upsdk_ota_notify_updatebtn"));
    String str1 = getString(h.getString(this, "upsdk_ota_cancel"));
    b(str3);
    if (1 == paramApkUpgradeInfo.getIsCompulsoryUpdate_())
    {
      str1 = getString(h.getString(this, "upsdk_ota_force_cancel_new"));
      if (g) {
        c.b();
      }
      b = true;
    }
    c.a(new i());
    b();
    c.a(new j());
    if (b) {
      c.a(false);
    } else {
      c.a(new a());
    }
    c.a(com.huawei.updatesdk.text.xy.f.b, str2);
    c.a(com.huawei.updatesdk.text.xy.f.d, str1);
    a();
  }
  
  private void b(String paramString)
  {
    View localView = LayoutInflater.from(this).inflate(h.i(this, "upsdk_ota_update_view"), null);
    if (TextUtils.isEmpty(d.getNewFeatures_())) {
      localObject = getString(h.getString(this, "upsdk_choice_update"));
    } else {
      localObject = d.getNewFeatures_();
    }
    ((TextView)localView.findViewById(h.e(this, "content_textview"))).setText((CharSequence)localObject);
    Object localObject = d.getVersion_();
    ((TextView)localView.findViewById(h.e(this, "version_textview"))).setText((CharSequence)localObject);
    localObject = Item.format(this, max(d));
    ((TextView)localView.findViewById(h.e(this, "appsize_textview"))).setText((CharSequence)localObject);
    localObject = d.getName_();
    ((TextView)localView.findViewById(h.e(this, "name_textview"))).setText((CharSequence)localObject);
    localObject = (TextView)localView.findViewById(h.e(this, "allsize_textview"));
    setText(d, (TextView)localObject);
    init(localView);
    c = com.huawei.updatesdk.text.xy.h.a(this, paramString, null);
    c.a(localView);
  }
  
  private void c()
  {
    if (!b.get(this, a))
    {
      if (com.huawei.updatesdk.org.shared.module.Item.next() == null) {
        com.huawei.updatesdk.org.shared.module.Item.a(this);
      }
      l.a(this);
      l.a(a);
      c.a();
      return;
    }
    a(d.getPackage_(), d.getDetailId_());
  }
  
  private void c(final ApkUpgradeInfo paramApkUpgradeInfo)
  {
    final com.huawei.updatesdk.text.xy.h localH = com.huawei.updatesdk.text.xy.h.a(this, null, getString(h.getString(this, "upsdk_appstore_install"), new Object[] { paramApkUpgradeInfo.getName_() }));
    localH.a(new f(paramApkUpgradeInfo, localH));
    paramApkUpgradeInfo = getString(h.getString(this, "upsdk_app_download_info_new"));
    localH.a(new g());
    localH.a(com.huawei.updatesdk.text.xy.f.b, paramApkUpgradeInfo);
    localH.a(new h(localH));
  }
  
  private void c(String paramString)
  {
    m = com.huawei.updatesdk.text.xy.h.a(this, null, getString(h.getString(this, "upsdk_third_app_dl_cancel_download_prompt_ex")));
    m.a(new c());
    paramString = getString(h.getString(this, "upsdk_third_app_dl_sure_cancel_download"));
    m.a(new d());
    m.a(com.huawei.updatesdk.text.xy.f.b, paramString);
  }
  
  private void close()
  {
    if (dialog != null)
    {
      AlertDialog localAlertDialog = dialog;
      try
      {
        boolean bool = localAlertDialog.isShowing();
        if (!bool) {
          return;
        }
        localAlertDialog = dialog;
        localAlertDialog.dismiss();
        dialog = null;
        return;
      }
      catch (IllegalArgumentException localIllegalArgumentException)
      {
        for (;;) {}
      }
      com.huawei.updatesdk.org.android.remote.calendar.widget.Log.e("AppUpdateActivity", "progressDialog dismiss IllegalArgumentException");
      return;
    }
  }
  
  private void d()
  {
    Utils.b(this, h);
    com.huawei.updatesdk.text.digests.f.a().b(this);
    com.huawei.updatesdk.org.shared.transport.f localF = n;
    if (localF != null) {
      localF.b();
    }
    l.a(null);
  }
  
  private void d(ApkUpgradeInfo paramApkUpgradeInfo)
  {
    onCreate();
    init(paramApkUpgradeInfo.getPackage_(), paramApkUpgradeInfo.getName_());
    com.huawei.updatesdk.org.shared.transport.ByteVector localByteVector = new com.huawei.updatesdk.org.shared.transport.ByteVector(paramApkUpgradeInfo.getDownurl_(), paramApkUpgradeInfo.getLongSize_(), paramApkUpgradeInfo.getSha256_());
    localByteVector.putByte(paramApkUpgradeInfo.getPackage_());
    n = new com.huawei.updatesdk.org.shared.transport.f(localByteVector);
    n.executeOnExecutor(Executors.newSingleThreadExecutor(), new Void[0]);
  }
  
  private void init(View paramView)
  {
    if (!Label.reset()) {
      return;
    }
    try
    {
      paramView = paramView.findViewById(h.e(this, "scroll_layout"));
      paramView = (ScrollView)paramView;
      if (Build.VERSION.SDK_INT >= 22)
      {
        TypedValue localTypedValue = new TypedValue();
        DisplayMetrics localDisplayMetrics = new DisplayMetrics();
        getTheme().resolveAttribute(16843987, localTypedValue, true);
        Object localObject = getSystemService("window");
        localObject = (WindowManager)localObject;
        ((WindowManager)localObject).getDefaultDisplay().getMetrics(localDisplayMetrics);
        int j = data;
        j = TypedValue.complexToDimensionPixelSize(j, localDisplayMetrics);
        paramView.setPadding(j, 0, j, 0);
        return;
      }
    }
    catch (Exception paramView)
    {
      com.huawei.updatesdk.org.android.remote.calendar.widget.Log.append("AppUpdateActivity", paramView.toString());
    }
  }
  
  private void init(final String paramString1, String paramString2)
  {
    Object localObject = dialog;
    if ((localObject != null) && (((Dialog)localObject).isShowing())) {
      return;
    }
    if (Label.reset()) {
      localObject = new AlertDialog.Builder(this);
    } else if (((getResourcesgetConfigurationuiMode & 0x30) == 32) && (Build.VERSION.SDK_INT >= 29)) {
      localObject = new AlertDialog.Builder(this, 16974545);
    } else {
      localObject = new AlertDialog.Builder(this, 16974546);
    }
    dialog = ((AlertDialog.Builder)localObject).create();
    localObject = LayoutInflater.from(this).inflate(h.i(this, "upsdk_app_dl_progress_dialog"), null);
    ((TextView)((View)localObject).findViewById(h.e(this, "third_app_warn_text"))).setText(getString(h.getString(this, "upsdk_app_download_installing"), new Object[] { paramString2 }));
    mProgress = ((ProgressBar)((View)localObject).findViewById(h.e(this, "third_app_dl_progressbar")));
    mProgress.setMax(100);
    mPath = ((TextView)((View)localObject).findViewById(h.e(this, "third_app_dl_progress_text")));
    ((View)localObject).findViewById(h.e(this, "cancel_bg")).setOnClickListener(new e(paramString1));
    dialog.setView((View)localObject);
    dialog.setCancelable(false);
    dialog.setCanceledOnTouchOutside(false);
    if (!Utils.update(this)) {
      dialog.show();
    }
    mPath.setText(Item.a(0));
  }
  
  private void log(final com.huawei.updatesdk.org.shared.log.d paramD)
  {
    new Handler(Looper.getMainLooper()).post(new b(paramD));
  }
  
  private long max(ApkUpgradeInfo paramApkUpgradeInfo)
  {
    long l3 = paramApkUpgradeInfo.getLongSize_();
    long l1 = l3;
    if ((paramApkUpgradeInfo.getPackingType_() == 1) && (paramApkUpgradeInfo.getBundleSize_() > 0L)) {
      return paramApkUpgradeInfo.getBundleSize_();
    }
    long l2 = l1;
    if (paramApkUpgradeInfo.getPackingType_() == 3)
    {
      l2 = l1;
      if (paramApkUpgradeInfo.getObbSize_() > 0L) {
        l2 = l3 + paramApkUpgradeInfo.getObbSize_();
      }
    }
    if (paramApkUpgradeInfo.getDiffSize_() > 0)
    {
      l1 = paramApkUpgradeInfo.getDiffSize_();
      if ((paramApkUpgradeInfo.getPackingType_() == 3) && (paramApkUpgradeInfo.getObbSize_() > 0L)) {
        return l1 + paramApkUpgradeInfo.getObbSize_();
      }
    }
    else
    {
      return l2;
    }
    return l1;
  }
  
  private void onCreate()
  {
    IntentFilter localIntentFilter = new IntentFilter();
    localIntentFilter.addAction("android.intent.action.PACKAGE_ADDED");
    localIntentFilter.addDataScheme("package");
    h = new n(null);
    Utils.register(this, localIntentFilter, h);
  }
  
  private void onDraw(com.huawei.updatesdk.org.shared.log.d paramD)
  {
    if (mProgress == null) {
      return;
    }
    long l = paramD.a("download_apk_size", 0);
    int j = Item.getProgress(paramD.a("download_apk_already", 0), l);
    mProgress.setProgress(j);
    j = (int)(mProgress.getProgress() / mProgress.getMax() * 100.0F);
    mPath.setText(Item.a(j));
  }
  
  private void onOptionsItemSelected(int paramInt)
  {
    if ((paramInt == 5) || (paramInt == 4))
    {
      Toast.makeText(this, getString(h.getString(this, "upsdk_third_app_dl_install_failed")), 0).show();
      b.start();
      finish();
    }
    if (paramInt == 7)
    {
      b.start();
      if (b)
      {
        b(d);
        return;
      }
      finish();
    }
  }
  
  private void setText(ApkUpgradeInfo paramApkUpgradeInfo, TextView paramTextView)
  {
    if (paramTextView == null) {
      return;
    }
    if (paramApkUpgradeInfo.getDiffSize_() > 0)
    {
      long l;
      if ((paramApkUpgradeInfo.getPackingType_() == 3) && (paramApkUpgradeInfo.getObbSize_() > 0L)) {
        l = paramApkUpgradeInfo.getLongSize_() + paramApkUpgradeInfo.getObbSize_();
      } else {
        l = paramApkUpgradeInfo.getLongSize_();
      }
      paramApkUpgradeInfo = Item.format(this, l);
      SpannableString localSpannableString = new SpannableString(paramApkUpgradeInfo);
      localSpannableString.setSpan(new StrikethroughSpan(), 0, paramApkUpgradeInfo.length(), 33);
      localSpannableString.setSpan(new TextAppearanceSpan("HwChinese-medium", 0, (int)paramTextView.getTextSize(), null, null), 0, localSpannableString.length(), 33);
      paramTextView.setText(localSpannableString);
      return;
    }
    paramTextView.setVisibility(8);
  }
  
  public void a(int paramInt)
  {
    Toast.makeText(this, getString(h.getString(this, "upsdk_getting_message_fail_prompt_toast")), 0).show();
    f.a().c(paramInt);
    finish();
  }
  
  public void a(ApkUpgradeInfo paramApkUpgradeInfo)
  {
    if (paramApkUpgradeInfo != null)
    {
      com.huawei.updatesdk.text.digests.f.a().a(this);
      c(paramApkUpgradeInfo);
      return;
    }
    Toast.makeText(this, getString(h.getString(this, "upsdk_getting_message_fail_prompt_toast")), 0).show();
    finish();
  }
  
  public void b(int paramInt)
  {
    Toast.makeText(this, getString(h.getString(this, "upsdk_connect_server_fail_prompt_toast")), 0).show();
    f.a().c(paramInt);
    finish();
  }
  
  public void finish()
  {
    if (b) {
      overridePendingTransition(0, 0);
    }
    x = new Intent();
    x.putExtra("status", p);
    x.putExtra("failcause", e);
    x.putExtra("compulsoryUpdateCancel", b);
    x.putExtra("buttonstatus", state);
    f.a().d(x);
    super.finish();
  }
  
  public void g(int paramInt, com.huawei.updatesdk.org.shared.log.d paramD)
  {
    if (paramD == null) {
      return;
    }
    if (paramInt == 0)
    {
      b(paramD);
      return;
    }
    if (1 == paramInt)
    {
      onDraw(paramD);
      return;
    }
    if (2 == paramInt) {
      log(paramD);
    }
  }
  
  public void onActivityResult(int paramInt1, int paramInt2, Intent paramIntent)
  {
    if (paramInt1 == 1002)
    {
      if (paramIntent != null)
      {
        paramIntent = com.huawei.updatesdk.org.shared.log.d.a(paramIntent);
        p = paramInt2;
        e = paramIntent.d("installResultCode", -99);
        b = paramIntent.a("compulsoryUpdateCancel", false);
      }
      if (paramInt2 == 4) {
        paramInt1 = 100;
      } else {
        paramInt1 = 101;
      }
      state = paramInt1;
      if (!i) {
        finish();
      }
    }
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    requestWindowFeature(1);
    Label.a().a(getWindow());
    super.onCreate(paramBundle);
    Bundle localBundle = com.huawei.updatesdk.org.shared.log.d.a(getIntent()).d();
    if (localBundle == null)
    {
      super.finish();
      return;
    }
    paramBundle = null;
    try
    {
      Serializable localSerializable = localBundle.getSerializable("app_update_parm");
      paramBundle = localSerializable;
    }
    catch (Exception localException)
    {
      for (;;) {}
    }
    android.util.Log.e("AppUpdateActivity", "Type Conversion Error");
    if ((paramBundle instanceof ApkUpgradeInfo))
    {
      d = ((ApkUpgradeInfo)paramBundle);
      g = localBundle.getBoolean("app_must_btn", false);
      if (d.getIsCompulsoryUpdate_() == 1) {
        f = true;
      }
      if (!TextUtils.isEmpty(Frame.get().getValue())) {
        a = Frame.get().getValue();
      }
      if ((d.getDevType_() == 1) && (b.a(this, a) == com.huawei.updatesdk.text.hyphenation.c.b))
      {
        a(d.getPackage_());
        return;
      }
      b(d);
      return;
    }
    p = 3;
    finish();
  }
  
  protected void onDestroy()
  {
    com.huawei.updatesdk.text.xy.h localH = m;
    if (localH != null)
    {
      localH.a();
      m = null;
    }
    localH = c;
    if (localH != null)
    {
      localH.a();
      c = null;
    }
    close();
    d();
    super.onDestroy();
    finishActivity(1002);
  }
  
  class a
    implements DialogInterface.OnKeyListener
  {
    a() {}
    
    public boolean onKey(DialogInterface paramDialogInterface, int paramInt, KeyEvent paramKeyEvent)
    {
      if ((paramInt == 4) && (paramKeyEvent.getAction() == 0))
      {
        AppUpdateActivity.a(AppUpdateActivity.this, 4);
        finish();
        return true;
      }
      return false;
    }
  }
  
  class b
    implements Runnable
  {
    b(com.huawei.updatesdk.org.shared.log.d paramD) {}
    
    public void run()
    {
      Bundle localBundle = paramD.d();
      if (localBundle == null) {
        return;
      }
      int i = localBundle.getInt("INSTALL_STATE");
      int j = localBundle.getInt("INSTALL_TYPE");
      f.a().a(AppUpdateActivity.add(AppUpdateActivity.this, i, j, -1));
      AppUpdateActivity.setId(AppUpdateActivity.this, i);
    }
  }
  
  class c
    implements com.huawei.updatesdk.text.xy.d
  {
    c() {}
    
    public void b()
    {
      AppUpdateActivity.d(AppUpdateActivity.this).a();
    }
    
    public void onClick()
    {
      AppUpdateActivity.access$getMProgress(AppUpdateActivity.this).setProgress(0);
      AppUpdateActivity.access$getMProgress(AppUpdateActivity.this).setMax(0);
      AppUpdateActivity.access$getMPath(AppUpdateActivity.this).setText("");
      AppUpdateActivity.f(AppUpdateActivity.this);
      if (AppUpdateActivity.access$getN(AppUpdateActivity.this) != null) {
        AppUpdateActivity.access$getN(AppUpdateActivity.this).apply();
      }
      AppUpdateActivity.d(AppUpdateActivity.this).a();
      if (AppUpdateActivity.a(AppUpdateActivity.this))
      {
        AppUpdateActivity localAppUpdateActivity = AppUpdateActivity.this;
        AppUpdateActivity.b(localAppUpdateActivity, AppUpdateActivity.b(localAppUpdateActivity));
        return;
      }
      AppUpdateActivity.a(AppUpdateActivity.this, 4);
      finish();
    }
  }
  
  class d
    implements AnnotationVisitor
  {
    d() {}
    
    public void visitEnum()
    {
      finish();
    }
  }
  
  class e
    implements View.OnClickListener
  {
    e(String paramString) {}
    
    public void onClick(View paramView)
    {
      AppUpdateActivity.a(AppUpdateActivity.this, paramString1);
    }
  }
  
  class f
    implements com.huawei.updatesdk.text.xy.d
  {
    f(ApkUpgradeInfo paramApkUpgradeInfo, com.huawei.updatesdk.text.xy.h paramH) {}
    
    public void b()
    {
      localH.a();
      if (AppUpdateActivity.a(AppUpdateActivity.this))
      {
        AppUpdateActivity localAppUpdateActivity = AppUpdateActivity.this;
        AppUpdateActivity.b(localAppUpdateActivity, AppUpdateActivity.b(localAppUpdateActivity));
        return;
      }
      AppUpdateActivity.a(AppUpdateActivity.this, 4);
      finish();
    }
    
    public void onClick()
    {
      if (!com.huawei.updatesdk.org.android.asm.data.f.isNetworkAvailable(AppUpdateActivity.this))
      {
        AppUpdateActivity localAppUpdateActivity = AppUpdateActivity.this;
        Toast.makeText(localAppUpdateActivity, h.getString(localAppUpdateActivity, "upsdk_no_available_network_prompt_toast"), 0).show();
        finish();
        return;
      }
      AppUpdateActivity.a(AppUpdateActivity.this, paramApkUpgradeInfo);
      localH.a();
    }
  }
  
  class g
    implements AnnotationVisitor
  {
    g() {}
    
    public void visitEnum()
    {
      finish();
    }
  }
  
  class h
    implements DialogInterface.OnKeyListener
  {
    h(com.huawei.updatesdk.text.xy.h paramH) {}
    
    public boolean onKey(DialogInterface paramDialogInterface, int paramInt, KeyEvent paramKeyEvent)
    {
      if ((paramInt == 4) && (paramKeyEvent.getAction() == 0))
      {
        if (AppUpdateActivity.a(AppUpdateActivity.this))
        {
          localH.a();
          paramDialogInterface = AppUpdateActivity.this;
          AppUpdateActivity.b(paramDialogInterface, AppUpdateActivity.b(paramDialogInterface));
          return true;
        }
        AppUpdateActivity.a(AppUpdateActivity.this, 4);
        finish();
        return true;
      }
      return false;
    }
  }
  
  class i
    implements com.huawei.updatesdk.text.xy.d
  {
    i() {}
    
    public void b()
    {
      AppUpdateActivity.c(AppUpdateActivity.this).a();
      AppUpdateActivity.a(AppUpdateActivity.this, 4);
      AppUpdateActivity.b(AppUpdateActivity.this, 100);
      if (!AppUpdateActivity.a(AppUpdateActivity.this))
      {
        Connection localConnection = new Connection();
        AppUpdateActivity localAppUpdateActivity = AppUpdateActivity.this;
        localConnection.execute(localAppUpdateActivity, AppUpdateActivity.format(localAppUpdateActivity), new AppUpdateActivity.k(AppUpdateActivity.this));
        return;
      }
      finish();
    }
    
    public void onClick()
    {
      AppUpdateActivity.b(AppUpdateActivity.this, 101);
      if (!com.huawei.updatesdk.org.android.asm.data.f.isNetworkAvailable(AppUpdateActivity.this))
      {
        AppUpdateActivity localAppUpdateActivity = AppUpdateActivity.this;
        Toast.makeText(localAppUpdateActivity, h.getString(localAppUpdateActivity, "upsdk_no_available_network_prompt_toast"), 0).show();
        AppUpdateActivity.a(AppUpdateActivity.this, 2);
        finish();
        return;
      }
      AppUpdateActivity.setTitle(AppUpdateActivity.this);
    }
  }
  
  class j
    implements AnnotationVisitor
  {
    j() {}
    
    public void visitEnum()
    {
      finish();
    }
  }
  
  public class k
    implements Database
  {
    public k() {}
    
    public void execute(Boolean paramBoolean)
    {
      if (paramBoolean.booleanValue()) {
        try
        {
          paramBoolean = new Intent("com.huawei.appmarket.intent.action.ThirdUpdateRemindAction");
          localObject = AppUpdateActivity.this;
          paramBoolean.setPackage(AppUpdateActivity.format((AppUpdateActivity)localObject));
          localObject = AppUpdateActivity.this;
          ((Activity)localObject).startActivity(paramBoolean);
        }
        catch (ActivityNotFoundException paramBoolean)
        {
          Object localObject = new StringBuilder();
          ((StringBuilder)localObject).append("goHiappUpgrade error: ");
          ((StringBuilder)localObject).append(paramBoolean.toString());
          com.huawei.updatesdk.org.android.remote.calendar.widget.Log.append("AppUpdateActivity", ((StringBuilder)localObject).toString());
        }
      }
      finish();
    }
  }
  
  private static class l
    implements DialogInterface.OnDismissListener
  {
    private l() {}
    
    public void onDismiss(DialogInterface paramDialogInterface)
    {
      paramDialogInterface = new Intent();
      paramDialogInterface.putExtra("dialogstatus", 10001);
      f.a().d(paramDialogInterface);
    }
  }
  
  private static class m
    implements DialogInterface.OnShowListener
  {
    private m() {}
    
    public void onShow(DialogInterface paramDialogInterface)
    {
      paramDialogInterface = new Intent();
      paramDialogInterface.putExtra("dialogstatus", 10002);
      f.a().d(paramDialogInterface);
    }
  }
  
  private class n
    extends PebbleKit.PebbleDataReceiver
  {
    private n() {}
    
    public void a(Context paramContext, com.huawei.updatesdk.org.shared.log.d paramD)
    {
      if (!paramD.b()) {
        return;
      }
      if (AppUpdateActivity.d(AppUpdateActivity.this) != null) {
        AppUpdateActivity.d(AppUpdateActivity.this).a();
      }
      AppUpdateActivity.f(AppUpdateActivity.this);
      paramContext = paramD.a();
      paramD = paramD.c().getDataString();
      if (paramD != null)
      {
        if (paramD.length() < 9) {
          return;
        }
        paramD = paramD.substring(8);
        if (("android.intent.action.PACKAGE_ADDED".equals(paramContext)) && (AppUpdateActivity.format(AppUpdateActivity.this).equals(paramD)))
        {
          f.a().a(AppUpdateActivity.add(AppUpdateActivity.this, 6, 0, -1));
          b.start();
          paramContext = AppUpdateActivity.this;
          AppUpdateActivity.b(paramContext, AppUpdateActivity.b(paramContext).getPackage_(), AppUpdateActivity.b(AppUpdateActivity.this).getDetailId_());
          if (AppUpdateActivity.a(AppUpdateActivity.this))
          {
            paramContext = AppUpdateActivity.this;
            AppUpdateActivity.b(paramContext, AppUpdateActivity.b(paramContext));
          }
        }
      }
    }
  }
}
