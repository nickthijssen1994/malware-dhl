package com.huawei.updatesdk.service.otaupdate;

import android.content.Context;
import android.os.AsyncTask;
import android.text.TextUtils;
import android.util.Log;
import com.huawei.updatesdk.text.http.f;
import com.huawei.updatesdk.text.hyphenation.b;
import java.util.Locale;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class Frame
{
  private static Frame c = new Frame();
  private static String f;
  private String a;
  private String b = null;
  private String d;
  private String g;
  
  private Frame() {}
  
  public static Frame get()
  {
    return c;
  }
  
  public void a(Context paramContext, String paramString)
  {
    a = null;
    if (!b.c(paramContext, paramString)) {
      return;
    }
    long l = f.a().add(paramString);
    if (Math.abs(System.currentTimeMillis() - l) < 86400000L)
    {
      paramContext = f.a().a(paramString);
      get().d(paramContext);
      return;
    }
    f = String.format(Locale.ROOT, "content://%s.commondata/item/1", new Object[] { paramString });
    paramContext = new TileProviderTAR.IndexTask(null);
    paramContext.executeOnExecutor(Executors.newSingleThreadExecutor(), new Void[0]);
    paramString = TimeUnit.MILLISECONDS;
    try
    {
      paramContext.get(1000L, paramString);
      return;
    }
    catch (Exception paramString)
    {
      paramContext.cancel(true);
      paramContext = new StringBuilder();
      paramContext.append("init AccountZone error: ");
      paramContext.append(paramString.toString());
      Log.e("ServiceZoneUtil", paramContext.toString());
    }
  }
  
  public void a(String paramString)
  {
    b = paramString;
  }
  
  public boolean a()
  {
    return TextUtils.equals(g, "AppTouch");
  }
  
  public String b()
  {
    if (!TextUtils.isEmpty(d)) {
      return d;
    }
    return a;
  }
  
  public void b(String paramString)
  {
    g = paramString;
  }
  
  public void d(String paramString)
  {
    a = paramString;
  }
  
  public String getValue()
  {
    return b;
  }
  
  public String init()
  {
    return d;
  }
  
  public void set(String paramString)
  {
    d = paramString;
  }
  
  public boolean set()
  {
    String str = d;
    if (str != null) {
      return str.equals(a);
    }
    return true;
  }
}
