package com.huawei.updatesdk.org.shared.transport;

import android.os.AsyncTask;
import android.os.Handler;
import android.text.TextUtils;
import com.huawei.updatesdk.org.android.remote.calendar.widget.Log;
import com.huawei.updatesdk.org.shared.module.Item;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;

public class f
  extends AsyncTask<Void, Void, Void>
{
  private HttpURLConnection a;
  private boolean b = false;
  private String c = "com.huawei.appmarket";
  private Handler h = new SlidingDrawer.SlidingHandler(null);
  private ByteVector x;
  
  public f(ByteVector paramByteVector)
  {
    x = paramByteVector;
    if (!TextUtils.isEmpty(paramByteVector.b())) {
      c = paramByteVector.b();
    }
  }
  
  private static String a()
  {
    String str = Item.next().getName();
    if (TextUtils.isEmpty(str)) {
      return "";
    }
    Object localObject = new StringBuilder();
    ((StringBuilder)localObject).append(str);
    ((StringBuilder)localObject).append("/updatesdk");
    str = ((StringBuilder)localObject).toString();
    localObject = new File(str);
    if ((!((File)localObject).exists()) && (!((File)localObject).mkdirs())) {
      return "";
    }
    return str;
  }
  
  private void a(int paramInt1, long paramLong, String paramString, int paramInt2)
  {
    ByteVector localByteVector = new ByteVector();
    localByteVector.write(paramInt1);
    localByteVector.b(paramLong);
    localByteVector.putByte(paramString);
    paramString = h;
    if (paramString == null) {
      return;
    }
    paramString.sendMessage(paramString.obtainMessage(paramInt2, localByteVector));
  }
  
  /* Error */
  private void a(ByteVector paramByteVector, String paramString)
  {
    // Byte code:
    //   0: aload_1
    //   1: ifnull +298 -> 299
    //   4: aload_1
    //   5: invokevirtual 118	com/huawei/updatesdk/org/shared/transport/ByteVector:a	()Ljava/lang/String;
    //   8: invokestatic 46	android/text/TextUtils:isEmpty	(Ljava/lang/CharSequence;)Z
    //   11: ifeq +4 -> 15
    //   14: return
    //   15: new 60	java/lang/StringBuilder
    //   18: dup
    //   19: invokespecial 61	java/lang/StringBuilder:<init>	()V
    //   22: astore 4
    //   24: aload 4
    //   26: aload_2
    //   27: invokevirtual 65	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   30: pop
    //   31: aload 4
    //   33: ldc 120
    //   35: invokevirtual 65	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   38: pop
    //   39: aload 4
    //   41: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   44: astore 7
    //   46: new 72	java/io/File
    //   49: dup
    //   50: aload 7
    //   52: invokespecial 75	java/io/File:<init>	(Ljava/lang/String;)V
    //   55: astore 4
    //   57: aconst_null
    //   58: astore 5
    //   60: aconst_null
    //   61: astore 6
    //   63: aconst_null
    //   64: astore_2
    //   65: new 122	java/io/FileOutputStream
    //   68: dup
    //   69: aload 4
    //   71: invokespecial 125	java/io/FileOutputStream:<init>	(Ljava/io/File;)V
    //   74: astore 4
    //   76: aload_0
    //   77: aload_1
    //   78: aload 4
    //   80: aload 7
    //   82: invokespecial 128	com/huawei/updatesdk/org/shared/transport/f:a	(Lcom/huawei/updatesdk/org/shared/transport/ByteVector;Ljava/io/OutputStream;Ljava/lang/String;)Z
    //   85: istore_3
    //   86: iload_3
    //   87: ifne +17 -> 104
    //   90: new 72	java/io/File
    //   93: dup
    //   94: invokestatic 129	com/huawei/updatesdk/org/shared/transport/f:a	()Ljava/lang/String;
    //   97: invokespecial 75	java/io/File:<init>	(Ljava/lang/String;)V
    //   100: invokestatic 134	com/huawei/updatesdk/org/android/asm/a:b	(Ljava/io/File;)Z
    //   103: pop
    //   104: aload 4
    //   106: invokevirtual 137	java/io/FileOutputStream:close	()V
    //   109: return
    //   110: astore_1
    //   111: aload 4
    //   113: astore_2
    //   114: goto +153 -> 267
    //   117: astore_2
    //   118: aload 4
    //   120: astore_1
    //   121: aload_2
    //   122: astore 4
    //   124: goto +22 -> 146
    //   127: astore_2
    //   128: aload 4
    //   130: astore_1
    //   131: aload_2
    //   132: astore 4
    //   134: goto +72 -> 206
    //   137: astore_1
    //   138: goto +129 -> 267
    //   141: astore 4
    //   143: aload 5
    //   145: astore_1
    //   146: aload_1
    //   147: astore_2
    //   148: new 60	java/lang/StringBuilder
    //   151: dup
    //   152: invokespecial 61	java/lang/StringBuilder:<init>	()V
    //   155: astore 5
    //   157: aload_1
    //   158: astore_2
    //   159: aload 5
    //   161: ldc -117
    //   163: invokevirtual 65	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   166: pop
    //   167: aload_1
    //   168: astore_2
    //   169: aload 5
    //   171: aload 4
    //   173: invokevirtual 140	java/lang/Exception:toString	()Ljava/lang/String;
    //   176: invokevirtual 65	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   179: pop
    //   180: aload_1
    //   181: astore_2
    //   182: ldc -114
    //   184: aload 5
    //   186: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   189: invokestatic 147	com/huawei/updatesdk/org/android/remote/calendar/widget/Log:append	(Ljava/lang/String;Ljava/lang/String;)V
    //   192: aload_1
    //   193: ifnull +106 -> 299
    //   196: aload_1
    //   197: invokevirtual 137	java/io/FileOutputStream:close	()V
    //   200: return
    //   201: astore 4
    //   203: aload 6
    //   205: astore_1
    //   206: aload_1
    //   207: astore_2
    //   208: new 60	java/lang/StringBuilder
    //   211: dup
    //   212: invokespecial 61	java/lang/StringBuilder:<init>	()V
    //   215: astore 5
    //   217: aload_1
    //   218: astore_2
    //   219: aload 5
    //   221: ldc -107
    //   223: invokevirtual 65	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   226: pop
    //   227: aload_1
    //   228: astore_2
    //   229: aload 5
    //   231: aload 4
    //   233: invokevirtual 150	java/io/FileNotFoundException:toString	()Ljava/lang/String;
    //   236: invokevirtual 65	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   239: pop
    //   240: aload_1
    //   241: astore_2
    //   242: ldc -114
    //   244: aload 5
    //   246: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   249: invokestatic 147	com/huawei/updatesdk/org/android/remote/calendar/widget/Log:append	(Ljava/lang/String;Ljava/lang/String;)V
    //   252: aload_1
    //   253: ifnull +46 -> 299
    //   256: goto -60 -> 196
    //   259: ldc -114
    //   261: ldc -104
    //   263: invokestatic 147	com/huawei/updatesdk/org/android/remote/calendar/widget/Log:append	(Ljava/lang/String;Ljava/lang/String;)V
    //   266: return
    //   267: aload_2
    //   268: ifnull +17 -> 285
    //   271: aload_2
    //   272: invokevirtual 137	java/io/FileOutputStream:close	()V
    //   275: goto +10 -> 285
    //   278: ldc -114
    //   280: ldc -104
    //   282: invokestatic 147	com/huawei/updatesdk/org/android/remote/calendar/widget/Log:append	(Ljava/lang/String;Ljava/lang/String;)V
    //   285: aload_1
    //   286: athrow
    //   287: astore_1
    //   288: goto -29 -> 259
    //   291: astore_1
    //   292: goto -33 -> 259
    //   295: astore_2
    //   296: goto -18 -> 278
    //   299: return
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	300	0	this	f
    //   0	300	1	paramByteVector	ByteVector
    //   0	300	2	paramString	String
    //   85	2	3	bool	boolean
    //   22	111	4	localObject1	Object
    //   141	31	4	localException	Exception
    //   201	31	4	localFileNotFoundException	java.io.FileNotFoundException
    //   58	187	5	localStringBuilder	StringBuilder
    //   61	143	6	localObject2	Object
    //   44	37	7	str	String
    // Exception table:
    //   from	to	target	type
    //   76	86	110	java/lang/Throwable
    //   90	104	110	java/lang/Throwable
    //   76	86	117	java/lang/Exception
    //   90	104	117	java/lang/Exception
    //   76	86	127	java/io/FileNotFoundException
    //   90	104	127	java/io/FileNotFoundException
    //   65	76	137	java/lang/Throwable
    //   148	157	137	java/lang/Throwable
    //   159	167	137	java/lang/Throwable
    //   169	180	137	java/lang/Throwable
    //   182	192	137	java/lang/Throwable
    //   208	217	137	java/lang/Throwable
    //   219	227	137	java/lang/Throwable
    //   229	240	137	java/lang/Throwable
    //   242	252	137	java/lang/Throwable
    //   65	76	141	java/lang/Exception
    //   65	76	201	java/io/FileNotFoundException
    //   104	109	287	java/io/IOException
    //   196	200	291	java/io/IOException
    //   271	275	295	java/io/IOException
  }
  
  private boolean a(ByteVector paramByteVector, OutputStream paramOutputStream, String paramString)
  {
    throw new Runtime("d2j fail translate: java.lang.RuntimeException: fail exe a25 = a24\n\tat com.googlecode.dex2jar.ir.ts.an.BaseAnalyze.exec(BaseAnalyze.java:92)\n\tat com.googlecode.dex2jar.ir.ts.an.BaseAnalyze.exec(BaseAnalyze.java:1)\n\tat com.googlecode.dex2jar.ir.ts.Cfg.dfs(Cfg.java:255)\n\tat com.googlecode.dex2jar.ir.ts.an.BaseAnalyze.analyze0(BaseAnalyze.java:75)\n\tat com.googlecode.dex2jar.ir.ts.an.BaseAnalyze.analyze(BaseAnalyze.java:69)\n\tat com.googlecode.dex2jar.ir.ts.UnSSATransformer.transform(UnSSATransformer.java:274)\n\tat com.googlecode.d2j.dex.Dex2jar$2.optimize(Dex2jar.java:163)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertCode(Dex2Asm.java:414)\n\tat com.googlecode.d2j.dex.ExDex2Asm.convertCode(ExDex2Asm.java:42)\n\tat com.googlecode.d2j.dex.Dex2jar$2.convertCode(Dex2jar.java:128)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertMethod(Dex2Asm.java:509)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertClass(Dex2Asm.java:406)\n\tat com.googlecode.d2j.dex.Dex2Asm.convertDex(Dex2Asm.java:422)\n\tat com.googlecode.d2j.dex.Dex2jar.doTranslate(Dex2jar.java:172)\n\tat com.googlecode.d2j.dex.Dex2jar.to(Dex2jar.java:272)\n\tat com.googlecode.dex2jar.tools.Dex2jarCmd.doCommandLine(Dex2jarCmd.java:108)\n\tat com.googlecode.dex2jar.tools.BaseCmd.doMain(BaseCmd.java:288)\n\tat com.googlecode.dex2jar.tools.Dex2jarCmd.main(Dex2jarCmd.java:32)\nCaused by: java.lang.NullPointerException\n");
  }
  
  private void close()
  {
    HttpURLConnection localHttpURLConnection = a;
    if (localHttpURLConnection != null) {
      localHttpURLConnection.disconnect();
    }
  }
  
  private void close(InputStream paramInputStream, OutputStream paramOutputStream)
  {
    if (paramInputStream != null) {
      try
      {
        paramInputStream.close();
      }
      catch (IOException paramInputStream)
      {
        StringBuilder localStringBuilder = new StringBuilder();
        localStringBuilder.append("downloadUrlToStream(String urlString,OutputStream outputStream) ");
        localStringBuilder.append(paramInputStream.toString());
        Log.append("DownloadMarketTask", localStringBuilder.toString());
      }
    }
    if (paramOutputStream != null) {
      try
      {
        paramOutputStream.close();
        return;
      }
      catch (IOException paramInputStream)
      {
        paramOutputStream = new StringBuilder();
        paramOutputStream.append("downloadUrlToStream(String urlString,OutputStream outputStream) ");
        paramOutputStream.append(paramInputStream.toString());
        Log.append("DownloadMarketTask", paramOutputStream.toString());
      }
    }
  }
  
  protected Void add(Void... paramVarArgs)
  {
    com.huawei.updatesdk.text.speech.tts.ByteVector.write(this);
    a(x, a());
    return null;
  }
  
  public void apply()
  {
    new Thread(new Alarm(this)).start();
  }
  
  public void b()
  {
    h = null;
  }
  
  protected void onCancelled()
  {
    super.onCancelled();
    apply();
  }
}
