package com.huawei.updatesdk.text.hyphenation;

import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageInfo;
import android.content.pm.PackageItemInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.BaseBundle;
import android.text.TextUtils;
import com.huawei.updatesdk.org.shared.module.Item;
import com.huawei.updatesdk.service.otaupdate.Frame;
import java.lang.reflect.Field;

public class b
{
  private static boolean a;
  private static Integer b;
  private static Field j;
  private static boolean l;
  
  public static int a(PackageInfo paramPackageInfo)
  {
    paramPackageInfo = applicationInfo;
    if ((flags & 0x1) == 0) {
      return 0;
    }
    if (a(paramPackageInfo)) {
      return 1;
    }
    return 2;
  }
  
  public static c a(Context paramContext, String paramString)
  {
    c localC = c.c;
    if (paramContext == null) {
      return localC;
    }
    try
    {
      paramString = paramContext.getPackageManager().getPackageInfo(paramString, 0);
      paramContext = localC;
      if (paramString != null)
      {
        paramContext = new StringBuilder();
        paramContext.append("appmarket info,");
        paramContext.append("versioncode = ");
        int i = versionCode;
        paramContext.append(i);
        paramContext.append("versioncode = ");
        String str = versionName;
        paramContext.append(str);
        android.util.Log.i("PackageUtils", paramContext.toString());
        if (versionCode < 70203000) {
          return c.d;
        }
        paramContext = c.b;
      }
      return paramContext;
    }
    catch (Exception paramContext)
    {
      paramString = new StringBuilder();
      paramString.append("isInstallByPackage Exception:");
      paramString.append(((Exception)paramContext).toString());
      com.huawei.updatesdk.org.android.remote.calendar.widget.Log.w("PackageUtils", paramString.toString());
    }
    return localC;
  }
  
  public static Field a()
  {
    if (l) {
      return j;
    }
    try
    {
      Field localField = ApplicationInfo.class.getField("hwFlags");
      j = localField;
    }
    catch (NoSuchFieldException localNoSuchFieldException)
    {
      for (;;) {}
    }
    com.huawei.updatesdk.org.android.remote.calendar.widget.Log.e("PackageUtils", "can not find hwFlags");
    l = true;
    return j;
  }
  
  private static boolean a(ApplicationInfo paramApplicationInfo)
  {
    int i = flags;
    Object localObject = write();
    if ((localObject != null) && ((i & ((Integer)localObject).intValue()) != 0)) {
      return true;
    }
    localObject = a();
    if (localObject != null)
    {
      String str2;
      try
      {
        i = ((Field)localObject).getInt(paramApplicationInfo);
        if ((i & 0x2000000) == 0) {
          break label107;
        }
        return true;
      }
      catch (IllegalArgumentException localIllegalArgumentException)
      {
        paramApplicationInfo = new StringBuilder();
        paramApplicationInfo.append("can not get hwflags");
        String str1 = localIllegalArgumentException.toString();
      }
      catch (IllegalAccessException localIllegalAccessException)
      {
        paramApplicationInfo = new StringBuilder();
        paramApplicationInfo.append("can not get hwflags");
        str2 = localIllegalAccessException.toString();
      }
      paramApplicationInfo.append(str2);
      com.huawei.updatesdk.org.android.remote.calendar.widget.Log.e("PackageUtils", paramApplicationInfo.toString());
    }
    label107:
    return false;
  }
  
  public static boolean c(Context paramContext, String paramString)
  {
    if (Frame.get().a()) {
      return true;
    }
    return getVersionCode(paramContext, paramString) > 90000000;
  }
  
  public static boolean get(Context paramContext, String paramString)
  {
    if (paramContext != null)
    {
      if (TextUtils.isEmpty(paramString)) {
        return false;
      }
      try
      {
        paramContext = paramContext.getPackageManager().getPackageInfo(paramString, 0);
        if (paramContext != null) {
          return true;
        }
      }
      catch (Exception paramContext)
      {
        paramString = new StringBuilder();
        paramString.append("isAppInstalled NameNotFoundException:");
        paramString.append(paramContext.toString());
        com.huawei.updatesdk.org.android.remote.calendar.widget.Log.w("PackageUtils", paramString.toString());
      }
    }
    return false;
  }
  
  private static int getVersionCode(Context paramContext, String paramString)
  {
    String str = paramString;
    if (TextUtils.isEmpty(paramString)) {
      str = "com.huawei.appmarket";
    }
    try
    {
      paramContext = paramContext.getPackageManager().getPackageInfo(str, 0);
      return versionCode;
    }
    catch (UnsupportedOperationException paramString)
    {
      paramContext = new StringBuilder();
      paramContext.append("isInstallByPackage UnsupportedOperationException:");
      paramString = paramString.toString();
    }
    catch (PackageManager.NameNotFoundException paramString)
    {
      paramContext = new StringBuilder();
      paramContext.append("isInstallByPackage NameNotFoundException:");
      paramString = paramString.toString();
    }
    paramContext.append(paramString);
    com.huawei.updatesdk.org.android.remote.calendar.widget.Log.w("PackageUtils", paramContext.toString());
    return 0;
  }
  
  public static int load(String paramString)
  {
    Object localObject = Item.next().getContext();
    try
    {
      localObject = ((Context)localObject).getPackageManager().getPackageInfo(paramString, 128);
      if (localObject != null)
      {
        paramString = applicationInfo;
        if ((paramString == null) || (metaData == null) || (!applicationInfo.metaData.containsKey("com.huawei.maple.flag"))) {
          break label94;
        }
        return 1;
      }
      return 0;
    }
    catch (Exception localException)
    {
      for (;;) {}
    }
    localObject = new StringBuilder();
    ((StringBuilder)localObject).append("getMapleStatus not found: ");
    ((StringBuilder)localObject).append(paramString);
    com.huawei.updatesdk.org.android.remote.calendar.widget.Log.append("PackageUtils", ((StringBuilder)localObject).toString());
    return 0;
    label94:
    return 0;
  }
  
  public static PackageInfo onCreateView(String paramString, Context paramContext)
  {
    try
    {
      paramContext = paramContext.getPackageManager().getPackageInfo(paramString, 64);
      return paramContext;
    }
    catch (Exception paramContext)
    {
      for (;;) {}
    }
    paramContext = new StringBuilder();
    paramContext.append("not found: ");
    paramContext.append(paramString);
    com.huawei.updatesdk.org.android.remote.calendar.widget.Log.append("PackageUtils", paramContext.toString());
    return null;
  }
  
  public static void start()
  {
    Thread localThread = new Thread(new MonthByWeekFragment.2(null));
    localThread.setName("delete market file task");
    localThread.setUncaughtExceptionHandler(new ImageLoader.1());
    localThread.start();
  }
  
  public static Integer write()
  {
    if (a) {
      return b;
    }
    StringBuilder localStringBuilder;
    try
    {
      Class localClass = Class.forName("android.content.pm.PackageParser");
      int i = localClass.getDeclaredField("PARSE_IS_REMOVABLE_PREINSTALLED_APK").getInt(localClass);
      b = Integer.valueOf(i);
    }
    catch (Exception localException)
    {
      String str1 = localException.toString();
      break label154;
    }
    catch (IllegalArgumentException localIllegalArgumentException)
    {
      localStringBuilder = new StringBuilder();
      localStringBuilder.append("isDelApp error IllegalArgumentException:");
      String str2 = localIllegalArgumentException.toString();
    }
    catch (IllegalAccessException localIllegalAccessException)
    {
      localStringBuilder = new StringBuilder();
      localStringBuilder.append("isDelApp error IllegalAccessException:");
      String str3 = localIllegalAccessException.toString();
    }
    catch (ClassNotFoundException localClassNotFoundException)
    {
      localStringBuilder = new StringBuilder();
      localStringBuilder.append("isDelApp error ClassNotFoundException:");
      String str4 = localClassNotFoundException.toString();
    }
    catch (NoSuchFieldException localNoSuchFieldException)
    {
      localStringBuilder = new StringBuilder();
      localStringBuilder.append("isDelApp error NoSuchFieldException:");
      str5 = localNoSuchFieldException.toString();
    }
    localStringBuilder.append(str5);
    String str5 = localStringBuilder.toString();
    label154:
    com.huawei.updatesdk.org.android.remote.calendar.widget.Log.e("PackageUtils", str5);
    a = true;
    return b;
  }
  
  public static boolean write(Context paramContext, String paramString)
  {
    if (Frame.get().a()) {
      return true;
    }
    return getVersionCode(paramContext, paramString) > 100200000;
  }
}
