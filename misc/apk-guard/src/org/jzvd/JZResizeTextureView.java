package org.jzvd;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.TextureView;
import android.view.View;
import android.view.View.MeasureSpec;

public class JZResizeTextureView
  extends TextureView
{
  public int height = 0;
  public int width = 0;
  
  public JZResizeTextureView(Context paramContext)
  {
    super(paramContext);
  }
  
  public JZResizeTextureView(Context paramContext, AttributeSet paramAttributeSet)
  {
    super(paramContext, paramAttributeSet);
  }
  
  protected void onMeasure(int paramInt1, int paramInt2)
  {
    StringBuilder localStringBuilder = new StringBuilder();
    localStringBuilder.append("onMeasure  [");
    localStringBuilder.append(hashCode());
    localStringBuilder.append("] ");
    Log.i("JZResizeTextureView", localStringBuilder.toString());
    int i5 = (int)getRotation();
    int i1 = width;
    int i4 = height;
    int i3 = ((View)getParent()).getMeasuredHeight();
    int n = i3;
    int i2 = ((View)getParent()).getMeasuredWidth();
    int m = i2;
    int i = i4;
    int k = n;
    int j = m;
    if (i2 != 0)
    {
      i = i4;
      k = n;
      j = m;
      if (i3 != 0)
      {
        i = i4;
        k = n;
        j = m;
        if (i1 != 0)
        {
          i = i4;
          k = n;
          j = m;
          if (i4 != 0)
          {
            i = i4;
            k = n;
            j = m;
            if (JZVideoPlayer.config == 1)
            {
              if (i5 != 90)
              {
                k = n;
                j = m;
                if (i5 != 270) {}
              }
              else
              {
                j = i3;
                k = i2;
              }
              i = i1 * k / j;
            }
          }
        }
      }
    }
    if ((i5 != 90) && (i5 != 270))
    {
      m = paramInt1;
      n = paramInt2;
    }
    else
    {
      n = paramInt1;
      m = paramInt2;
    }
    i2 = View.getDefaultSize(i1, m);
    i3 = View.getDefaultSize(i, n);
    paramInt2 = i2;
    paramInt1 = i3;
    if (i1 > 0)
    {
      paramInt2 = i2;
      paramInt1 = i3;
      if (i > 0)
      {
        i4 = View.MeasureSpec.getMode(m);
        i3 = View.MeasureSpec.getSize(m);
        i2 = i3;
        int i6 = View.MeasureSpec.getMode(n);
        paramInt2 = View.MeasureSpec.getSize(n);
        paramInt1 = paramInt2;
        localStringBuilder = new StringBuilder();
        localStringBuilder.append("widthMeasureSpec  [");
        localStringBuilder.append(View.MeasureSpec.toString(m));
        localStringBuilder.append("]");
        Log.i("JZResizeTextureView", localStringBuilder.toString());
        localStringBuilder = new StringBuilder();
        localStringBuilder.append("heightMeasureSpec [");
        localStringBuilder.append(View.MeasureSpec.toString(n));
        localStringBuilder.append("]");
        Log.i("JZResizeTextureView", localStringBuilder.toString());
        if ((i4 == 1073741824) && (i6 == 1073741824))
        {
          m = i1 * paramInt2;
          n = i3 * i;
          if (m < n)
          {
            paramInt2 = m / i;
          }
          else
          {
            paramInt2 = i2;
            if (m > n)
            {
              paramInt1 = n / i1;
              paramInt2 = i2;
            }
          }
        }
        else if (i4 == 1073741824)
        {
          m = i3 * i / i1;
          if ((i6 == Integer.MIN_VALUE) && (m > paramInt2))
          {
            paramInt2 = paramInt2 * i1 / i;
          }
          else
          {
            paramInt1 = m;
            paramInt2 = i2;
          }
        }
        else
        {
          if (i6 == 1073741824)
          {
            n = paramInt2 * i1 / i;
            paramInt2 = n;
            m = paramInt1;
            if (i4 == Integer.MIN_VALUE)
            {
              paramInt2 = n;
              m = paramInt1;
              if (n > i3)
              {
                paramInt1 = i3 * i / i1;
                paramInt2 = i2;
                break label676;
              }
            }
          }
          do
          {
            do
            {
              paramInt1 = m;
              break;
              if ((i6 == Integer.MIN_VALUE) && (i > paramInt2))
              {
                n = paramInt2 * i1 / i;
              }
              else
              {
                n = i1;
                paramInt1 = i;
              }
              paramInt2 = n;
              m = paramInt1;
            } while (i4 != Integer.MIN_VALUE);
            paramInt2 = n;
            m = paramInt1;
          } while (n <= i3);
          paramInt1 = i3 * i / i1;
          paramInt2 = i2;
        }
      }
    }
    label676:
    if ((j != 0) && (k != 0) && (i1 != 0) && (i != 0))
    {
      if (JZVideoPlayer.config == 3)
      {
        paramInt1 = i1;
        break label905;
      }
      if (JZVideoPlayer.config == 2)
      {
        if (i5 != 90)
        {
          n = k;
          m = j;
          if (i5 != 270) {}
        }
        else
        {
          m = k;
          n = j;
        }
        double d1 = i;
        double d2 = i1;
        Double.isNaN(d1);
        Double.isNaN(d2);
        double d3 = d1 / d2;
        d1 = n;
        d2 = m;
        Double.isNaN(d1);
        Double.isNaN(d2);
        double d4 = d1 / d2;
        if (d3 > d4)
        {
          d1 = paramInt2;
          Double.isNaN(d2);
          Double.isNaN(d1);
          d1 = d2 / d1;
          d2 = paramInt1;
          Double.isNaN(d2);
          i = (int)(d1 * d2);
          paramInt1 = m;
          break label905;
        }
        if (d3 < d4)
        {
          d2 = paramInt1;
          Double.isNaN(d1);
          Double.isNaN(d2);
          d1 /= d2;
          d2 = paramInt2;
          Double.isNaN(d2);
          paramInt1 = (int)(d1 * d2);
          i = n;
          break label905;
        }
      }
    }
    i = paramInt1;
    paramInt1 = paramInt2;
    label905:
    setMeasuredDimension(paramInt1, i);
  }
  
  public void setRotation(float paramFloat)
  {
    if (paramFloat != getRotation())
    {
      super.setRotation(paramFloat);
      requestLayout();
    }
  }
  
  public void setVideoSize(int paramInt1, int paramInt2)
  {
    if ((width != paramInt1) || (height != paramInt2))
    {
      width = paramInt1;
      height = paramInt2;
      requestLayout();
    }
  }
}
