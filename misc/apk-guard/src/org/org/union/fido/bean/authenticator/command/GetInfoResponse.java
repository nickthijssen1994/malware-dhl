package org.org.union.fido.bean.authenticator.command;

import java.util.ArrayList;
import java.util.List;
import org.org.union.fido.util.CommonTools;
import org.org.union.fido.util.Utility;

public class GetInfoResponse
  extends BaseResponse
{
  public byte apiVersion = 0;
  public List<cn.com.union.fido.bean.authenticator.tag.TAG_AUTHENTICATOR_INFO> authenticatorInfo;
  public short name = 13825;
  public short statusCode = 0;
  
  public GetInfoResponse() {}
  
  public void deserialize(byte[] paramArrayOfByte)
  {
    name = ((short)Utility.byteToShort(paramArrayOfByte, 0, 2));
    int i = 4;
    Utility.byteToShort(paramArrayOfByte, 2, 4);
    if (10248 == Utility.byteToShort(paramArrayOfByte, 4, 6))
    {
      statusCode = ((short)Utility.byteToShort(paramArrayOfByte, 8, 10));
      i = 10;
    }
    int k = i + 2;
    int j = i;
    if (10254 == Utility.byteToShort(paramArrayOfByte, i, k))
    {
      i = k + 2;
      apiVersion = paramArrayOfByte[i];
      j = i + 1;
    }
    authenticatorInfo = new ArrayList();
    i = j;
    while (14353 == Utility.byteToShort(paramArrayOfByte, i, i + 2))
    {
      i += 2;
      j = i + 2;
      k = Utility.byteToShort(paramArrayOfByte, i, j);
      i = j;
      if (k > 0)
      {
        byte[] arrayOfByte = new byte[k];
        System.arraycopy(paramArrayOfByte, j, arrayOfByte, 0, k);
        org.org.union.fido.bean.authenticator.wiki.TAG_AUTHENTICATOR_INFO localTAG_AUTHENTICATOR_INFO = new org.org.union.fido.bean.authenticator.wiki.TAG_AUTHENTICATOR_INFO();
        localTAG_AUTHENTICATOR_INFO.deserialize(arrayOfByte);
        authenticatorInfo.add(localTAG_AUTHENTICATOR_INFO);
        i = j + k;
      }
    }
  }
  
  public byte[] serialize()
  {
    byte[] arrayOfByte = new byte['?'];
    Utility.shortToByte(arrayOfByte, 0, 2, name);
    Utility.shortToByte(arrayOfByte, 4, 6, 10248);
    Utility.shortToByte(arrayOfByte, 6, 8, 2);
    Utility.shortToByte(arrayOfByte, 8, 10, statusCode);
    Utility.shortToByte(arrayOfByte, 10, 12, 10254);
    Utility.shortToByte(arrayOfByte, 12, 14, 1);
    arrayOfByte[14] = apiVersion;
    boolean bool = CommonTools.isValidateList(authenticatorInfo);
    int k = 19;
    if (bool)
    {
      int j = 0;
      for (int i = 15;; i = k)
      {
        k = i;
        if (j >= authenticatorInfo.size()) {
          break;
        }
        localObject = (org.org.union.fido.bean.authenticator.wiki.TAG_AUTHENTICATOR_INFO)authenticatorInfo.get(j);
        k = i;
        if (localObject != null)
        {
          localObject = ((org.org.union.fido.bean.authenticator.wiki.TAG_AUTHENTICATOR_INFO)localObject).serialize();
          k = i + 2;
          Utility.shortToByte(arrayOfByte, i, k, 14353);
          i = localObject.length;
          int m = k + 2;
          Utility.shortToByte(arrayOfByte, k, m, i);
          System.arraycopy(localObject, 0, arrayOfByte, m, i);
          k = i + m;
        }
        j += 1;
      }
    }
    Utility.shortToByte(arrayOfByte, 15, 17, 14353);
    Utility.shortToByte(arrayOfByte, 17, 19, 0);
    Utility.shortToByte(arrayOfByte, 2, 4, k - 4);
    Object localObject = new byte[k];
    System.arraycopy(arrayOfByte, 0, localObject, 0, k);
    return localObject;
  }
}
