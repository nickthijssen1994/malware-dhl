package cn.jzvd;

import android.annotation.SuppressLint;
import android.content.Context;
import android.media.AudioManager;
import android.provider.Settings;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewParent;
import android.view.WindowManager;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.SeekBar;
import android.widget.TextView;
import android.widget.Toast;
import androidx.appcompat.app.ActionBar;
import androidx.appcompat.app.AppCompatActivity;
import com.facebook.common.util.UriUtil;
import java.util.LinkedHashMap;
import java.util.Timer;
import java.util.TimerTask;

/* compiled from: TbsSdkJava */
/* renamed from: cn.jzvd.JZVideoPlayer */
/* loaded from: classes.dex */
public abstract class JZVideoPlayer extends FrameLayout implements View.OnClickListener, View.OnTouchListener, SeekBar.OnSeekBarChangeListener {

    /* renamed from: a */
    public static boolean f112a;

    /* renamed from: b */
    public static boolean f113b;

    /* renamed from: c */
    public static int f114c;

    /* renamed from: d */
    public static int f115d;

    /* renamed from: e */
    public static boolean f116e;

    /* renamed from: f */
    public static boolean f117f;

    /* renamed from: g */
    public static int f118g;

    /* renamed from: h */
    public static long f119h;

    /* renamed from: i */
    public static long f120i;

    /* renamed from: j */
    public static AudioManager.OnAudioFocusChangeListener f121j = new AudioManager.OnAudioFocusChangeListener() { // from class: cn.jzvd.JZVideoPlayer.1
        @Override // android.media.AudioManager.OnAudioFocusChangeListener
        public void onAudioFocusChange(int i) {
            if (i != 1) {
                switch (i) {
                    case -2:
                        try {
                            if (C0055f.m4778c().f143m == 3) {
                                C0055f.m4778c().f147q.performClick();
                            }
                        } catch (IllegalStateException e) {
                            e.printStackTrace();
                        }
                        Log.d("JiaoZiVideoPlayer", "AUDIOFOCUS_LOSS_TRANSIENT [" + hashCode() + "]");
                        return;
                    case -1:
                        JZVideoPlayer.m4869a();
                        Log.d("JiaoZiVideoPlayer", "AUDIOFOCUS_LOSS [" + hashCode() + "]");
                        return;
                    default:
                        return;
                }
            }
        }
    };

    /* renamed from: k */
    protected static AbstractC0053d f122k;

    /* renamed from: l */
    protected static Timer f123l;

    /* renamed from: A */
    public Object[] f124A;

    /* renamed from: E */
    protected int f128E;

    /* renamed from: F */
    protected int f129F;

    /* renamed from: G */
    protected AudioManager f130G;

    /* renamed from: H */
    protected C0030a f131H;

    /* renamed from: I */
    protected boolean f132I;

    /* renamed from: J */
    protected float f133J;

    /* renamed from: K */
    protected float f134K;

    /* renamed from: L */
    protected boolean f135L;

    /* renamed from: M */
    protected boolean f136M;

    /* renamed from: N */
    protected boolean f137N;

    /* renamed from: O */
    protected long f138O;

    /* renamed from: P */
    protected int f139P;

    /* renamed from: Q */
    protected float f140Q;

    /* renamed from: R */
    protected long f141R;

    /* renamed from: q */
    public ImageView f147q;

    /* renamed from: r */
    public SeekBar f148r;

    /* renamed from: s */
    public ImageView f149s;

    /* renamed from: t */
    public TextView f150t;

    /* renamed from: u */
    public TextView f151u;

    /* renamed from: v */
    public ViewGroup f152v;

    /* renamed from: w */
    public ViewGroup f153w;

    /* renamed from: x */
    public ViewGroup f154x;

    /* renamed from: m */
    public int f143m = -1;

    /* renamed from: n */
    public int f144n = -1;

    /* renamed from: o */
    public Object[] f145o = null;

    /* renamed from: p */
    public long f146p = 0;

    /* renamed from: y */
    public int f155y = 0;

    /* renamed from: z */
    public int f156z = 0;

    /* renamed from: B */
    public int f125B = 0;

    /* renamed from: C */
    public int f126C = -1;

    /* renamed from: D */
    public int f127D = 0;

    /* renamed from: S */
    boolean f142S = false;

    /* renamed from: C */
    public void m4870C() {
    }

    /* renamed from: D */
    public void mo4848D() {
    }

    /* renamed from: E */
    public void mo4847E() {
    }

    /* renamed from: F */
    public void mo4846F() {
    }

    /* renamed from: G */
    public void mo4845G() {
    }

    /* renamed from: a */
    public void mo4830a(float f, int i) {
    }

    /* renamed from: a */
    public void mo4829a(float f, String str, long j, String str2, long j2) {
    }

    /* renamed from: a */
    public void mo4828a(int i) {
    }

    public abstract int getLayoutId();

    @Override // android.widget.SeekBar.OnSeekBarChangeListener
    public void onProgressChanged(SeekBar seekBar, int i, boolean z) {
    }

    public JZVideoPlayer(Context context) {
        super(context);
        mo4823c(context);
    }

    public JZVideoPlayer(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
        mo4823c(context);
    }

    /* renamed from: a */
    public static void m4869a() {
        if (System.currentTimeMillis() - f119h > 300) {
            Log.d("JiaoZiVideoPlayer", "releaseAllVideos");
            C0055f.m4777d();
            TextureView$SurfaceTextureListenerC0043b.m4813a().f204e = -1;
            TextureView$SurfaceTextureListenerC0043b.m4813a().m4804g();
        }
    }

    /* renamed from: b */
    public static boolean m4866b() {
        Log.i("JiaoZiVideoPlayer", "backPress");
        if (System.currentTimeMillis() - f119h < 300) {
            return false;
        }
        if (C0055f.m4780b() != null) {
            f119h = System.currentTimeMillis();
            if (C0054e.m4787a(C0055f.m4782a().f124A, TextureView$SurfaceTextureListenerC0043b.m4809b())) {
                JZVideoPlayer b = C0055f.m4780b();
                b.onEvent(b.f144n == 2 ? 8 : 10);
                C0055f.m4782a().m4871B();
            } else {
                m4863c();
            }
            return true;
        } else if (C0055f.m4782a() == null || (C0055f.m4782a().f144n != 2 && C0055f.m4782a().f144n != 3)) {
            return false;
        } else {
            f119h = System.currentTimeMillis();
            m4863c();
            return true;
        }
    }

    /* renamed from: c */
    public static void m4863c() {
        C0055f.m4782a().m4855s();
        TextureView$SurfaceTextureListenerC0043b.m4813a().m4804g();
        C0055f.m4777d();
    }

    @SuppressLint({"RestrictedApi"})
    /* renamed from: a */
    public static void m4867a(Context context) {
        ActionBar supportActionBar;
        if (!(!f112a || C0054e.m4784c(context) == null || (supportActionBar = C0054e.m4784c(context).getSupportActionBar()) == null)) {
            supportActionBar.setShowHideAnimationEnabled(false);
            supportActionBar.show();
        }
        if (f113b) {
            C0054e.m4783d(context).clearFlags(1024);
        }
    }

    @SuppressLint({"RestrictedApi"})
    /* renamed from: b */
    public static void m4864b(Context context) {
        ActionBar supportActionBar;
        if (!(!f112a || C0054e.m4784c(context) == null || (supportActionBar = C0054e.m4784c(context).getSupportActionBar()) == null)) {
            supportActionBar.setShowHideAnimationEnabled(false);
            supportActionBar.hide();
        }
        if (f113b) {
            C0054e.m4783d(context).setFlags(1024, 1024);
        }
    }

    public static void setJzUserAction(AbstractC0053d dVar) {
        f122k = dVar;
    }

    public static void setTextureViewRotation(int i) {
        if (TextureView$SurfaceTextureListenerC0043b.f200a != null) {
            TextureView$SurfaceTextureListenerC0043b.f200a.setRotation((float) i);
        }
    }

    public static void setVideoImageDisplayType(int i) {
        f118g = i;
        if (TextureView$SurfaceTextureListenerC0043b.f200a != null) {
            TextureView$SurfaceTextureListenerC0043b.f200a.requestLayout();
        }
    }

    public Object getCurrentUrl() {
        return C0054e.m4788a(this.f124A, this.f125B);
    }

    /* renamed from: c */
    public void mo4823c(Context context) {
        View.inflate(context, getLayoutId(), this);
        this.f147q = (ImageView) findViewById(C0039R.C0041id.start);
        this.f149s = (ImageView) findViewById(C0039R.C0041id.fullscreen);
        this.f148r = (SeekBar) findViewById(C0039R.C0041id.bottom_seek_progress);
        this.f150t = (TextView) findViewById(C0039R.C0041id.current);
        this.f151u = (TextView) findViewById(C0039R.C0041id.total);
        this.f154x = (ViewGroup) findViewById(C0039R.C0041id.layout_bottom);
        this.f152v = (ViewGroup) findViewById(C0039R.C0041id.surface_container);
        this.f153w = (ViewGroup) findViewById(C0039R.C0041id.layout_top);
        this.f147q.setOnClickListener(this);
        this.f149s.setOnClickListener(this);
        this.f148r.setOnSeekBarChangeListener(this);
        this.f154x.setOnClickListener(this);
        this.f152v.setOnClickListener(this);
        this.f152v.setOnTouchListener(this);
        this.f128E = getContext().getResources().getDisplayMetrics().widthPixels;
        this.f129F = getContext().getResources().getDisplayMetrics().heightPixels;
        this.f130G = (AudioManager) getContext().getSystemService("audio");
        try {
            if (m4849z()) {
                f115d = ((AppCompatActivity) context).getRequestedOrientation();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void setUp(String str, int i, Object... objArr) {
        LinkedHashMap linkedHashMap = new LinkedHashMap();
        linkedHashMap.put("URL_KEY_DEFAULT", str);
        setUp(new Object[]{linkedHashMap}, 0, i, objArr);
    }

    public void setUp(Object[] objArr, int i, int i2, Object... objArr2) {
        long j;
        if (this.f124A == null || C0054e.m4788a(objArr, this.f125B) == null || !C0054e.m4788a(this.f124A, this.f125B).equals(C0054e.m4788a(objArr, this.f125B))) {
            if (m4872A() && C0054e.m4787a(objArr, TextureView$SurfaceTextureListenerC0043b.m4809b())) {
                try {
                    j = TextureView$SurfaceTextureListenerC0043b.m4808c();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                    j = 0;
                }
                if (j != 0) {
                    C0054e.m4790a(getContext(), TextureView$SurfaceTextureListenerC0043b.m4809b(), j);
                }
                TextureView$SurfaceTextureListenerC0043b.m4813a().m4804g();
            } else if (m4872A() && !C0054e.m4787a(objArr, TextureView$SurfaceTextureListenerC0043b.m4809b())) {
                m4850y();
            } else if (m4872A() || !C0054e.m4787a(objArr, TextureView$SurfaceTextureListenerC0043b.m4809b())) {
                if (!m4872A()) {
                    C0054e.m4787a(objArr, TextureView$SurfaceTextureListenerC0043b.m4809b());
                }
            } else if (C0055f.m4778c() != null && C0055f.m4778c().f144n == 3) {
                this.f142S = true;
            }
            this.f124A = objArr;
            this.f125B = i;
            this.f144n = i2;
            this.f145o = objArr2;
            mo4822f();
        }
    }

    @Override // android.view.View.OnClickListener
    public void onClick(View view) {
        int id = view.getId();
        if (id == C0039R.C0041id.start) {
            Log.i("JiaoZiVideoPlayer", "onClick start [" + hashCode() + "] ");
            Object[] objArr = this.f124A;
            if (objArr == null || C0054e.m4788a(objArr, this.f125B) == null) {
                Toast.makeText(getContext(), getResources().getString(C0039R.string.no_url), 0).show();
                return;
            }
            int i = this.f143m;
            if (i == 0) {
                if (C0054e.m4788a(this.f124A, this.f125B).toString().startsWith(UriUtil.LOCAL_FILE_SCHEME) || C0054e.m4788a(this.f124A, this.f125B).toString().startsWith("/") || C0054e.m4793a(getContext()) || f117f) {
                    m4862d();
                    onEvent(0);
                    return;
                }
                mo4848D();
            } else if (i == 3) {
                onEvent(3);
                Log.d("JiaoZiVideoPlayer", "pauseVideo [" + hashCode() + "] ");
                TextureView$SurfaceTextureListenerC0043b.m4806e();
                mo4819j();
            } else if (i == 5) {
                onEvent(4);
                TextureView$SurfaceTextureListenerC0043b.m4805f();
                mo4820i();
            } else if (i == 6) {
                onEvent(2);
                m4862d();
            }
        } else if (id == C0039R.C0041id.fullscreen) {
            Log.i("JiaoZiVideoPlayer", "onClick fullscreen [" + hashCode() + "] ");
            if (this.f143m != 6) {
                if (this.f144n == 2) {
                    m4866b();
                    return;
                }
                Log.d("JiaoZiVideoPlayer", "toFullscreenActivity [" + hashCode() + "] ");
                onEvent(7);
                m4851x();
            }
        }
    }

    @Override // android.view.View.OnTouchListener
    public boolean onTouch(View view, MotionEvent motionEvent) {
        float x = motionEvent.getX();
        float y = motionEvent.getY();
        if (view.getId() == C0039R.C0041id.surface_container) {
            switch (motionEvent.getAction()) {
                case 0:
                    Log.i("JiaoZiVideoPlayer", "onTouch surfaceContainer actionDown [" + hashCode() + "] ");
                    this.f132I = true;
                    this.f133J = x;
                    this.f134K = y;
                    this.f135L = false;
                    this.f136M = false;
                    this.f137N = false;
                    break;
                case 1:
                    Log.i("JiaoZiVideoPlayer", "onTouch surfaceContainer actionUp [" + hashCode() + "] ");
                    this.f132I = false;
                    mo4847E();
                    mo4846F();
                    mo4845G();
                    if (this.f136M) {
                        onEvent(12);
                        TextureView$SurfaceTextureListenerC0043b.m4812a(this.f141R);
                        long duration = getDuration();
                        long j = this.f141R * 100;
                        if (duration == 0) {
                            duration = 1;
                        }
                        this.f148r.setProgress((int) (j / duration));
                    }
                    if (this.f135L) {
                        onEvent(11);
                    }
                    m4853u();
                    break;
                case 2:
                    Log.i("JiaoZiVideoPlayer", "onTouch surfaceContainer actionMove [" + hashCode() + "] ");
                    float f = x - this.f133J;
                    float f2 = y - this.f134K;
                    float abs = Math.abs(f);
                    float abs2 = Math.abs(f2);
                    if (this.f144n == 2 && !this.f136M && !this.f135L && !this.f137N && (abs > 80.0f || abs2 > 80.0f)) {
                        m4852v();
                        if (abs >= 80.0f) {
                            if (this.f143m != 7) {
                                this.f136M = true;
                                this.f138O = getCurrentPositionWhenPlaying();
                            }
                        } else if (this.f133J < ((float) this.f128E) * 0.5f) {
                            this.f137N = true;
                            WindowManager.LayoutParams attributes = C0054e.m4783d(getContext()).getAttributes();
                            if (attributes.screenBrightness < 0.0f) {
                                try {
                                    this.f140Q = (float) Settings.System.getInt(getContext().getContentResolver(), "screen_brightness");
                                    Log.i("JiaoZiVideoPlayer", "current system brightness: " + this.f140Q);
                                } catch (Settings.SettingNotFoundException e) {
                                    e.printStackTrace();
                                }
                            } else {
                                this.f140Q = attributes.screenBrightness * 255.0f;
                                Log.i("JiaoZiVideoPlayer", "current activity brightness: " + this.f140Q);
                            }
                        } else {
                            this.f135L = true;
                            this.f139P = this.f130G.getStreamVolume(3);
                        }
                    }
                    if (this.f136M) {
                        long duration2 = getDuration();
                        this.f141R = (long) ((int) (((float) this.f138O) + ((((float) duration2) * f) / ((float) this.f128E))));
                        if (this.f141R > duration2) {
                            this.f141R = duration2;
                        }
                        mo4829a(f, C0054e.m4794a(this.f141R), this.f141R, C0054e.m4794a(duration2), duration2);
                    }
                    if (this.f135L) {
                        f2 = -f2;
                        int streamMaxVolume = this.f130G.getStreamMaxVolume(3);
                        this.f130G.setStreamVolume(3, this.f139P + ((int) (((((float) streamMaxVolume) * f2) * 3.0f) / ((float) this.f129F))), 0);
                        mo4830a(-f2, (int) (((float) ((this.f139P * 100) / streamMaxVolume)) + (((f2 * 3.0f) * 100.0f) / ((float) this.f129F))));
                    }
                    if (this.f137N) {
                        float f3 = -f2;
                        WindowManager.LayoutParams attributes2 = C0054e.m4783d(getContext()).getAttributes();
                        float f4 = this.f140Q;
                        float f5 = (float) ((int) (((f3 * 255.0f) * 3.0f) / ((float) this.f129F)));
                        if ((f4 + f5) / 255.0f >= 1.0f) {
                            attributes2.screenBrightness = 1.0f;
                        } else if ((f4 + f5) / 255.0f <= 0.0f) {
                            attributes2.screenBrightness = 0.01f;
                        } else {
                            attributes2.screenBrightness = (f4 + f5) / 255.0f;
                        }
                        C0054e.m4783d(getContext()).setAttributes(attributes2);
                        mo4828a((int) (((this.f140Q * 100.0f) / 255.0f) + (((f3 * 3.0f) * 100.0f) / ((float) this.f129F))));
                        break;
                    }
                    break;
            }
        }
        return false;
    }

    /* renamed from: d */
    public void m4862d() {
        C0055f.m4777d();
        Log.d("JiaoZiVideoPlayer", "startVideo [" + hashCode() + "] ");
        m4859o();
        m4858p();
        ((AudioManager) getContext().getSystemService("audio")).requestAudioFocus(f121j, 3, 2);
        C0054e.m4786b(getContext()).getWindow().addFlags(128);
        TextureView$SurfaceTextureListenerC0043b.m4810a(this.f124A);
        TextureView$SurfaceTextureListenerC0043b.m4811a(C0054e.m4788a(this.f124A, this.f125B));
        TextureView$SurfaceTextureListenerC0043b.m4813a().f204e = this.f126C;
        mo4821g();
        C0055f.m4781a(this);
    }

    /* renamed from: e */
    public void m4861e() {
        Log.i("JiaoZiVideoPlayer", "onPrepared  [" + hashCode() + "] ");
        m4860h();
        mo4820i();
    }

    public void setState(int i) {
        setState(i, 0, 0);
    }

    public void setState(int i, int i2, int i3) {
        switch (i) {
            case 0:
                mo4822f();
                return;
            case 1:
                mo4821g();
                return;
            case 2:
                mo4827a(i2, (long) i3);
                return;
            case 3:
                mo4820i();
                return;
            case 4:
            default:
                return;
            case 5:
                mo4819j();
                return;
            case 6:
                mo4817l();
                return;
            case 7:
                mo4818k();
                return;
        }
    }

    /* renamed from: f */
    public void mo4822f() {
        Log.i("JiaoZiVideoPlayer", "onStateNormal  [" + hashCode() + "] ");
        this.f143m = 0;
        m4852v();
    }

    /* renamed from: g */
    public void mo4821g() {
        Log.i("JiaoZiVideoPlayer", "onStatePreparing  [" + hashCode() + "] ");
        this.f143m = 1;
        mo4814w();
    }

    /* renamed from: a */
    public void mo4827a(int i, long j) {
        this.f143m = 2;
        this.f125B = i;
        this.f146p = j;
        TextureView$SurfaceTextureListenerC0043b.m4810a(this.f124A);
        TextureView$SurfaceTextureListenerC0043b.m4811a(C0054e.m4788a(this.f124A, this.f125B));
        TextureView$SurfaceTextureListenerC0043b.m4813a().m4803h();
    }

    /* renamed from: h */
    public void m4860h() {
        long j = this.f146p;
        if (j != 0) {
            TextureView$SurfaceTextureListenerC0043b.m4812a(j);
            this.f146p = 0;
            return;
        }
        long a = C0054e.m4791a(getContext(), C0054e.m4788a(this.f124A, this.f125B));
        if (a != 0) {
            TextureView$SurfaceTextureListenerC0043b.m4812a(a);
        }
    }

    /* renamed from: i */
    public void mo4820i() {
        Log.i("JiaoZiVideoPlayer", "onStatePlaying  [" + hashCode() + "] ");
        this.f143m = 3;
        m4853u();
    }

    /* renamed from: j */
    public void mo4819j() {
        Log.i("JiaoZiVideoPlayer", "onStatePause  [" + hashCode() + "] ");
        this.f143m = 5;
        m4853u();
    }

    /* renamed from: k */
    public void mo4818k() {
        Log.i("JiaoZiVideoPlayer", "onStateError  [" + hashCode() + "] ");
        this.f143m = 7;
        m4852v();
    }

    /* renamed from: l */
    public void mo4817l() {
        Log.i("JiaoZiVideoPlayer", "onStateAutoComplete  [" + hashCode() + "] ");
        this.f143m = 6;
        m4852v();
        this.f148r.setProgress(100);
        this.f150t.setText(this.f151u.getText());
    }

    /* renamed from: a */
    public void m4868a(int i, int i2) {
        Log.d("JiaoZiVideoPlayer", "onInfo what - " + i + " extra - " + i2);
    }

    /* renamed from: b */
    public void m4865b(int i, int i2) {
        Log.e("JiaoZiVideoPlayer", "onError " + i + " - " + i2 + " [" + hashCode() + "] ");
        if (i != 38 && i2 != -38 && i != -38 && i2 != 38 && i2 != -19) {
            mo4818k();
            if (m4849z()) {
                TextureView$SurfaceTextureListenerC0043b.m4813a().m4804g();
            }
        }
    }

    @Override // android.widget.FrameLayout, android.view.View
    protected void onMeasure(int i, int i2) {
        int i3 = this.f144n;
        if (i3 == 2 || i3 == 3) {
            super.onMeasure(i, i2);
        } else if (this.f155y == 0 || this.f156z == 0) {
            super.onMeasure(i, i2);
        } else {
            int size = View.MeasureSpec.getSize(i);
            int i4 = (int) ((((float) size) * ((float) this.f156z)) / ((float) this.f155y));
            setMeasuredDimension(size, i4);
            getChildAt(0).measure(View.MeasureSpec.makeMeasureSpec(size, 1073741824), View.MeasureSpec.makeMeasureSpec(i4, 1073741824));
        }
    }

    /* renamed from: m */
    public void mo4816m() {
        Runtime.getRuntime().gc();
        Log.i("JiaoZiVideoPlayer", "onAutoCompletion  [" + hashCode() + "] ");
        onEvent(6);
        mo4846F();
        mo4847E();
        mo4845G();
        mo4817l();
        int i = this.f144n;
        if (i == 2 || i == 3) {
            m4866b();
        }
        TextureView$SurfaceTextureListenerC0043b.m4813a().m4804g();
        C0054e.m4790a(getContext(), C0054e.m4788a(this.f124A, this.f125B), 0);
    }

    /* renamed from: n */
    public void mo4815n() {
        Log.i("JiaoZiVideoPlayer", "onCompletion  [" + hashCode() + "] ");
        int i = this.f143m;
        if (i == 3 || i == 5) {
            C0054e.m4790a(getContext(), C0054e.m4788a(this.f124A, this.f125B), getCurrentPositionWhenPlaying());
        }
        m4852v();
        mo4822f();
        this.f152v.removeView(TextureView$SurfaceTextureListenerC0043b.f200a);
        TextureView$SurfaceTextureListenerC0043b.m4813a().f206g = 0;
        TextureView$SurfaceTextureListenerC0043b.m4813a().f207h = 0;
        ((AudioManager) getContext().getSystemService("audio")).abandonAudioFocus(f121j);
        C0054e.m4786b(getContext()).getWindow().clearFlags(128);
        m4856r();
        C0054e.m4792a(getContext(), f115d);
        if (TextureView$SurfaceTextureListenerC0043b.f202c != null) {
            TextureView$SurfaceTextureListenerC0043b.f202c.release();
        }
        if (TextureView$SurfaceTextureListenerC0043b.f201b != null) {
            TextureView$SurfaceTextureListenerC0043b.f201b.release();
        }
        TextureView$SurfaceTextureListenerC0043b.f200a = null;
        TextureView$SurfaceTextureListenerC0043b.f201b = null;
    }

    /* renamed from: o */
    public void m4859o() {
        m4857q();
        TextureView$SurfaceTextureListenerC0043b.f200a = new JZResizeTextureView(getContext());
        TextureView$SurfaceTextureListenerC0043b.f200a.setSurfaceTextureListener(TextureView$SurfaceTextureListenerC0043b.m4813a());
    }

    /* renamed from: p */
    public void m4858p() {
        Log.d("JiaoZiVideoPlayer", "addTextureView [" + hashCode() + "] ");
        this.f152v.addView(TextureView$SurfaceTextureListenerC0043b.f200a, new FrameLayout.LayoutParams(-1, -1, 17));
    }

    /* renamed from: q */
    public void m4857q() {
        TextureView$SurfaceTextureListenerC0043b.f201b = null;
        if (TextureView$SurfaceTextureListenerC0043b.f200a != null && TextureView$SurfaceTextureListenerC0043b.f200a.getParent() != null) {
            ((ViewGroup) TextureView$SurfaceTextureListenerC0043b.f200a.getParent()).removeView(TextureView$SurfaceTextureListenerC0043b.f200a);
        }
    }

    /* renamed from: r */
    public void m4856r() {
        ViewGroup viewGroup = (ViewGroup) C0054e.m4786b(getContext()).findViewById(16908290);
        View findViewById = viewGroup.findViewById(C0039R.C0041id.jz_fullscreen_id);
        View findViewById2 = viewGroup.findViewById(C0039R.C0041id.jz_tiny_id);
        if (findViewById != null) {
            viewGroup.removeView(findViewById);
        }
        if (findViewById2 != null) {
            viewGroup.removeView(findViewById2);
        }
        m4867a(getContext());
    }

    /* renamed from: s */
    public void m4855s() {
        C0054e.m4792a(getContext(), f115d);
        m4867a(getContext());
        ViewGroup viewGroup = (ViewGroup) C0054e.m4786b(getContext()).findViewById(16908290);
        JZVideoPlayer jZVideoPlayer = (JZVideoPlayer) viewGroup.findViewById(C0039R.C0041id.jz_fullscreen_id);
        JZVideoPlayer jZVideoPlayer2 = (JZVideoPlayer) viewGroup.findViewById(C0039R.C0041id.jz_tiny_id);
        if (jZVideoPlayer != null) {
            viewGroup.removeView(jZVideoPlayer);
            ViewGroup viewGroup2 = jZVideoPlayer.f152v;
            if (viewGroup2 != null) {
                viewGroup2.removeView(TextureView$SurfaceTextureListenerC0043b.f200a);
            }
        }
        if (jZVideoPlayer2 != null) {
            viewGroup.removeView(jZVideoPlayer2);
            ViewGroup viewGroup3 = jZVideoPlayer2.f152v;
            if (viewGroup3 != null) {
                viewGroup3.removeView(TextureView$SurfaceTextureListenerC0043b.f200a);
            }
        }
        C0055f.m4779b(null);
    }

    /* renamed from: t */
    public void m4854t() {
        Log.i("JiaoZiVideoPlayer", "onVideoSizeChanged  [" + hashCode() + "] ");
        if (TextureView$SurfaceTextureListenerC0043b.f200a != null) {
            if (this.f127D != 0) {
                TextureView$SurfaceTextureListenerC0043b.f200a.setRotation((float) this.f127D);
            }
            TextureView$SurfaceTextureListenerC0043b.f200a.setVideoSize(TextureView$SurfaceTextureListenerC0043b.m4813a().f206g, TextureView$SurfaceTextureListenerC0043b.m4813a().f207h);
        }
    }

    /* renamed from: u */
    public void m4853u() {
        Log.i("JiaoZiVideoPlayer", "startProgressTimer:  [" + hashCode() + "] ");
        m4852v();
        f123l = new Timer();
        this.f131H = new C0030a();
        f123l.schedule(this.f131H, 0, 300);
    }

    /* renamed from: v */
    public void m4852v() {
        Timer timer = f123l;
        if (timer != null) {
            timer.cancel();
        }
        C0030a aVar = this.f131H;
        if (aVar != null) {
            aVar.cancel();
        }
    }

    public void setProgressAndText(int i, long j, long j2) {
        if (!this.f132I && i != 0) {
            this.f148r.setProgress(i);
        }
        if (j != 0) {
            this.f150t.setText(C0054e.m4794a(j));
        }
        this.f151u.setText(C0054e.m4794a(j2));
    }

    public void setBufferProgress(int i) {
        if (i != 0) {
            this.f148r.setSecondaryProgress(i);
        }
    }

    /* renamed from: w */
    public void mo4814w() {
        this.f148r.setProgress(0);
        this.f148r.setSecondaryProgress(0);
        this.f150t.setText(C0054e.m4794a(0));
        this.f151u.setText(C0054e.m4794a(0));
    }

    public long getCurrentPositionWhenPlaying() {
        int i = this.f143m;
        if (i != 3 && i != 5) {
            return 0;
        }
        try {
            return TextureView$SurfaceTextureListenerC0043b.m4808c();
        } catch (IllegalStateException e) {
            e.printStackTrace();
            return 0;
        }
    }

    public long getDuration() {
        try {
            return TextureView$SurfaceTextureListenerC0043b.m4807d();
        } catch (IllegalStateException e) {
            e.printStackTrace();
            return 0;
        }
    }

    @Override // android.widget.SeekBar.OnSeekBarChangeListener
    public void onStartTrackingTouch(SeekBar seekBar) {
        Log.i("JiaoZiVideoPlayer", "bottomProgress onStartTrackingTouch [" + hashCode() + "] ");
        m4852v();
        for (ViewParent parent = getParent(); parent != null; parent = parent.getParent()) {
            parent.requestDisallowInterceptTouchEvent(true);
        }
    }

    @Override // android.widget.SeekBar.OnSeekBarChangeListener
    public void onStopTrackingTouch(SeekBar seekBar) {
        Log.i("JiaoZiVideoPlayer", "bottomProgress onStopTrackingTouch [" + hashCode() + "] ");
        onEvent(5);
        m4853u();
        for (ViewParent parent = getParent(); parent != null; parent = parent.getParent()) {
            parent.requestDisallowInterceptTouchEvent(false);
        }
        int i = this.f143m;
        if (i == 3 || i == 5) {
            long progress = (((long) seekBar.getProgress()) * getDuration()) / 100;
            TextureView$SurfaceTextureListenerC0043b.m4812a(progress);
            Log.i("JiaoZiVideoPlayer", "seekTo " + progress + " [" + hashCode() + "] ");
        }
    }

    /* renamed from: x */
    public void m4851x() {
        Log.i("JiaoZiVideoPlayer", "startWindowFullscreen  [" + hashCode() + "] ");
        m4864b(getContext());
        ViewGroup viewGroup = (ViewGroup) C0054e.m4786b(getContext()).findViewById(16908290);
        View findViewById = viewGroup.findViewById(C0039R.C0041id.jz_fullscreen_id);
        if (findViewById != null) {
            viewGroup.removeView(findViewById);
        }
        this.f152v.removeView(TextureView$SurfaceTextureListenerC0043b.f200a);
        try {
            JZVideoPlayer jZVideoPlayer = (JZVideoPlayer) getClass().getConstructor(Context.class).newInstance(getContext());
            jZVideoPlayer.setId(C0039R.C0041id.jz_fullscreen_id);
            viewGroup.addView(jZVideoPlayer, new FrameLayout.LayoutParams(-1, -1));
            jZVideoPlayer.setSystemUiVisibility(4102);
            jZVideoPlayer.setUp(this.f124A, this.f125B, 2, this.f145o);
            jZVideoPlayer.setState(this.f143m);
            jZVideoPlayer.m4858p();
            C0055f.m4779b(jZVideoPlayer);
            C0054e.m4792a(getContext(), f114c);
            mo4822f();
            jZVideoPlayer.f148r.setSecondaryProgress(this.f148r.getSecondaryProgress());
            jZVideoPlayer.m4853u();
            f119h = System.currentTimeMillis();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /* renamed from: y */
    public void m4850y() {
        Log.i("JiaoZiVideoPlayer", "startWindowTiny  [" + hashCode() + "] ");
        onEvent(9);
        int i = this.f143m;
        if (i != 0 && i != 7 && i != 6) {
            ViewGroup viewGroup = (ViewGroup) C0054e.m4786b(getContext()).findViewById(16908290);
            View findViewById = viewGroup.findViewById(C0039R.C0041id.jz_tiny_id);
            if (findViewById != null) {
                viewGroup.removeView(findViewById);
            }
            this.f152v.removeView(TextureView$SurfaceTextureListenerC0043b.f200a);
            try {
                JZVideoPlayer jZVideoPlayer = (JZVideoPlayer) getClass().getConstructor(Context.class).newInstance(getContext());
                jZVideoPlayer.setId(C0039R.C0041id.jz_tiny_id);
                FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(400, 400);
                layoutParams.gravity = 85;
                viewGroup.addView(jZVideoPlayer, layoutParams);
                jZVideoPlayer.setUp(this.f124A, this.f125B, 3, this.f145o);
                jZVideoPlayer.setState(this.f143m);
                jZVideoPlayer.m4858p();
                C0055f.m4779b(jZVideoPlayer);
                mo4822f();
            } catch (InstantiationException e) {
                e.printStackTrace();
            } catch (Exception e2) {
                e2.printStackTrace();
            }
        }
    }

    /* renamed from: z */
    public boolean m4849z() {
        return m4872A() && C0054e.m4787a(this.f124A, TextureView$SurfaceTextureListenerC0043b.m4809b());
    }

    /* renamed from: A */
    public boolean m4872A() {
        return C0055f.m4778c() != null && C0055f.m4778c() == this;
    }

    /* renamed from: B */
    public void m4871B() {
        Log.i("JiaoZiVideoPlayer", "playOnThisJzvd  [" + hashCode() + "] ");
        this.f143m = C0055f.m4780b().f143m;
        this.f125B = C0055f.m4780b().f125B;
        m4855s();
        setState(this.f143m);
        m4858p();
    }

    public void onEvent(int i) {
        Object[] objArr;
        if (f122k != null && m4849z() && (objArr = this.f124A) != null) {
            f122k.onEvent(i, C0054e.m4788a(objArr, this.f125B), this.f144n, this.f145o);
        }
    }

    public static void setMediaInterface(AbstractC0042a aVar) {
        TextureView$SurfaceTextureListenerC0043b.m4813a().f205f = aVar;
    }

    /* compiled from: TbsSdkJava */
    /* renamed from: cn.jzvd.JZVideoPlayer$a */
    /* loaded from: classes.dex */
    public class C0030a extends TimerTask {
        public C0030a() {
            JZVideoPlayer.this = r1;
        }

        @Override // java.util.TimerTask, java.lang.Runnable
        public void run() {
            if (JZVideoPlayer.this.f143m == 3 || JZVideoPlayer.this.f143m == 5) {
                JZVideoPlayer.this.post(new Runnable() { // from class: cn.jzvd.JZVideoPlayer.a.1
                    @Override // java.lang.Runnable
                    public void run() {
                        long currentPositionWhenPlaying = JZVideoPlayer.this.getCurrentPositionWhenPlaying();
                        long duration = JZVideoPlayer.this.getDuration();
                        JZVideoPlayer.this.setProgressAndText((int) ((100 * currentPositionWhenPlaying) / (duration == 0 ? 1 : duration)), currentPositionWhenPlaying, duration);
                    }
                });
            }
        }
    }
}
