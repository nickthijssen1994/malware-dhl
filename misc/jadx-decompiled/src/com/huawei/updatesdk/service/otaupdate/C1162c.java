package com.huawei.updatesdk.service.otaupdate;

import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.os.AsyncTask;
import android.util.Log;
import com.huawei.updatesdk.p022a.p023a.p025b.p026a.p027a.C1069a;
import com.huawei.updatesdk.p022a.p032b.p033a.C1089a;
import com.huawei.updatesdk.p039b.p048f.C1126b;
import java.util.Locale;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

/* compiled from: TbsSdkJava */
/* renamed from: com.huawei.updatesdk.service.otaupdate.c */
/* loaded from: classes.dex */
public class C1162c {

    /* renamed from: a */
    private static String f1861a;

    /* compiled from: TbsSdkJava */
    /* renamed from: com.huawei.updatesdk.service.otaupdate.c$a */
    /* loaded from: classes.dex */
    public interface AbstractC1163a {
        /* renamed from: a */
        void mo2546a(Boolean bool);
    }

    /* compiled from: TbsSdkJava */
    /* renamed from: com.huawei.updatesdk.service.otaupdate.c$b */
    /* loaded from: classes.dex */
    private static class AsyncTaskC1164b extends AsyncTask<Void, Void, Boolean> {

        /* renamed from: a */
        AbstractC1163a f1862a;

        public AsyncTaskC1164b(AbstractC1163a aVar) {
            this.f1862a = aVar;
        }

        /* JADX INFO: Access modifiers changed from: protected */
        /* JADX WARN: Code restructure failed: missing block: B:13:0x006b, code lost:
            if (r10 != null) goto L_0x006d;
         */
        /* JADX WARN: Code restructure failed: missing block: B:14:0x006d, code lost:
            r10.close();
         */
        /* JADX WARN: Code restructure failed: missing block: B:19:0x008e, code lost:
            if (0 == 0) goto L_0x0098;
         */
        /* JADX WARN: Code restructure failed: missing block: B:20:0x0091, code lost:
            com.huawei.updatesdk.p022a.p023a.p025b.p026a.p027a.C1069a.m2877b("AutoUpdateUtil", "cursor Execption");
         */
        /* JADX WARN: Multi-variable type inference failed */
        /* JADX WARN: Type inference failed for: r10v0, types: [java.lang.Void[]] */
        /* JADX WARN: Type inference failed for: r10v1, types: [android.database.Cursor] */
        /* JADX WARN: Type inference failed for: r10v3 */
        /* renamed from: a */
        /* Code decompiled incorrectly, please refer to instructions dump */
        public Boolean doInBackground(Void... voidArr) {
            try {
                voidArr = 0;
                Cursor cursor = null;
                boolean z = false;
                try {
                    Context a = C1089a.m2785c().m2788a();
                    cursor = a.getContentResolver().query(Uri.parse(C1162c.f1861a), null, null, null, null);
                    if (cursor == null || !cursor.moveToFirst()) {
                        Log.e("AutoUpdateUtil", "cursor == null");
                    } else {
                        boolean booleanValue = Boolean.valueOf(cursor.getString(cursor.getColumnIndex("isagree"))).booleanValue();
                        boolean booleanValue2 = Boolean.valueOf(cursor.getString(cursor.getColumnIndex("isopenautoupdate"))).booleanValue();
                        boolean booleanValue3 = Boolean.valueOf(cursor.getString(cursor.getColumnIndex("isneverreminder"))).booleanValue();
                        if (booleanValue && !booleanValue2 && !booleanValue3) {
                            z = true;
                        }
                    }
                } catch (Exception e) {
                    Log.e("AutoUpdateUtil", "close cursor error: " + e.toString());
                }
                return Boolean.valueOf(z);
            } catch (Throwable th) {
                if (voidArr != 0) {
                    try {
                        voidArr.close();
                    } catch (Exception unused) {
                        C1069a.m2877b("AutoUpdateUtil", "cursor Execption");
                    }
                }
                throw th;
            }
        }

        /* JADX INFO: Access modifiers changed from: protected */
        /* renamed from: a */
        public void onPostExecute(Boolean bool) {
            AbstractC1163a aVar = this.f1862a;
            if (aVar != null) {
                aVar.mo2546a(bool);
            }
        }
    }

    /* renamed from: a */
    public void m2547a(Context context, String str, AbstractC1163a aVar) {
        if (!C1126b.m2639e(context, str) || !C1171h.m2502g().m2506d()) {
            aVar.mo2546a(false);
            return;
        }
        AsyncTaskC1164b bVar = new AsyncTaskC1164b(aVar);
        bVar.executeOnExecutor(Executors.newSingleThreadExecutor(), new Void[0]);
        try {
            f1861a = String.format(Locale.ROOT, "content://%s.commondata/item/4", str);
            bVar.get(500, TimeUnit.MILLISECONDS);
        } catch (Exception e) {
            bVar.cancel(true);
            Log.e("AutoUpdateUtil", "init AutoUpdateInfo error: " + e.toString());
            aVar.mo2546a(false);
        }
    }
}
