package com.huawei.updatesdk.service.otaupdate;

import android.content.Context;
import android.os.AsyncTask;
import android.text.TextUtils;
import android.util.Log;
import com.huawei.updatesdk.p039b.p043b.C1113a;
import com.huawei.updatesdk.p039b.p048f.C1126b;
import java.util.Locale;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

/* compiled from: TbsSdkJava */
/* renamed from: com.huawei.updatesdk.service.otaupdate.h */
/* loaded from: classes.dex */
public class C1171h {

    /* renamed from: e */
    private static C1171h f1878e = new C1171h();

    /* renamed from: f */
    private static String f1879f;

    /* renamed from: a */
    private String f1880a;

    /* renamed from: b */
    private String f1881b;

    /* renamed from: c */
    private String f1882c = null;

    /* renamed from: d */
    private String f1883d;

    /* compiled from: TbsSdkJava */
    /* renamed from: com.huawei.updatesdk.service.otaupdate.h$b */
    /* loaded from: classes.dex */
    private static class AsyncTaskC1173b extends AsyncTask<Void, Void, String> {
        private AsyncTaskC1173b() {
        }

        /*  JADX ERROR: NullPointerException in pass: BlockProcessor
            java.lang.NullPointerException
            */
        /* renamed from: a */
        public java.lang.String doInBackground(java.lang.Void... r8) {
            /*
                r7 = this;
                java.lang.String r8 = com.huawei.updatesdk.service.otaupdate.C1171h.m2503f()
                android.net.Uri r1 = android.net.Uri.parse(r8)
                r8 = 0
                com.huawei.updatesdk.a.b.a.a r0 = com.huawei.updatesdk.p022a.p032b.p033a.C1089a.m2785c()     // Catch: Exception -> 0x006a, all -> 0x0065
                android.content.Context r0 = r0.m2788a()     // Catch: Exception -> 0x006a, all -> 0x0065
                android.content.ContentResolver r0 = r0.getContentResolver()     // Catch: Exception -> 0x006a, all -> 0x0065
                r2 = 0
                r3 = 0
                r4 = 0
                r5 = 0
                android.database.Cursor r0 = r0.query(r1, r2, r3, r4, r5)     // Catch: Exception -> 0x006a, all -> 0x0065
                if (r0 == 0) goto L_0x0051
                boolean r1 = r0.moveToFirst()     // Catch: Exception -> 0x0060, all -> 0x005e
                if (r1 == 0) goto L_0x0051
                java.lang.String r1 = "homecountry"
                int r1 = r0.getColumnIndex(r1)     // Catch: Exception -> 0x0060, all -> 0x005e
                java.lang.String r8 = r0.getString(r1)     // Catch: Exception -> 0x0060, all -> 0x005e
                com.huawei.updatesdk.service.otaupdate.h r1 = com.huawei.updatesdk.service.otaupdate.C1171h.m2502g()     // Catch: Exception -> 0x0060, all -> 0x005e
                r1.m2511a(r8)     // Catch: Exception -> 0x0060, all -> 0x005e
                com.huawei.updatesdk.service.otaupdate.h r1 = com.huawei.updatesdk.service.otaupdate.C1171h.m2502g()     // Catch: Exception -> 0x0060, all -> 0x005e
                java.lang.String r1 = r1.m2508c()     // Catch: Exception -> 0x0060, all -> 0x005e
                com.huawei.updatesdk.b.b.a r2 = com.huawei.updatesdk.p039b.p043b.C1113a.m2683c()     // Catch: Exception -> 0x0060, all -> 0x005e
                long r3 = java.lang.System.currentTimeMillis()     // Catch: Exception -> 0x0060, all -> 0x005e
                r2.m2688a(r1, r3)     // Catch: Exception -> 0x0060, all -> 0x005e
                com.huawei.updatesdk.b.b.a r2 = com.huawei.updatesdk.p039b.p043b.C1113a.m2683c()     // Catch: Exception -> 0x0060, all -> 0x005e
                r2.m2684b(r1, r8)     // Catch: Exception -> 0x0060, all -> 0x005e
                goto L_0x0058
            L_0x0051:
                java.lang.String r1 = "ServiceZoneUtil"
                java.lang.String r2 = "cursor == null: "
                android.util.Log.e(r1, r2)     // Catch: Exception -> 0x0060, all -> 0x005e
            L_0x0058:
                if (r0 == 0) goto L_0x0096
                r0.close()     // Catch: Exception -> 0x008d
                goto L_0x0096
            L_0x005e:
                r8 = move-exception
                goto L_0x0097
            L_0x0060:
                r1 = move-exception
                r6 = r0
                r0 = r8
                r8 = r6
                goto L_0x006c
            L_0x0065:
                r0 = move-exception
                r6 = r0
                r0 = r8
                r8 = r6
                goto L_0x0097
            L_0x006a:
                r1 = move-exception
                r0 = r8
            L_0x006c:
                java.lang.String r2 = "ServiceZoneUtil"
                java.lang.StringBuilder r3 = new java.lang.StringBuilder     // Catch: all -> 0x0065
                r3.<init>()     // Catch: all -> 0x0065
                java.lang.String r4 = "close cursor error: "
                r3.append(r4)     // Catch: all -> 0x0065
                java.lang.String r1 = r1.toString()     // Catch: all -> 0x0065
                r3.append(r1)     // Catch: all -> 0x0065
                java.lang.String r1 = r3.toString()     // Catch: all -> 0x0065
                android.util.Log.e(r2, r1)     // Catch: all -> 0x0065
                if (r8 == 0) goto L_0x0095
                r8.close()     // Catch: Exception -> 0x008c
                goto L_0x0095
            L_0x008c:
                r8 = r0
            L_0x008d:
                java.lang.String r0 = "ServiceZoneUtil"
                java.lang.String r1 = "cursor Execption"
                com.huawei.updatesdk.p022a.p023a.p025b.p026a.p027a.C1069a.m2877b(r0, r1)
                goto L_0x0096
            L_0x0095:
                r8 = r0
            L_0x0096:
                return r8
            L_0x0097:
                if (r0 == 0) goto L_0x00a4
                r0.close()     // Catch: Exception -> 0x009d
                goto L_0x00a4
            L_0x009d:
                java.lang.String r0 = "ServiceZoneUtil"
                java.lang.String r1 = "cursor Execption"
                com.huawei.updatesdk.p022a.p023a.p025b.p026a.p027a.C1069a.m2877b(r0, r1)
            L_0x00a4:
                throw r8
            */
            throw new UnsupportedOperationException("Method not decompiled: com.huawei.updatesdk.service.otaupdate.C1171h.AsyncTaskC1173b.doInBackground(java.lang.Void[]):java.lang.String");
        }
    }

    private C1171h() {
    }

    /* renamed from: f */
    static /* synthetic */ String m2503f() {
        return f1879f;
    }

    /* renamed from: g */
    public static C1171h m2502g() {
        return f1878e;
    }

    /* renamed from: a */
    public String m2513a() {
        return !TextUtils.isEmpty(this.f1880a) ? this.f1880a : this.f1881b;
    }

    /* renamed from: a */
    public void m2512a(Context context, String str) {
        this.f1881b = null;
        if (C1126b.m2640d(context, str)) {
            if (Math.abs(System.currentTimeMillis() - C1113a.m2683c().m2685b(str)) < 86400000) {
                m2502g().m2511a(C1113a.m2683c().m2689a(str));
                return;
            }
            f1879f = String.format(Locale.ROOT, "content://%s.commondata/item/1", str);
            AsyncTaskC1173b bVar = new AsyncTaskC1173b();
            bVar.executeOnExecutor(Executors.newSingleThreadExecutor(), new Void[0]);
            try {
                bVar.get(1000, TimeUnit.MILLISECONDS);
            } catch (Exception e) {
                bVar.cancel(true);
                Log.e("ServiceZoneUtil", "init AccountZone error: " + e.toString());
            }
        }
    }

    /* renamed from: a */
    public void m2511a(String str) {
        this.f1881b = str;
    }

    /* renamed from: b */
    public String m2510b() {
        return this.f1880a;
    }

    /* renamed from: b */
    public void m2509b(String str) {
        this.f1880a = str;
    }

    /* renamed from: c */
    public String m2508c() {
        return this.f1882c;
    }

    /* renamed from: c */
    public void m2507c(String str) {
        this.f1883d = str;
    }

    /* renamed from: d */
    public void m2505d(String str) {
        this.f1882c = str;
    }

    /* renamed from: d */
    public boolean m2506d() {
        String str = this.f1880a;
        if (str != null) {
            return str.equals(this.f1881b);
        }
        return true;
    }

    /* renamed from: e */
    public boolean m2504e() {
        return TextUtils.equals(this.f1883d, "AppTouch");
    }
}
