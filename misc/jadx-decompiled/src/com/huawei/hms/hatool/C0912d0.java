package com.huawei.hms.hatool;

import android.os.Build;
import android.text.TextUtils;
import com.huawei.secure.android.common.encrypt.keystore.aes.AesGcmKS;
import com.huawei.secure.android.common.encrypt.utils.EncryptUtil;

/* compiled from: TbsSdkJava */
/* renamed from: com.huawei.hms.hatool.d0 */
/* loaded from: classes.dex */
public class C0912d0 {

    /* renamed from: c */
    public static C0912d0 f1126c;

    /* renamed from: a */
    public String f1127a;

    /* renamed from: b */
    public String f1128b;

    /* renamed from: f */
    public static C0912d0 m3612f() {
        if (f1126c == null) {
            m3611g();
        }
        return f1126c;
    }

    /* renamed from: g */
    public static synchronized void m3611g() {
        synchronized (C0912d0.class) {
            if (f1126c == null) {
                f1126c = new C0912d0();
            }
        }
    }

    /* renamed from: a */
    public String m3620a() {
        if (TextUtils.isEmpty(this.f1127a)) {
            this.f1127a = m3616c();
        }
        return this.f1127a;
    }

    /* JADX WARN: Code restructure failed: missing block: B:10:0x003a, code lost:
        if (m3613e() != false) goto L_0x003c;
     */
    /* renamed from: a */
    /* Code decompiled incorrectly, please refer to instructions dump */
    public final String m3619a(String str) {
        String str2 = "";
        if (m3613e()) {
            str2 = AesGcmKS.decrypt("analytics_keystore", str);
        }
        if (TextUtils.isEmpty(str2)) {
            C0968y.m3317c("hmsSdk", "deCrypt work key first");
            str2 = C0911d.m3622a(str, m3614d());
            if (TextUtils.isEmpty(str2)) {
                str2 = EncryptUtil.generateSecureRandomStr(16);
                m3615c(m3617b(str2));
            } else if (m3613e()) {
                m3615c(m3617b(str2));
                C0909c0.m3630d();
            }
        }
        return str2;
    }

    /* renamed from: b */
    public final String m3617b(String str) {
        return m3613e() ? AesGcmKS.encrypt("analytics_keystore", str) : C0911d.m3621b(str, m3614d());
    }

    /* renamed from: b */
    public void m3618b() {
        String generateSecureRandomStr = EncryptUtil.generateSecureRandomStr(16);
        if (m3615c(m3617b(generateSecureRandomStr))) {
            this.f1127a = generateSecureRandomStr;
        }
    }

    /* renamed from: c */
    public final String m3616c() {
        String a = C0923g0.m3568a(AbstractC0904b.m3666f(), "Privacy_MY", "PrivacyData", "");
        if (!TextUtils.isEmpty(a)) {
            return m3619a(a);
        }
        String generateSecureRandomStr = EncryptUtil.generateSecureRandomStr(16);
        m3615c(m3617b(generateSecureRandomStr));
        return generateSecureRandomStr;
    }

    /* renamed from: c */
    public final boolean m3615c(String str) {
        C0968y.m3317c("hmsSdk", "refresh sp aes key");
        if (TextUtils.isEmpty(str)) {
            C0968y.m3317c("hmsSdk", "refreshLocalKey(): encrypted key is empty");
            return false;
        }
        C0923g0.m3564b(AbstractC0904b.m3666f(), "Privacy_MY", "PrivacyData", str);
        C0923g0.m3565b(AbstractC0904b.m3666f(), "Privacy_MY", "flashKeyTime", System.currentTimeMillis());
        return true;
    }

    /* renamed from: d */
    public final String m3614d() {
        if (TextUtils.isEmpty(this.f1128b)) {
            this.f1128b = new C0909c0().m3639a();
        }
        return this.f1128b;
    }

    /* renamed from: e */
    public final boolean m3613e() {
        return Build.VERSION.SDK_INT >= 23;
    }
}
