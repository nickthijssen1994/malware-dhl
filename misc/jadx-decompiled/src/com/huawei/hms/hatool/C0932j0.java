package com.huawei.hms.hatool;

import android.content.Context;
import android.text.TextUtils;
import com.facebook.common.util.ByteConstants;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

/* compiled from: TbsSdkJava */
/* renamed from: com.huawei.hms.hatool.j0 */
/* loaded from: classes.dex */
public class C0932j0 implements AbstractRunnableC0941m0 {

    /* renamed from: a */
    public Context f1170a = AbstractC0904b.m3666f();

    /* renamed from: b */
    public String f1171b;

    /* renamed from: c */
    public JSONObject f1172c;

    /* renamed from: d */
    public String f1173d;

    /* renamed from: e */
    public String f1174e;

    /* renamed from: f */
    public String f1175f;

    /* renamed from: g */
    public String f1176g;

    /* renamed from: h */
    public Boolean f1177h;

    public C0932j0(String str, JSONObject jSONObject, String str2, String str3, long j) {
        this.f1171b = str;
        this.f1172c = jSONObject;
        this.f1173d = str2;
        this.f1174e = str3;
        this.f1175f = String.valueOf(j);
        if (AbstractC0900a.m3684i(str2, "oper")) {
            C0919f0 a = C0915e0.m3605a().m3603a(str2, j);
            this.f1176g = a.m3588a();
            this.f1177h = Boolean.valueOf(a.m3584b());
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    @Override // java.lang.Runnable
    public void run() {
        JSONArray jSONArray;
        Object obj;
        int length;
        C0968y.m3317c("hmsSdk", "Begin to run EventRecordTask...");
        int e = AbstractC0904b.m3667e();
        int k = AbstractC0908c.m3644k(this.f1173d, this.f1174e);
        if (C0949p0.m3409a(this.f1170a, "stat_v2_1", e * ByteConstants.f596MB)) {
            C0968y.m3317c("hmsSdk", "stat sp file reach max limited size, discard new event");
            C0926h0.m3553a().m3549a("", "alltype");
            return;
        }
        C0950q qVar = new C0950q();
        qVar.m3404b(this.f1171b);
        qVar.m3407a(this.f1172c.toString());
        qVar.m3400d(this.f1174e);
        qVar.m3402c(this.f1175f);
        qVar.m3398f(this.f1176g);
        Boolean bool = this.f1177h;
        qVar.m3399e(bool == null ? null : String.valueOf(bool));
        try {
            JSONObject d = qVar.m3401d();
            String a = AbstractC0955s0.m3376a(this.f1173d, this.f1174e);
            String a2 = C0923g0.m3568a(this.f1170a, "stat_v2_1", a, "");
            try {
                if (!TextUtils.isEmpty(a2)) {
                    obj = d;
                    jSONArray = new JSONArray(a2);
                } else {
                    obj = d;
                    jSONArray = new JSONArray();
                }
            } catch (JSONException unused) {
                C0968y.m3315d("hmsSdk", "Cached data corrupted: stat_v2_1");
                obj = length;
                jSONArray = new JSONArray();
            }
            jSONArray.put(obj);
            C0923g0.m3564b(this.f1170a, "stat_v2_1", a, jSONArray.toString());
            length = jSONArray.toString().length();
            k *= 1024;
            if (length > k) {
                C0926h0.m3553a().m3549a(this.f1173d, this.f1174e);
            }
        } catch (JSONException unused2) {
            C0968y.m3314e("hmsSdk", "eventRecord toJson error! The record failed.");
        }
    }
}
