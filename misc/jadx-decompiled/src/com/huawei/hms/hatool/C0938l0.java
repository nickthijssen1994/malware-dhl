package com.huawei.hms.hatool;

import com.facebook.common.util.ByteConstants;
import java.util.List;
import org.json.JSONArray;
import org.json.JSONException;

/* compiled from: TbsSdkJava */
/* renamed from: com.huawei.hms.hatool.l0 */
/* loaded from: classes.dex */
public class C0938l0 implements AbstractRunnableC0941m0 {

    /* renamed from: a */
    public String f1218a;

    /* renamed from: b */
    public String f1219b;

    /* renamed from: c */
    public String f1220c;

    /* renamed from: d */
    public List<C0950q> f1221d;

    public C0938l0(List<C0950q> list, String str, String str2, String str3) {
        this.f1218a = str;
        this.f1219b = str2;
        this.f1220c = str3;
        this.f1221d = list;
    }

    /* renamed from: a */
    public final void m3443a() {
        C0923g0.m3567a(AbstractC0904b.m3666f(), "backup_event", AbstractC0955s0.m3375a(this.f1218a, this.f1220c, this.f1219b));
    }

    @Override // java.lang.Runnable
    public void run() {
        List<C0950q> list = this.f1221d;
        if (list == null || list.size() == 0) {
            C0968y.m3315d("hmsSdk", "failed events is empty");
            return;
        }
        if (C0949p0.m3409a(AbstractC0904b.m3666f(), "cached_v2_1", AbstractC0904b.m3664h() * ByteConstants.f596MB)) {
            C0968y.m3314e("hmsSdk", "The cacheFile is full,Can not writing data! reqID:" + this.f1219b);
            return;
        }
        String a = AbstractC0955s0.m3376a(this.f1218a, this.f1220c);
        List<C0950q> list2 = C0962w.m3347b(AbstractC0904b.m3666f(), "cached_v2_1", a).get(a);
        if (!(list2 == null || list2.size() == 0)) {
            this.f1221d.addAll(list2);
        }
        JSONArray jSONArray = new JSONArray();
        for (C0950q qVar : this.f1221d) {
            try {
                jSONArray.put(qVar.m3401d());
            } catch (JSONException unused) {
                C0968y.m3314e("hmsSdk", "event to json error");
            }
        }
        String jSONArray2 = jSONArray.toString();
        if (jSONArray2.length() > AbstractC0904b.m3667e() * ByteConstants.f596MB) {
            C0968y.m3314e("hmsSdk", "this failed data is too long,can not writing it");
            this.f1221d = null;
            return;
        }
        C0968y.m3315d("hmsSdk", "data send failed, write to cache file...reqID:" + this.f1219b);
        C0923g0.m3564b(AbstractC0904b.m3666f(), "cached_v2_1", a, jSONArray2);
        m3443a();
    }
}
