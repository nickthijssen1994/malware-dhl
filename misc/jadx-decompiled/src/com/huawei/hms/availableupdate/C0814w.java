package com.huawei.hms.availableupdate;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.view.KeyEvent;
import android.view.View;
import android.widget.ProgressBar;
import android.widget.TextView;
import com.huawei.hms.support.log.HMSLog;
import com.huawei.hms.utils.ResourceLoaderUtil;
import java.text.NumberFormat;

/* compiled from: TbsSdkJava */
/* renamed from: com.huawei.hms.availableupdate.w */
/* loaded from: classes.dex */
public class C0814w extends AbstractC0803o {

    /* renamed from: c */
    public ProgressBar f936c;

    /* renamed from: d */
    public TextView f937d;

    /* renamed from: e */
    public int f938e = 0;

    /* renamed from: f */
    public DialogInterface.OnKeyListener f939f = new DialogInterface$OnKeyListenerC0816b();

    /* compiled from: TbsSdkJava */
    /* renamed from: com.huawei.hms.availableupdate.w$b */
    /* loaded from: classes.dex */
    public static class DialogInterface$OnKeyListenerC0816b implements DialogInterface.OnKeyListener {
        public DialogInterface$OnKeyListenerC0816b() {
        }

        @Override // android.content.DialogInterface.OnKeyListener
        public boolean onKey(DialogInterface dialogInterface, int i, KeyEvent keyEvent) {
            return i == 4 && keyEvent.getRepeatCount() == 0;
        }
    }

    /* renamed from: a */
    public void m3984a(int i) {
        this.f938e = i;
    }

    /* renamed from: b */
    public void m3983b(int i) {
        ProgressBar progressBar;
        Activity e = m3992e();
        if (e == null || e.isFinishing()) {
            HMSLog.m3174w("DownloadProgress", "In setDownloading, The activity is null or finishing.");
        } else if (this.f937d != null && (progressBar = this.f936c) != null) {
            progressBar.setProgress(i);
            this.f937d.setText(NumberFormat.getPercentInstance().format((double) (((float) i) / 100.0f)));
        }
    }

    @Override // com.huawei.hms.availableupdate.AbstractC0803o
    /* renamed from: g */
    public AlertDialog mo3975g() {
        AlertDialog.Builder builder = new AlertDialog.Builder(m3992e(), m3991f());
        View inflate = View.inflate(m3992e(), ResourceLoaderUtil.getLayoutId("hms_download_progress"), null);
        builder.setView(inflate);
        builder.setCancelable(false);
        builder.setOnKeyListener(this.f939f);
        this.f936c = (ProgressBar) inflate.findViewById(ResourceLoaderUtil.getIdId("download_info_progress"));
        this.f937d = (TextView) inflate.findViewById(ResourceLoaderUtil.getIdId("hms_progress_text"));
        m3983b(this.f938e);
        return builder.create();
    }
}
