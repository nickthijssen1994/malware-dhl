package com.huawei.hms.framework.network.grs.p011a;

import android.content.Context;
import android.text.TextUtils;
import com.huawei.hms.framework.common.Logger;
import com.huawei.hms.framework.network.grs.C0851a;
import com.huawei.hms.framework.network.grs.GrsBaseInfo;
import com.huawei.hms.framework.network.grs.p013c.C0874e;
import com.huawei.hms.framework.network.grs.p013c.C0881l;
import com.huawei.hms.framework.network.grs.p016d.C0893e;
import java.util.HashMap;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

/* compiled from: TbsSdkJava */
/* renamed from: com.huawei.hms.framework.network.grs.a.a */
/* loaded from: classes.dex */
public class C0854a {

    /* renamed from: a */
    private static final String f981a;

    /* renamed from: b */
    private Map<String, Map<String, Map<String, String>>> f982b = new ConcurrentHashMap(16);

    /* renamed from: c */
    private Map<String, Long> f983c = new ConcurrentHashMap(16);

    /* renamed from: d */
    private C0856c f984d;

    /* renamed from: e */
    private C0881l f985e;

    public C0854a(C0856c cVar, C0881l lVar) {
        this.f984d = cVar;
        this.f985e = lVar;
        this.f985e.m3772a(this);
    }

    /* renamed from: a */
    private void m3880a(GrsBaseInfo grsBaseInfo, C0855b bVar, Context context, String str) {
        Long l = this.f983c.get(grsBaseInfo.getGrsParasKey(false, true, context));
        if (C0893e.m3719a(l)) {
            bVar.m3873a(2);
            return;
        }
        if (C0893e.m3718a(l, 300000)) {
            this.f985e.m3774a(grsBaseInfo, context, null, str);
        }
        bVar.m3873a(1);
    }

    /* renamed from: a */
    private void m3878a(GrsBaseInfo grsBaseInfo, String str, Context context) {
        if (C0893e.m3718a(this.f983c.get(str), 300000)) {
            this.f985e.m3774a(grsBaseInfo, context, null, null);
        }
    }

    /* renamed from: a */
    public String m3876a(GrsBaseInfo grsBaseInfo, String str, String str2, C0855b bVar, Context context) {
        Map<String, String> a = m3877a(grsBaseInfo, str, bVar, context);
        if (a == null) {
            return null;
        }
        return a.get(str2);
    }

    /* renamed from: a */
    public Map<String, String> m3877a(GrsBaseInfo grsBaseInfo, String str, C0855b bVar, Context context) {
        Map<String, Map<String, String>> map = this.f982b.get(grsBaseInfo.getGrsParasKey(false, true, context));
        if (map == null || map.isEmpty()) {
            return new HashMap();
        }
        m3880a(grsBaseInfo, bVar, context, str);
        return map.get(str);
    }

    /* renamed from: a */
    public void m3881a(GrsBaseInfo grsBaseInfo, Context context) {
        String grsParasKey = grsBaseInfo.getGrsParasKey(false, true, context);
        C0856c cVar = this.f984d;
        cVar.m3867b(grsParasKey + "time", "0");
        Map<String, Long> map = this.f983c;
        map.remove(grsParasKey + "time");
        this.f982b.remove(grsParasKey);
        this.f985e.m3768a(grsParasKey);
    }

    /* renamed from: a */
    public void m3879a(GrsBaseInfo grsBaseInfo, C0874e eVar, Context context) {
        if (eVar.m3792e() == 2) {
            Logger.m3897w(f981a, "update cache from server failed");
            return;
        }
        String grsParasKey = grsBaseInfo.getGrsParasKey(false, true, context);
        this.f984d.m3867b(grsParasKey, eVar.m3787i());
        C0856c cVar = this.f984d;
        cVar.m3867b(grsParasKey + "time", eVar.m3808a());
        this.f982b.put(grsParasKey, C0851a.m3892a(eVar.m3787i()));
        this.f983c.put(grsParasKey, Long.valueOf(Long.parseLong(eVar.m3808a())));
    }

    /* renamed from: b */
    public void m3875b(GrsBaseInfo grsBaseInfo, Context context) {
        String grsParasKey = grsBaseInfo.getGrsParasKey(false, true, context);
        String a = this.f984d.m3869a(grsParasKey, "");
        C0856c cVar = this.f984d;
        String a2 = cVar.m3869a(grsParasKey + "time", "0");
        long j = 0;
        if (!TextUtils.isEmpty(a2) && a2.matches("\\d+")) {
            try {
                j = Long.parseLong(a2);
            } catch (NumberFormatException e) {
                Logger.m3896w(f981a, "convert urlParamKey from String to Long catch NumberFormatException.", e);
            }
        }
        this.f982b.put(grsParasKey, C0851a.m3892a(a));
        this.f983c.put(grsParasKey, Long.valueOf(j));
        m3878a(grsBaseInfo, grsParasKey, context);
    }
}
