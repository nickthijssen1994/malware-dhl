package com.jingdong.aura.wrapper;

import android.annotation.SuppressLint;
import android.app.Application;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.os.Build;
import android.util.Log;
import com.jingdong.aura.core.p122b.C2135c;
import java.io.File;
import java.util.concurrent.ConcurrentHashMap;

/* compiled from: TbsSdkJava */
/* renamed from: com.jingdong.aura.wrapper.c */
/* loaded from: classes.dex */
public class C2226c {
    /* renamed from: a */
    public static String m169a(String str) {
        String str2 = "lib" + File.separator + C2135c.m548B() + File.separator;
        return str.substring(str.indexOf(str2) + str2.length());
    }

    /* renamed from: b */
    public static String m167b(String str) {
        String str2 = "lib/" + C2135c.m548B() + "/lib";
        return str.substring(str.indexOf(str2) + str2.length(), str.indexOf(".so"));
    }

    /* renamed from: a */
    public static PackageInfo m170a(Application application) {
        try {
            return application.getPackageManager().getPackageInfo(application.getPackageName(), 0);
        } catch (Throwable th) {
            Log.e("Utils", "Error to get PackageInfo >>>", th);
            return new PackageInfo();
        }
    }

    /* renamed from: b */
    public static void m168b(Application application) {
        ConcurrentHashMap concurrentHashMap = new ConcurrentHashMap();
        concurrentHashMap.put(m170a(application).versionName, "dexopt");
        SharedPreferences sharedPreferences = application.getSharedPreferences("aura_config", 0);
        if (sharedPreferences == null) {
            sharedPreferences = application.getSharedPreferences("aura_config", 0);
        }
        SharedPreferences.Editor edit = sharedPreferences.edit();
        for (String str : concurrentHashMap.keySet()) {
            edit.putString(str, (String) concurrentHashMap.get(str));
        }
        edit.commit();
    }

    /* renamed from: c */
    public static void m166c(Application application) {
        PackageInfo a = m170a(application);
        SharedPreferences.Editor edit = application.getSharedPreferences("aura_config", 0).edit();
        edit.putInt("last_version_code", a.versionCode);
        edit.putString("last_version_name", a.versionName);
        edit.putString(a.versionName, "dexopt");
        edit.commit();
    }

    /* renamed from: d */
    public static boolean m165d(Application application) {
        try {
            PackageInfo packageInfo = application.getPackageManager().getPackageInfo(application.getPackageName(), 0);
            if (packageInfo.versionCode > application.getSharedPreferences("aura_config", 0).getInt("last_version_code", 0)) {
                return true;
            }
            return false;
        } catch (PackageManager.NameNotFoundException e) {
            e.printStackTrace();
            return false;
        }
    }

    /* renamed from: e */
    public static void m164e(Application application) {
        System.setProperty("BUNDLES_INSTALLED", "true");
        application.sendBroadcast(new Intent(AuraConfig.ACTION_BROADCAST_BUNDLES_INSTALLED));
    }

    @SuppressLint({"DefaultLocale"})
    /* renamed from: a */
    public static boolean m171a() {
        if (C2135c.m532b() || !C2211a.m205a() || Build.VERSION.SDK_INT < 14) {
            return false;
        }
        if (Build.VERSION.SDK_INT < 14 || Build.BRAND == null || !Build.BRAND.toLowerCase().contains("xiaomi") || Build.HARDWARE == null || !Build.HARDWARE.toLowerCase().contains("mt65")) {
            return true;
        }
        return false;
    }
}
