package com.jingdong.aura.core.p121a;

import android.text.TextUtils;
import android.util.Log;
import com.huawei.hms.support.api.push.pushselfshow.click.SelfShowType;
import com.jingdong.aura.core.p122b.p124b.C2131b;
import com.jingdong.aura.core.util.C2201d;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import org.json.JSONArray;
import org.json.JSONObject;

/* compiled from: TbsSdkJava */
/* renamed from: com.jingdong.aura.core.a.a */
/* loaded from: classes.dex */
public class C2119a {

    /* renamed from: a */
    private static C2119a f3821a;

    /* renamed from: b */
    private final String f3822b = C2119a.class.getSimpleName();

    /* renamed from: c */
    private List<C2120a> f3823c;

    /* renamed from: d */
    private List<C2120a> f3824d;

    /* compiled from: TbsSdkJava */
    /* renamed from: com.jingdong.aura.core.a.a$a */
    /* loaded from: classes.dex */
    public static class C2120a {

        /* renamed from: a */
        public List<String> f3825a;

        /* renamed from: b */
        public List<String> f3826b;

        /* renamed from: c */
        public List<String> f3827c;

        /* renamed from: d */
        public List<String> f3828d;

        /* renamed from: e */
        public String f3829e;

        /* renamed from: f */
        public boolean f3830f;

        /* renamed from: g */
        public long f3831g;

        /* renamed from: h */
        public String f3832h;

        /* renamed from: i */
        public long f3833i;

        /* renamed from: j */
        public String f3834j;

        /* renamed from: k */
        public String f3835k;

        /* renamed from: l */
        public String f3836l;

        /* renamed from: m */
        public int f3837m;

        /* renamed from: n */
        public String f3838n;

        /* renamed from: o */
        public List<String> f3839o;

        /* renamed from: p */
        public List<String> f3840p;

        /* renamed from: q */
        public List<String> f3841q;

        /* renamed from: r */
        public List<String> f3842r;
    }

    private C2119a() {
    }

    /* renamed from: a */
    public static synchronized C2119a m656a() {
        C2119a aVar;
        synchronized (C2119a.class) {
            synchronized (C2119a.class) {
                if (f3821a == null) {
                    f3821a = new C2119a();
                }
                aVar = f3821a;
            }
            return aVar;
        }
        return aVar;
    }

    /* renamed from: a */
    public synchronized void m653a(List<C2120a> list) {
        if (list != null) {
            this.f3824d = list;
        }
    }

    /* renamed from: b */
    public synchronized boolean m648b(List<C2120a> list) {
        boolean z;
        if (this.f3823c == null && list != null) {
            this.f3823c = list;
            z = true;
        }
        Log.i(this.f3822b, "XXXXXBundleInfoList initialization failed.");
        z = false;
        return z;
    }

    /* renamed from: a */
    public synchronized List<String> m654a(String str) {
        if (!(this.f3823c == null || this.f3823c.size() == 0)) {
            for (C2120a aVar : this.f3823c) {
                if (aVar.f3829e.equals(str)) {
                    ArrayList arrayList = new ArrayList();
                    if (!(aVar == null || aVar.f3827c == null)) {
                        for (int i = 0; i < aVar.f3827c.size(); i++) {
                            if (!TextUtils.isEmpty(aVar.f3827c.get(i))) {
                                arrayList.add(aVar.f3827c.get(i));
                            }
                        }
                    }
                    return arrayList;
                }
            }
            return null;
        }
        return null;
    }

    /* renamed from: b */
    public synchronized List<String> m649b(String str) {
        if (!(this.f3823c == null || this.f3823c.size() == 0)) {
            for (C2120a aVar : this.f3823c) {
                if (aVar.f3829e.equals(str)) {
                    return aVar.f3828d;
                }
            }
            return null;
        }
        return null;
    }

    /* renamed from: c */
    public synchronized boolean m646c(String str) {
        boolean z = false;
        if (str == null) {
            return false;
        }
        if (this.f3823c != null && !this.f3823c.isEmpty()) {
            for (int i = 0; i < this.f3823c.size(); i++) {
                C2120a aVar = this.f3823c.get(i);
                if (aVar.f3829e.equals(str)) {
                    if (aVar.f3837m == 2) {
                        z = true;
                    }
                    return z;
                }
            }
            return false;
        }
        return false;
    }

    /* renamed from: b */
    public synchronized List<Map<String, String>> m650b() {
        if (this.f3824d != null && !this.f3824d.isEmpty()) {
            ArrayList arrayList = new ArrayList();
            for (C2120a aVar : this.f3824d) {
                if (aVar.f3837m == 2) {
                    HashMap hashMap = new HashMap();
                    hashMap.put("bundleName", aVar.f3829e);
                    if (!TextUtils.isEmpty(aVar.f3836l)) {
                        hashMap.put("md5", aVar.f3836l);
                    } else {
                        hashMap.put("md5", aVar.f3835k);
                    }
                    hashMap.put("size", aVar.f3831g + "");
                    hashMap.put("versionCode", aVar.f3833i + "");
                    hashMap.put("downloadUrl", aVar.f3838n);
                    arrayList.add(hashMap);
                }
            }
            return arrayList;
        }
        return null;
    }

    /* renamed from: d */
    public synchronized long m643d(String str) {
        if (this.f3823c != null && !this.f3823c.isEmpty()) {
            for (int i = 0; i < this.f3823c.size(); i++) {
                C2120a aVar = this.f3823c.get(i);
                if (aVar.f3829e.equals(str)) {
                    return aVar.f3833i;
                }
            }
            return -1;
        }
        return -1;
    }

    /* renamed from: e */
    public synchronized String m642e(String str) {
        if (this.f3823c == null || this.f3823c.size() == 0) {
            return null;
        }
        if (str == null) {
            return null;
        }
        for (C2120a aVar : this.f3823c) {
            for (String str2 : aVar.f3825a) {
                if (str2.equals(str)) {
                    return aVar.f3829e;
                }
            }
            for (String str3 : aVar.f3826b) {
                if (str.equals(str3)) {
                    return aVar.f3829e;
                }
            }
        }
        return null;
    }

    /* renamed from: c */
    public synchronized List<C2120a> m647c() {
        if (this.f3823c != null && !this.f3823c.isEmpty()) {
            return this.f3823c;
        }
        return null;
    }

    /* renamed from: d */
    public synchronized List<String> m644d() {
        if (this.f3823c != null && !this.f3823c.isEmpty()) {
            LinkedList linkedList = new LinkedList();
            for (int i = 0; i < this.f3823c.size(); i++) {
                linkedList.add(this.f3823c.get(i).f3829e);
            }
            return linkedList;
        }
        return null;
    }

    /* renamed from: f */
    public C2120a m641f(String str) {
        return m652a(this.f3823c, str);
    }

    /* renamed from: a */
    public synchronized C2120a m652a(List<C2120a> list, String str) {
        if (list != null) {
            if (!list.isEmpty()) {
                for (int i = 0; i < list.size(); i++) {
                    C2120a aVar = list.get(i);
                    if (aVar.f3829e.equals(str)) {
                        return aVar;
                    }
                }
                return null;
            }
        }
        return null;
    }

    /* renamed from: g */
    public long m640g(String str) {
        C2120a f = m641f(str);
        if (f == null) {
            return 0;
        }
        return f.f3831g;
    }

    /* renamed from: a */
    public synchronized void m655a(C2120a aVar) {
        if (aVar != null) {
            List<C2120a> c = m656a().m647c();
            if (c != null) {
                if (C2131b.m590a(aVar.f3829e) != null) {
                    c = new ArrayList<>(c);
                }
                C2120a a = m652a(c, aVar.f3829e);
                if (a == null) {
                    c.add(aVar);
                    m645c(c);
                } else if (aVar.f3833i > a.f3833i) {
                    aVar.f3837m = a.f3837m;
                    aVar.f3838n = a.f3838n;
                    c.remove(a);
                    c.add(aVar);
                    m645c(c);
                }
            } else {
                ArrayList arrayList = new ArrayList();
                arrayList.add(aVar);
                this.f3823c = arrayList;
                m645c(arrayList);
            }
        }
    }

    /* renamed from: c */
    private void m645c(List<C2120a> list) {
        if (list != null) {
            try {
                if (!list.isEmpty()) {
                    JSONArray jSONArray = new JSONArray();
                    for (C2120a aVar : list) {
                        JSONObject jSONObject = new JSONObject();
                        jSONObject.put("pkgName", aVar.f3829e);
                        jSONObject.put("verName", aVar.f3832h);
                        jSONObject.put("verCode", aVar.f3833i);
                        jSONObject.put(SelfShowType.PUSH_CMD_APP, aVar.f3834j);
                        jSONObject.put("bundleType", aVar.f3837m);
                        jSONObject.put("size", aVar.f3831g);
                        jSONObject.put("hasSO", aVar.f3830f);
                        jSONObject.put("md5", aVar.f3835k);
                        if (!TextUtils.isEmpty(aVar.f3838n)) {
                            jSONObject.put("downloadUrl", aVar.f3838n);
                        }
                        m651a(jSONObject, aVar.f3839o, "activity");
                        m651a(jSONObject, aVar.f3840p, "service");
                        m651a(jSONObject, aVar.f3841q, "provider");
                        m651a(jSONObject, aVar.f3842r, "receiver");
                        m651a(jSONObject, aVar.f3826b, "manualComponents");
                        m651a(jSONObject, aVar.f3827c, "dependency");
                        m651a(jSONObject, aVar.f3828d, "auraDependentSo");
                        jSONArray.put(jSONObject);
                    }
                    String str = C2201d.m249a().getAbsolutePath() + "/aura/updateAura.json";
                    String jSONArray2 = jSONArray.toString();
                    if (!TextUtils.isEmpty(jSONArray2)) {
                        C2201d.m248a(new ByteArrayInputStream(jSONArray2.getBytes()), new File(str));
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    /* renamed from: a */
    private static void m651a(JSONObject jSONObject, List<String> list, String str) {
        if (!(jSONObject == null || TextUtils.isEmpty(str) || list == null)) {
            JSONArray jSONArray = new JSONArray();
            for (String str2 : list) {
                jSONArray.put(str2);
            }
            jSONObject.put(str, jSONArray);
        }
    }

    /* renamed from: h */
    public C2120a m639h(String str) {
        List<C2120a> list = this.f3824d;
        if (list == null || list.isEmpty()) {
            return null;
        }
        for (int i = 0; i < this.f3824d.size(); i++) {
            C2120a aVar = this.f3824d.get(i);
            if (aVar.f3829e.equals(str)) {
                return aVar;
            }
        }
        return null;
    }

    /* renamed from: i */
    public String m638i(String str) {
        C2120a h = m639h(str);
        if (h == null) {
            return null;
        }
        return h.f3835k;
    }
}
