package com.jingdong.aura.core.p122b.p125c;

import com.jingdong.aura.core.p121a.C2119a;
import com.jingdong.aura.core.p122b.p124b.C2131b;
import com.jingdong.aura.core.util.C2203f;
import com.jingdong.aura.core.util.C2205h;
import com.jingdong.aura.wrapper.AuraConfig;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.SortedMap;
import java.util.TreeMap;

/* compiled from: TbsSdkJava */
/* renamed from: com.jingdong.aura.core.b.c.h */
/* loaded from: classes.dex */
public class C2148h {

    /* renamed from: a */
    private static final String[] f3943a = {"com.jd.lib.productdetail", "com.jd.lib.coupon", "com.jd.lib.mycoupon", "com.jd.lib.ordercenter", "com.jd.lib.live", "com.jd.mobiledd.sdk", "com.jd.lib.personal", "com.jd.lib.cart", "com.jd.lib.login", "com.jd.lib.settlement", "com.jd.lib.push", "com.jd.lib.category"};

    /* renamed from: a */
    public static SortedMap<Long, C2141c> m440a(File file) {
        if (file == null || !file.exists()) {
            return null;
        }
        TreeMap treeMap = new TreeMap();
        File[] listFiles = file.listFiles();
        if (listFiles == null) {
            return treeMap;
        }
        for (File file2 : listFiles) {
            if (file2.getName().startsWith("package")) {
                long parseLong = Long.parseLong(C2205h.m221d(file2.getName(), "_"));
                if (parseLong > 0) {
                    treeMap.put(Long.valueOf(parseLong), null);
                }
            }
        }
        return treeMap;
    }

    /* renamed from: b */
    public static long m437b(File file) {
        if (file == null || !file.exists()) {
            return 0;
        }
        long j = -1;
        File[] listFiles = file.listFiles();
        if (listFiles == null) {
            return 0;
        }
        for (File file2 : listFiles) {
            if (file2.getName().startsWith("package")) {
                long parseLong = Long.parseLong(C2205h.m221d(file2.getName(), "_"));
                if (parseLong > j) {
                    j = parseLong;
                }
            }
        }
        return j;
    }

    /* renamed from: a */
    public static String m439a(File file, long j) {
        return m435d(new File(file, "package_" + String.valueOf(j)));
    }

    /* JADX WARN: Removed duplicated region for block: B:33:0x0040 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* renamed from: d */
    /* Code decompiled incorrectly, please refer to instructions dump */
    private static String m435d(File file) {
        Throwable th;
        DataInputStream dataInputStream;
        IOException e;
        File file2 = new File(file, "meta");
        DataInputStream dataInputStream2 = null;
        if (file2.exists()) {
            try {
                dataInputStream = new DataInputStream(new FileInputStream(file2));
                try {
                    try {
                        dataInputStream.readUTF();
                        String readUTF = dataInputStream.readUTF();
                        try {
                            dataInputStream.close();
                        } catch (IOException e2) {
                            e2.printStackTrace();
                        }
                        return readUTF;
                    } catch (IOException e3) {
                        e = e3;
                        e.printStackTrace();
                        if (dataInputStream != null) {
                            try {
                                dataInputStream.close();
                            } catch (IOException e4) {
                                e4.printStackTrace();
                            }
                        }
                        return null;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    dataInputStream2 = dataInputStream;
                    if (dataInputStream2 != null) {
                        try {
                            dataInputStream2.close();
                        } catch (IOException e5) {
                            e5.printStackTrace();
                        }
                    }
                    throw th;
                }
            } catch (IOException e6) {
                e = e6;
                dataInputStream = null;
            } catch (Throwable th3) {
                th = th3;
                if (dataInputStream2 != null) {
                }
                throw th;
            }
        }
        return null;
    }

    /* renamed from: a */
    public static boolean m441a(long j, String str, long j2, String str2) {
        if (j > j2) {
            return true;
        }
        if (j != j2 || C2205h.m229a(str)) {
            return false;
        }
        return C2205h.m229a(str2) || !str.equals(str2);
    }

    /* renamed from: c */
    public static boolean m436c(File file) {
        File[] listFiles;
        if (file == null || !file.exists() || (listFiles = file.listFiles()) == null) {
            return false;
        }
        for (File file2 : listFiles) {
            if (file2.isDirectory() && file2.getName().startsWith("com.") && m434e(file2)) {
                return true;
            }
        }
        int i = 0;
        for (File file3 : listFiles) {
            String name = file3.getName();
            if (file3.isDirectory() && name.startsWith("com.") && C2131b.m590a(name) == null && m438a(name)) {
                C2203f.m237a(file3);
                i++;
                if (i >= 2) {
                    return true;
                }
            }
        }
        if (i > 0) {
            return true;
        }
        return false;
    }

    /* renamed from: e */
    private static boolean m434e(File file) {
        File[] listFiles;
        if (file == null || !file.exists() || (listFiles = file.listFiles()) == null) {
            return false;
        }
        long j = -1;
        for (File file2 : listFiles) {
            if (file2.getName().startsWith("package")) {
                long parseLong = Long.parseLong(C2205h.m221d(file2.getName(), "_"));
                if (parseLong > j) {
                    j = parseLong;
                }
            }
        }
        if (-1 == j) {
            return false;
        }
        boolean z = false;
        for (File file3 : listFiles) {
            if (file3.getName().startsWith("package") && Long.parseLong(C2205h.m221d(file3.getName(), "_")) != j) {
                C2203f.m237a(file3);
                z = true;
            }
        }
        return z;
    }

    /* renamed from: a */
    private static boolean m438a(String str) {
        if (C2205h.m229a(str)) {
            return false;
        }
        for (String str2 : AuraConfig.AUTO) {
            if (str.equals(str2)) {
                return false;
            }
        }
        if (C2119a.m656a().m646c(str)) {
            return false;
        }
        for (String str3 : f3943a) {
            if (str.equals(str3)) {
                return false;
            }
        }
        return true;
    }
}
