package com.jingdong.aura.core.p122b;

import java.util.Dictionary;
import java.util.Enumeration;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Hashtable;
import java.util.Locale;
import java.util.Map;
import org.osgi.framework.a;
import org.osgi.framework.d;
import org.osgi.framework.e;
import org.osgi.framework.f;

/* compiled from: TbsSdkJava */
/* renamed from: com.jingdong.aura.core.b.j */
/* loaded from: classes.dex */
public final class C2155j implements e {

    /* renamed from: a */
    private static final HashSet<String> f3973a = new HashSet<>();

    /* renamed from: b */
    private static long f3974b;

    /* renamed from: c */
    private a f3975c;

    /* renamed from: e */
    private final boolean f3977e;

    /* renamed from: f */
    private final Dictionary<String, Object> f3978f;

    /* renamed from: g */
    private f f3979g;

    /* renamed from: h */
    private Object f3980h;

    /* renamed from: i */
    private final Map<a, Integer> f3981i = new HashMap(0);

    /* renamed from: d */
    private HashMap<a, Object> f3976d = null;

    static {
        f3973a.add("service.id".toLowerCase(Locale.US));
        f3973a.add("objectClass".toLowerCase(Locale.US));
    }

    /* compiled from: TbsSdkJava */
    /* renamed from: com.jingdong.aura.core.b.j$a */
    /* loaded from: classes.dex */
    private final class C2157a implements f {
        private C2157a() {
        }
    }

    public C2155j(a aVar, Object obj, Dictionary<String, ?> dictionary, String[] strArr) {
        Integer num;
        int i = 0;
        if (obj instanceof d) {
            this.f3977e = true;
        } else {
            this.f3977e = false;
            m397a(obj, strArr);
        }
        this.f3975c = aVar;
        this.f3980h = obj;
        this.f3978f = dictionary == null ? new Hashtable() : new Hashtable(dictionary.size());
        if (dictionary != null) {
            Enumeration<String> keys = dictionary.keys();
            while (keys.hasMoreElements()) {
                String nextElement = keys.nextElement();
                this.f3978f.put(nextElement, dictionary.get(nextElement));
            }
        }
        this.f3978f.put("objectClass", strArr);
        Dictionary<String, Object> dictionary2 = this.f3978f;
        long j = f3974b + 1;
        f3974b = j;
        dictionary2.put("service.id", Long.valueOf(j));
        if (dictionary == null) {
            num = null;
        } else {
            num = (Integer) dictionary.get("service.ranking");
        }
        this.f3978f.put("service.ranking", Integer.valueOf(num != null ? num.intValue() : i));
        this.f3979g = new C2157a();
    }

    /* renamed from: a */
    private void m397a(Object obj, String[] strArr) {
        for (int i = 0; i < strArr.length; i++) {
            try {
                if (!Class.forName(strArr[i], false, obj.getClass().getClassLoader()).isInstance(obj)) {
                    throw new IllegalArgumentException("Service " + obj.getClass().getName() + " does not implement the interface " + strArr[i]);
                }
            } catch (ClassNotFoundException e) {
                throw new IllegalArgumentException("Interface " + strArr[i] + " implemented by service " + obj.getClass().getName() + " cannot be located: " + e.getMessage());
            }
        }
    }

    public String toString() {
        return "ServiceReference{" + this.f3980h + "}";
    }
}
