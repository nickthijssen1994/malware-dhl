package com.jingdong.aura.core.p122b;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Build;
import android.os.Handler;
import android.os.Looper;
import android.text.TextUtils;
import android.widget.Toast;
import com.jingdong.aura.R$string;
import com.jingdong.aura.core.p121a.C2119a;
import com.jingdong.aura.core.p121a.C2124d;
import com.jingdong.aura.core.p122b.p124b.C2131b;
import com.jingdong.aura.core.p122b.p125c.C2148h;
import com.jingdong.aura.core.p126ui.WelcomeActivity;
import com.jingdong.aura.core.runing.C2181k;
import com.jingdong.aura.core.runing.resource.AbstractC2182a;
import com.jingdong.aura.core.runing.resource.DelegateResourcesUtils;
import com.jingdong.aura.core.util.C2199b;
import com.jingdong.aura.core.util.C2201d;
import com.jingdong.aura.core.util.C2206i;
import com.jingdong.aura.core.util.p127a.AbstractC2197b;
import com.jingdong.aura.core.util.p127a.C2198c;
import com.jingdong.aura.wrapper.AuraDowngradeBundle;
import com.jingdong.aura.wrapper.listener.AuraDebugTimeListener;
import com.jingdong.aura.wrapper.listener.AuraPageCallback;
import com.jingdong.aura.wrapper.mhCallback.C2227a;
import com.jingdong.aura.wrapper.mhCallback.ImHCallBack;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;

/* compiled from: TbsSdkJava */
/* renamed from: com.jingdong.aura.core.b.c */
/* loaded from: classes.dex */
public class C2135c {

    /* renamed from: a */
    static Context f3898a;

    /* renamed from: c */
    private static boolean f3900c;

    /* renamed from: d */
    private static boolean f3901d;

    /* renamed from: e */
    private static boolean f3902e;

    /* renamed from: f */
    private static boolean f3903f;

    /* renamed from: g */
    private static boolean f3904g;

    /* renamed from: h */
    private static boolean f3905h;

    /* renamed from: i */
    private static boolean f3906i;

    /* renamed from: j */
    private static boolean f3907j;

    /* renamed from: k */
    private static boolean f3908k;

    /* renamed from: l */
    private static boolean f3909l;

    /* renamed from: m */
    private static boolean f3910m;

    /* renamed from: n */
    private static boolean f3911n;

    /* renamed from: o */
    private static int f3912o;

    /* renamed from: p */
    private static String f3913p;

    /* renamed from: q */
    private static boolean f3914q;

    /* renamed from: r */
    private static int f3915r;

    /* renamed from: s */
    private static int f3916s;

    /* renamed from: t */
    private static AuraDebugTimeListener f3917t;

    /* renamed from: u */
    private static AuraPageCallback f3918u;

    /* renamed from: v */
    private static AuraPageCallback f3919v = new AuraPageCallback() { // from class: com.jingdong.aura.core.b.c.1
        @Override // com.jingdong.aura.wrapper.listener.AuraPageCallback
        public Intent isRedirectToLoadingDexPage(Intent intent) {
            if (C2135c.f3918u == null) {
                return null;
            }
            return C2135c.f3918u.isRedirectToLoadingDexPage(intent);
        }

        @Override // com.jingdong.aura.wrapper.listener.AuraPageCallback
        public Intent getClassNotFoundPage(Intent intent) {
            if (C2135c.f3918u != null) {
                return C2135c.f3918u.getClassNotFoundPage(intent);
            }
            if (intent == null) {
                intent = new Intent();
            }
            intent.setClass(C2135c.f3898a, WelcomeActivity.class);
            intent.addFlags(268435456);
            return intent;
        }

        @Override // com.jingdong.aura.wrapper.listener.AuraPageCallback
        public String getProvidedBundleNotFoundPageName() {
            if (C2135c.f3918u == null) {
                return "";
            }
            return C2135c.f3918u.getProvidedBundleNotFoundPageName();
        }
    };

    /* renamed from: w */
    private static Map<String, Boolean> f3920w = new HashMap();

    /* renamed from: b */
    private static final AbstractC2197b f3899b = C2198c.m255a(C2135c.class);

    /* renamed from: k */
    public static int m503k() {
        return 3;
    }

    /* renamed from: q */
    public static String m490q() {
        return "1.2.36.15";
    }

    /* renamed from: a */
    public static void m533a(boolean z) {
        AbstractC2197b bVar = f3899b;
        bVar.mo264a("setEnabled called, enabled = " + z);
        f3900c = z;
    }

    /* renamed from: a */
    public static boolean m537a(String str) {
        if (C2131b.m590a(str) == null && C2148h.m437b(new File(m506j(), str)) <= 0) {
            return m543a(1);
        }
        return true;
    }

    /* renamed from: a */
    public static boolean m543a(int i) {
        while (!m542a(i, false)) {
            if (!C2148h.m436c(m506j())) {
                new Handler(Looper.getMainLooper()).post(new Runnable() { // from class: com.jingdong.aura.core.b.c.2
                    @Override // java.lang.Runnable
                    public void run() {
                        if (C2181k.f4098a != null) {
                            Toast.makeText(C2181k.f4098a, R$string.aura_nospace, 0).show();
                        }
                    }
                });
                return false;
            }
        }
        return true;
    }

    /* renamed from: a */
    public static boolean m542a(int i, boolean z) {
        long j = ((long) i) * 2;
        long a = C2206i.m215a(true);
        if (a >= j) {
            return true;
        }
        AbstractC2197b bVar = f3899b;
        bVar.mo264a("check disk size: currentFreeSize = " + a + "M, Need min size = " + j + "M");
        if (Build.VERSION.SDK_INT >= 18 && C2206i.m215a(false) >= j) {
            return true;
        }
        if (z) {
            new Handler(Looper.getMainLooper()).post(new Runnable() { // from class: com.jingdong.aura.core.b.c.3
                @Override // java.lang.Runnable
                public void run() {
                    if (C2181k.f4098a != null) {
                        Toast.makeText(C2181k.f4098a, R$string.aura_nospace, 0).show();
                    }
                }
            });
        }
        return false;
    }

    /* renamed from: a */
    public static boolean m544a() {
        return f3900c;
    }

    /* renamed from: b */
    public static boolean m530b(String str) {
        if (!f3920w.containsKey(str)) {
            return true;
        }
        return f3920w.get(str).booleanValue();
    }

    /* renamed from: b */
    public static void m529b(boolean z) {
        if (z) {
            C2198c.f4132a = 2;
        } else {
            C2198c.f4132a = 4;
        }
    }

    /* renamed from: c */
    public static void m525c(boolean z) {
        f3901d = z;
    }

    /* renamed from: b */
    public static boolean m532b() {
        return m528c();
    }

    /* renamed from: c */
    public static boolean m528c() {
        return f3901d;
    }

    /* renamed from: a */
    public static void m539a(AuraPageCallback auraPageCallback) {
        f3918u = auraPageCallback;
    }

    /* renamed from: d */
    public static AuraPageCallback m524d() {
        return f3919v;
    }

    /* renamed from: a */
    public static void m534a(Set<String> set, Set<String> set2) {
        C2129b.m604a(set, set2);
    }

    /* renamed from: e */
    public static String m521e() {
        return C2131b.m573h();
    }

    /* renamed from: f */
    public static String m518f() {
        return C2124d.m625b();
    }

    /* renamed from: g */
    public static String m515g() {
        return C2124d.m623c();
    }

    /* renamed from: h */
    public static String m512h() {
        return C2124d.m621d();
    }

    /* renamed from: a */
    public static void m535a(List<AuraDowngradeBundle> list) {
        C2149d.m433a(list);
    }

    /* renamed from: i */
    public static void m509i() {
        C2131b.m572i();
    }

    /* renamed from: j */
    public static File m506j() {
        return C2131b.m571j();
    }

    /* renamed from: d */
    public static void m522d(boolean z) {
        f3902e = z;
    }

    /* renamed from: l */
    public static boolean m500l() {
        return f3902e;
    }

    /* renamed from: e */
    public static void m519e(boolean z) {
        f3903f = z;
    }

    /* renamed from: m */
    public static boolean m497m() {
        return f3903f;
    }

    /* renamed from: f */
    public static void m516f(boolean z) {
        f3904g = z;
    }

    /* renamed from: n */
    public static boolean m494n() {
        return f3904g;
    }

    /* renamed from: g */
    public static void m513g(boolean z) {
        f3905h = z;
    }

    /* renamed from: o */
    public static boolean m492o() {
        return f3905h;
    }

    /* renamed from: h */
    public static void m510h(boolean z) {
        f3906i = z;
    }

    /* renamed from: p */
    public static boolean m491p() {
        return f3906i;
    }

    /* renamed from: r */
    public static int m489r() {
        return f3912o;
    }

    /* renamed from: b */
    public static void m531b(int i) {
        f3912o = i;
    }

    /* renamed from: s */
    public static boolean m488s() {
        return f3907j;
    }

    /* renamed from: i */
    public static void m507i(boolean z) {
        f3907j = z;
    }

    /* renamed from: a */
    public static void m540a(AuraDebugTimeListener auraDebugTimeListener) {
        f3917t = auraDebugTimeListener;
    }

    /* renamed from: t */
    public static AuraDebugTimeListener m487t() {
        return f3917t;
    }

    /* renamed from: u */
    public static boolean m486u() {
        return f3908k;
    }

    /* renamed from: j */
    public static void m504j(boolean z) {
        f3908k = z;
    }

    /* renamed from: v */
    public static boolean m485v() {
        return f3909l;
    }

    /* renamed from: k */
    public static void m501k(boolean z) {
        f3909l = z;
    }

    /* renamed from: c */
    public static long m526c(String str) {
        C2153h a = C2131b.m590a(str);
        if (a != null) {
            return (long) a.m401o();
        }
        long b = C2148h.m437b(new File(m506j(), str));
        if (b > 0) {
            return b;
        }
        return C2119a.m656a().m643d(str);
    }

    /* renamed from: d */
    public static boolean m523d(String str) {
        if (C2131b.m590a(str) != null) {
            return true;
        }
        long b = C2148h.m437b(new File(m506j(), str));
        long d = C2119a.m656a().m643d(str);
        if (b <= 0 || b < d) {
            return false;
        }
        return true;
    }

    /* renamed from: w */
    public static int m484w() {
        return AbstractC2182a.m300b();
    }

    /* renamed from: a */
    public static void m541a(Activity activity) {
        DelegateResourcesUtils.ensureResourcesInjected(activity);
    }

    /* renamed from: e */
    public static boolean m520e(String str) {
        return C2131b.m590a(str) != null;
    }

    /* renamed from: f */
    public static long m517f(String str) {
        return C2148h.m437b(new File(m506j(), str));
    }

    /* renamed from: g */
    public static boolean m514g(String str) {
        return C2119a.m656a().m646c(str);
    }

    /* renamed from: h */
    public static String m511h(String str) {
        return C2119a.m656a().m642e(str);
    }

    /* renamed from: x */
    public static List<Map<String, String>> m483x() {
        return C2119a.m656a().m650b();
    }

    /* renamed from: i */
    public static long m508i(String str) {
        return C2119a.m656a().m640g(str);
    }

    /* renamed from: y */
    public static boolean m482y() {
        return f3910m;
    }

    /* renamed from: l */
    public static void m498l(boolean z) {
        f3910m = z;
    }

    /* renamed from: m */
    public static void m495m(boolean z) {
        f3911n = z;
    }

    /* renamed from: z */
    public static boolean m481z() {
        return f3911n;
    }

    /* renamed from: j */
    public static List<String> m505j(String str) {
        return C2119a.m656a().m654a(str);
    }

    /* renamed from: k */
    public static ArrayList<String> m502k(String str) {
        if (TextUtils.isEmpty(str) || C2131b.m590a(str) != null) {
            return null;
        }
        List<String> a = C2119a.m656a().m654a(str);
        ArrayList<String> arrayList = new ArrayList();
        ArrayList<String> arrayList2 = new ArrayList<>();
        if (C2119a.m656a().m646c(str)) {
            arrayList.add(str);
        }
        if (a != null) {
            for (String str2 : a) {
                if (C2119a.m656a().m646c(str2)) {
                    arrayList.add(str2);
                }
            }
        }
        for (String str3 : arrayList) {
            if (!m523d(str3)) {
                arrayList2.add(str3);
            }
        }
        return arrayList2;
    }

    /* renamed from: l */
    public static long m499l(String str) {
        return C2119a.m656a().m643d(str);
    }

    /* renamed from: A */
    public static SharedPreferences m549A() {
        return C2199b.m252a();
    }

    /* renamed from: B */
    public static String m548B() {
        return f3913p;
    }

    /* renamed from: m */
    public static void m496m(String str) {
        f3913p = str;
    }

    /* renamed from: c */
    public static void m527c(int i) {
        f3916s = i;
    }

    /* renamed from: a */
    public static void m536a(String str, File file) {
        if (file == null || !file.exists()) {
            AbstractC2197b bVar = f3899b;
            bVar.mo261b(file + ": not exist!");
            throw new RuntimeException(file + ": not exist!");
        }
        C2153h a = C2131b.m590a(str);
        if (a != null) {
            File c = a.m410f().mo476b().m463c();
            if (c.exists()) {
                File file2 = new File(c, "lib");
                if (!file2.exists()) {
                    file2.mkdirs();
                }
                String name = file.getName();
                File file3 = new File(file2, name);
                File file4 = new File(file2, name + ".md5");
                if (file3.exists() && file4.exists()) {
                    f3899b.mo261b("file exist!");
                    if (C2201d.m246a(file3.getAbsolutePath(), file.getAbsolutePath())) {
                        f3899b.mo261b("file exist, and md5 is same，not install again!");
                        return;
                    }
                    f3899b.mo261b("file exist, but md5 not same, so install!");
                }
                file3.delete();
                file4.delete();
                C2201d.m248a(new FileInputStream(file), file3);
                DataOutputStream dataOutputStream = new DataOutputStream(new FileOutputStream(file4));
                dataOutputStream.writeUTF(C2201d.m247a(file.getAbsolutePath()));
                dataOutputStream.close();
                return;
            }
            AbstractC2197b bVar2 = f3899b;
            bVar2.mo261b(str + ":revisionDir not exist!");
            throw new RuntimeException("bundle dir not exist!");
        }
        AbstractC2197b bVar3 = f3899b;
        bVar3.mo261b(str + ":bundle not install!");
        throw new RuntimeException(str + ": not installed");
    }

    /* renamed from: a */
    public static void m538a(ImHCallBack imHCallBack) {
        C2227a.m163a().m161a(imHCallBack);
    }

    /* renamed from: C */
    public static int m547C() {
        return f3915r;
    }

    /* renamed from: D */
    public static boolean m546D() {
        return f3914q;
    }

    /* renamed from: n */
    public static void m493n(String str) {
        int parseInt;
        try {
            if (!TextUtils.isEmpty(str)) {
                String trim = str.trim();
                if (!TextUtils.isEmpty(trim) && (parseInt = Integer.parseInt(trim, 16)) > 0) {
                    if ((parseInt & 1) > 0) {
                        f3915r = 24;
                    } else {
                        f3915r = 26;
                    }
                    if ((parseInt & 2) > 0) {
                        f3914q = true;
                    } else {
                        f3914q = false;
                    }
                    AbstractC2197b bVar = f3899b;
                    bVar.mo261b("dex2oatQuickenSdkVersion:" + f3915r);
                    AbstractC2197b bVar2 = f3899b;
                    bVar2.mo261b("updateConfigurations:" + f3914q);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
