package com.jingdong.aura.core.p122b;

import android.app.ActivityManager;
import android.app.Application;
import android.app.Instrumentation;
import android.os.Build;
import android.os.Process;
import androidx.databinding.DataBinderMapperProxy;
import com.jingdong.aura.core.p122b.p124b.C2131b;
import com.jingdong.aura.core.reflection.C2163a;
import com.jingdong.aura.core.reflection.C2166b;
import com.jingdong.aura.core.reflection.C2167c;
import com.jingdong.aura.core.reflection.Hack;
import com.jingdong.aura.core.runing.C2169a;
import com.jingdong.aura.core.runing.C2170b;
import com.jingdong.aura.core.runing.C2173c;
import com.jingdong.aura.core.runing.C2175e;
import com.jingdong.aura.core.runing.C2177g;
import com.jingdong.aura.core.runing.C2181k;
import com.jingdong.aura.core.runing.InstrumentationC2178h;
import com.jingdong.aura.core.util.p127a.AbstractC2197b;
import com.jingdong.aura.core.util.p127a.C2198c;
import com.jingdong.aura.wrapper.AuraInitializer;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.util.List;
import java.util.Properties;
import org.osgi.framework.a;
import org.osgi.framework.b;
import org.osgi.framework.c;

/* compiled from: TbsSdkJava */
/* renamed from: com.jingdong.aura.core.b.a */
/* loaded from: classes.dex */
public class C2125a {

    /* renamed from: a */
    private static final AbstractC2197b f3853a = C2198c.m255a(C2125a.class);

    /* renamed from: d */
    private static C2125a f3854d;

    /* renamed from: b */
    private C2170b f3855b;

    /* renamed from: c */
    private C2177g f3856c;

    /* renamed from: e */
    private AuraInitializer.AbstractC2210a f3857e;

    /* renamed from: f */
    private DataBinderMapperProxy f3858f;

    /* renamed from: a */
    public static C2125a m620a() {
        if (f3854d == null) {
            f3854d = new C2125a();
        }
        return f3854d;
    }

    /* JADX WARN: Removed duplicated region for block: B:22:0x00b8 A[Catch: Exception -> 0x00c7, TryCatch #0 {Exception -> 0x00c7, blocks: (B:19:0x00a2, B:20:0x00b2, B:22:0x00b8, B:24:0x00c2), top: B:28:0x00a2 }] */
    /* renamed from: a */
    /* Code decompiled incorrectly, please refer to instructions dump */
    public void m619a(Application application) {
        C2169a aVar;
        Object obj;
        f3853a.mo264a("init called");
        if (C2135c.m544a() && application != null) {
            C2135c.f3898a = application;
            String packageName = application.getPackageName();
            C2166b.m361a();
            ClassLoader classLoader = C2125a.class.getClassLoader();
            C2175e eVar = new C2175e(classLoader);
            C2131b.m591a(classLoader);
            C2181k.f4099b = eVar;
            C2181k.f4101d = application.getResources();
            C2181k.f4098a = application;
            C2163a.m368a(packageName, eVar);
            C2163a.m372a((Instrumentation) new InstrumentationC2178h(C2163a.m364d(), application.getBaseContext()));
            C2163a.m369a(packageName, application);
            this.f3855b = new C2170b();
            C2131b.m585a((b) this.f3855b);
            this.f3856c = new C2177g();
            C2131b.m584a((c) this.f3856c);
            try {
                aVar = new C2169a();
            } catch (Throwable unused) {
            }
            try {
                if (Build.VERSION.SDK_INT <= 25 && (Build.VERSION.SDK_INT != 25 || Build.VERSION.PREVIEW_SDK_INT <= 0)) {
                    obj = C2166b.f4017V.m381a((Hack.C2161d<Object, Object>) C2166b.f4013R.m389a());
                    C2166b.f4016U.m380a((Hack.C2161d<Object, Object>) obj, (C2167c.AbstractC2168a<?>) aVar);
                    C2163a.m367b();
                    C2163a.m363e();
                    this.f3858f = C2163a.m362f();
                    int myPid = Process.myPid();
                    for (ActivityManager.RunningAppProcessInfo runningAppProcessInfo : ((ActivityManager) application.getSystemService("activity")).getRunningAppProcesses()) {
                        if (runningAppProcessInfo.pid == myPid) {
                            C2181k.f4102e = runningAppProcessInfo.processName;
                        }
                    }
                    return;
                }
                while (r5.hasNext()) {
                }
                return;
            } catch (Exception unused2) {
                return;
            }
            obj = C2166b.f4018W.m381a((Hack.C2161d<Object, Object>) C2166b.f4014S.m389a());
            C2166b.f4016U.m380a((Hack.C2161d<Object, Object>) obj, (C2167c.AbstractC2168a<?>) aVar);
            C2163a.m367b();
            C2163a.m363e();
            this.f3858f = C2163a.m362f();
            int myPid2 = Process.myPid();
        }
    }

    /* renamed from: a */
    public void m618a(Application application, Properties properties) {
        f3853a.mo264a("startup called");
        if (C2135c.m544a()) {
            C2131b.m593a(application, properties);
            DataBinderMapperProxy dataBinderMapperProxy = this.f3858f;
            if (dataBinderMapperProxy != null) {
                C2131b.m581b((b) dataBinderMapperProxy);
            }
        }
    }

    /* renamed from: a */
    public void m612a(b bVar) {
        C2131b.m581b(bVar);
    }

    /* renamed from: b */
    public List<a> m611b() {
        f3853a.mo264a("getBundles called");
        return C2131b.m574g();
    }

    /* renamed from: a */
    public a m616a(String str) {
        f3853a.mo264a("getBundle called");
        return C2131b.m590a(str);
    }

    /* renamed from: b */
    public File m610b(String str) {
        C2153h a = C2131b.m590a(str);
        if (a != null) {
            return a.m414b().mo480a();
        }
        return null;
    }

    /* renamed from: a */
    public void m615a(String str, File file, long j, String str2) {
        AbstractC2197b bVar = f3853a;
        bVar.mo264a("installBundle called file.  location=" + str + ", versionCode=" + j + ", md5=" + str2);
        C2150e.m429a("AuraMaiDianInstallBundle", str, (int) j, "", "installBundleFile");
        C2131b.m588a(str, file, null, j, str2);
    }

    /* renamed from: a */
    public void m614a(String str, InputStream inputStream, long j, String str2) {
        AbstractC2197b bVar = f3853a;
        bVar.mo264a("installBundle called stream. location=" + str + ", versionCode=" + j + ", md5=" + str2);
        C2150e.m429a("AuraMaiDianInstallBundle", str, (int) j, "", "installBundleInputStream");
        C2131b.m588a(str, null, inputStream, j, str2);
    }

    /* renamed from: c */
    public void m608c(String str) {
        C2173c.m334c(str);
    }

    /* renamed from: a */
    public boolean m613a(String str, String str2, int i, String str3) {
        Throwable th;
        FileNotFoundException e;
        Throwable th2;
        FileInputStream fileInputStream;
        f3853a.mo264a("Update called");
        FileInputStream fileInputStream2 = null;
        if (str2 == null) {
            f3853a.mo258c("path is null");
            C2150e.m430a(str, i, "bundle update failed, because apkFile path is null form Aura.update for bundle" + str, "Aura.update", (Throwable) null);
            return false;
        } else if (!C2135c.m544a()) {
            C2150e.m430a(str, i, "bundle update failed, because AuraConfigInternal.isUseAura is false form Aura.update for bundle" + str, "Aura.update", (Throwable) null);
            return false;
        } else if (!C2135c.m543a(1)) {
            C2150e.m430a(str, i, "bundle update failed, because disk size not enough  form Aura.update for bundle" + str, "Aura.update", (Throwable) null);
            return false;
        } else {
            File file = new File(str2);
            try {
                try {
                    if (!file.exists()) {
                        AbstractC2197b bVar = f3853a;
                        bVar.mo258c("path not exists. " + str2);
                        C2150e.m430a(str, i, "bundle update failed, because apkFile not exist form Aura.update for bundle" + str, "Aura.update", (Throwable) null);
                        return false;
                    }
                    try {
                        fileInputStream = new FileInputStream(file);
                    } catch (FileNotFoundException e2) {
                        e = e2;
                    } catch (Throwable th3) {
                        th2 = th3;
                    }
                    try {
                        boolean a = C2131b.m587a(str, fileInputStream, i, str3);
                        try {
                            fileInputStream.close();
                        } catch (IOException e3) {
                            e3.printStackTrace();
                        }
                        return a;
                    } catch (FileNotFoundException e4) {
                        e = e4;
                        fileInputStream2 = fileInputStream;
                        C2150e.m430a(str, i, "bundle update failed 1 " + str, "Aura.update", e);
                        e.printStackTrace();
                        if (fileInputStream2 != null) {
                            fileInputStream2.close();
                        }
                        return false;
                    } catch (Throwable th4) {
                        th2 = th4;
                        fileInputStream2 = fileInputStream;
                        C2150e.m430a(str, i, "update bundle failed 2" + str, "Aura.update", th2);
                        th2.printStackTrace();
                        if (fileInputStream2 != null) {
                            fileInputStream2.close();
                        }
                        return false;
                    }
                } catch (IOException e5) {
                    e5.printStackTrace();
                }
            } catch (Throwable th5) {
                th = th5;
            }
        }
    }

    /* renamed from: c */
    public AuraInitializer.AbstractC2210a m609c() {
        return this.f3857e;
    }

    /* renamed from: a */
    public void m617a(AuraInitializer.AbstractC2210a aVar) {
        this.f3857e = aVar;
    }
}
