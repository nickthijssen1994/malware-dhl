package com.jingdong.sdk.uuid.p131a;

import android.content.Context;
import android.os.Build;
import android.os.Environment;
import android.text.TextUtils;
import com.jingdong.sdk.uuid.AbstractC2263b;
import com.jingdong.sdk.uuid.C2271d;
import com.jingdong.sdk.uuid.C2272e;
import com.jingdong.sdk.uuid.C2273f;
import com.jingdong.sdk.uuid.C2275h;
import com.jingdong.sdk.uuid.Request;
import java.io.File;
import java.io.FileOutputStream;
import java.io.RandomAccessFile;
import java.util.UUID;

/* renamed from: com.jingdong.sdk.uuid.a.d */
/* loaded from: classes.dex */
public class C2261d implements AbstractC2263b {
    /* renamed from: a */
    private static String m46a() {
        return UUID.randomUUID().toString().replaceAll("-", "");
    }

    /* renamed from: a */
    public static String m45a(Context context) {
        if (!C2275h.m5a(context)) {
            return "";
        }
        try {
            File b = m43b(context);
            if (!b.exists()) {
                m42b(b);
            }
            return m44a(b);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    /* renamed from: a */
    private static String m44a(File file) {
        RandomAccessFile randomAccessFile = new RandomAccessFile(file, "r");
        byte[] bArr = new byte[(int) randomAccessFile.length()];
        randomAccessFile.readFully(bArr);
        randomAccessFile.close();
        return new String(bArr);
    }

    /* renamed from: b */
    private static File m43b(Context context) {
        File file = Environment.getExternalStorageState().equals("mounted") ? new File(Environment.getExternalStorageDirectory(), "Android/device") : new File(context.getFilesDir(), "Android/device");
        if (!file.exists()) {
            file.mkdirs();
        }
        return new File(file, ".DEVICE");
    }

    /* renamed from: b */
    private static void m42b(File file) {
        FileOutputStream fileOutputStream = new FileOutputStream(file);
        fileOutputStream.write(m46a().getBytes());
        fileOutputStream.close();
    }

    @Override // com.jingdong.sdk.uuid.AbstractC2263b
    /* renamed from: a */
    public C2273f mo38a(AbstractC2263b.AbstractC2264a aVar) {
        C2271d.m26a("Enter RandomUUIDInterceptor intercept()");
        Request a = aVar.mo37a();
        C2272e.m18a(a);
        String a2 = C2272e.m19a().m17a("randomUUID");
        if (TextUtils.isEmpty(a2)) {
            if (Build.VERSION.SDK_INT <= 29 && a.isFileCacheEnabled()) {
                a2 = m45a(a.getContext());
            }
            if (TextUtils.isEmpty(a2)) {
                a2 = m46a();
            }
            C2272e.m19a().m16a("randomUUID", a2);
        }
        return new C2273f(a, false).m12a(a2).m11a(false);
    }
}
