package com.p051jd.fireeye.security.fireeye;

import android.annotation.SuppressLint;
import android.content.ClipData;
import android.content.ClipboardManager;
import android.content.Context;
import android.hardware.Sensor;
import android.os.Build;
import android.provider.Settings;
import android.text.TextUtils;
import android.util.Base64;
import com.facebook.react.uimanager.ViewProps;
import com.huawei.hms.support.api.push.pushselfshow.utils.PushSelfShowConstant;
import com.jingdong.common.utils.Configuration;
import com.p051jd.fireeye.common.C1455a;
import com.p051jd.fireeye.common.C1456b;
import com.p051jd.fireeye.common.C1457c;
import com.p051jd.fireeye.common.C1461f;
import com.p051jd.fireeye.common.C1462g;
import com.p051jd.fireeye.common.C1463h;
import com.p051jd.fireeye.common.C1464i;
import com.p051jd.fireeye.common.C1465j;
import com.p051jd.fireeye.common.C1466k;
import com.p051jd.fireeye.common.C1467l;
import com.p051jd.fireeye.common.C1468m;
import com.p051jd.fireeye.common.C1470o;
import com.p051jd.fireeye.common.C1471p;
import com.p051jd.fireeye.common.C1481q;
import com.p051jd.fireeye.common.C1482r;
import com.p051jd.fireeye.common.C1483s;
import com.p051jd.fireeye.network.AbstractC1495h;
import com.p051jd.fireeye.network.C1494g;
import com.p051jd.fireeye.security.C1498b;
import com.p051jd.fireeye.security.C1499c;
import com.p051jd.fireeye.security.C1500d;
import com.p051jd.lib.p083un.utils.UnTimeUtils;
import com.p051jd.push.common.constant.Constants;
import java.util.HashMap;
import java.util.Hashtable;
import java.util.List;
import org.json.JSONException;
import org.json.JSONObject;

/* compiled from: TbsSdkJava */
/* renamed from: com.jd.fireeye.security.fireeye.a */
/* loaded from: classes.dex */
public final class C1503a {

    /* renamed from: a */
    private static final String f2731a;

    /* renamed from: b */
    private static final String f2732b;

    /* renamed from: c */
    private static final String f2733c;

    /* renamed from: d */
    private static final String f2734d;

    /* renamed from: e */
    private static final String f2735e;

    /* renamed from: f */
    private static final String f2736f;

    /* renamed from: g */
    private static final C1503a f2737g = new C1503a();

    /* renamed from: h */
    private Hashtable<String, Boolean> f2738h = new Hashtable<>();

    /* renamed from: i */
    private String f2739i = "";

    /* renamed from: b */
    private static String m1606b() {
        return C1498b.m1624e() ? f2733c : f2732b;
    }

    /* renamed from: c */
    private static String m1601c() {
        return C1498b.m1624e() ? f2735e : f2734d;
    }

    /* renamed from: a */
    public static C1503a m1615a() {
        return f2737g;
    }

    private C1503a() {
    }

    /* renamed from: a */
    public final void m1608a(JSONObject jSONObject, FireEyeCallback fireEyeCallback) {
        if (jSONObject == null) {
            C1462g.m1892a(f2731a, "event param is NULL!");
            return;
        }
        String i = C1498b.m1620i();
        this.f2739i = m1597f();
        C1504b bVar = new C1504b(this, C1498b.m1624e() ? f2735e : f2734d, jSONObject);
        bVar.m1679a((AbstractC1495h) new C1505c(this, fireEyeCallback));
        bVar.m1682a(UnTimeUtils.MIN);
        bVar.m1677a("EventRequest." + i + "." + System.currentTimeMillis());
        bVar.m1666d();
    }

    /* renamed from: b */
    public final void m1603b(JSONObject jSONObject, FireEyeCallback fireEyeCallback) {
        if (jSONObject == null) {
            C1462g.m1892a(f2731a, "event param is NULL!");
            return;
        }
        String i = C1498b.m1620i();
        String optString = jSONObject.optString("devicecode");
        if (!TextUtils.isEmpty(optString)) {
            C1498b.m1632a(optString);
        }
        String optString2 = jSONObject.optString("oaId");
        if (!TextUtils.isEmpty(optString2)) {
            C1498b.m1629b(optString2);
        }
        Boolean bool = this.f2738h.get(i);
        if ((bool == null || !bool.booleanValue()) && !C1481q.m1718b(i, false)) {
            this.f2739i = m1597f();
            this.f2738h.put(i, Boolean.TRUE);
            C1506d dVar = new C1506d(this, C1498b.m1624e() ? f2733c : f2732b, jSONObject);
            dVar.m1679a((AbstractC1495h) new C1507e(this, fireEyeCallback));
            dVar.m1682a(UnTimeUtils.MIN);
            dVar.m1677a("ActiveRequest." + i + "." + System.currentTimeMillis());
            dVar.m1666d();
        }
    }

    /* renamed from: a */
    private static void m1610a(String str) {
        C1481q.m1722a(C1498b.m1620i(), true);
        if (!TextUtils.isEmpty(str)) {
            C1481q.m1723a("activeUuid", str);
        }
    }

    /* renamed from: a */
    private void m1613a(C1494g gVar, FireEyeCallback fireEyeCallback, boolean z) {
        try {
            JSONObject b = gVar.m1647b();
            String str = "";
            if (b != null) {
                str = b.optString("code");
                if (C1462g.f2620a) {
                    C1462g.m1888b(f2731a, String.format("fire report response json: \n%s", C1463h.m1884a(b.toString())));
                }
            }
            if (TextUtils.equals("0", str)) {
                if (C1462g.f2620a) {
                    C1462g.m1888b(f2731a, C1498b.m1620i() + " report success");
                }
                if (z) {
                    String optString = b.optString("activeUuid");
                    C1481q.m1722a(C1498b.m1620i(), true);
                    if (!TextUtils.isEmpty(optString)) {
                        C1481q.m1723a("activeUuid", optString);
                    }
                }
                if (fireEyeCallback == null) {
                    return;
                }
                if (fireEyeCallback instanceof DeepLinkFireEyeCallback) {
                    ((DeepLinkFireEyeCallback) fireEyeCallback).onSuccess(b);
                } else {
                    fireEyeCallback.onSuccess();
                }
            } else {
                if (C1462g.f2620a) {
                    C1462g.m1892a(f2731a, C1498b.m1620i() + " report failed");
                }
                if (fireEyeCallback != null) {
                    fireEyeCallback.onFail();
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /* renamed from: a */
    private JSONObject m1609a(JSONObject jSONObject) {
        return C1456b.m1917b(m1607a(jSONObject, false).toString());
    }

    /* renamed from: b */
    private JSONObject m1604b(JSONObject jSONObject) {
        return C1456b.m1917b(m1607a(jSONObject, true).toString());
    }

    /* renamed from: a */
    private JSONObject m1607a(JSONObject jSONObject, boolean z) {
        try {
            if (C1462g.f2620a) {
                C1462g.m1888b(f2731a, String.format("active json param: \n%s", C1463h.m1884a(jSONObject.toString())));
            }
            JSONObject jSONObject2 = new JSONObject();
            jSONObject2.put(Configuration.UNION_ID, C1498b.m1630b());
            jSONObject2.put(Configuration.SUB_UNION_ID, C1498b.m1628c());
            jSONObject2.put("devicecode", C1498b.m1635a());
            jSONObject2.put("sdkverison", C1457c.f2604a);
            jSONObject2.put("osversion", C1455a.m1935a());
            jSONObject2.put("appversion", C1455a.m1930b(C1498b.f2700a));
            jSONObject2.put("clientos", "android");
            jSONObject2.put("brand", Build.BRAND);
            jSONObject2.put("idfa", "");
            jSONObject2.put("model", Build.MODEL);
            jSONObject2.put("currenttime", C1483s.m1705a());
            jSONObject2.put("originalsubunionId", C1466k.m1873a());
            jSONObject2.put("imei", m1599d());
            jSONObject2.put("mac", m1598e());
            jSONObject2.put("imsi", C1468m.m1855g(C1498b.f2700a));
            jSONObject2.put("imeiAndMeid", "");
            jSONObject2.put(Configuration.PARTNER, C1498b.m1626d());
            jSONObject2.put("networkinfo", C1465j.m1875a(C1498b.f2700a));
            jSONObject2.put("installtionid", C1498b.m1623f());
            jSONObject2.put("androidId", C1482r.m1712c(C1498b.f2700a));
            jSONObject2.put("ua", C1468m.m1843m(C1498b.f2700a));
            jSONObject2.put("oaId", C1498b.m1619j());
            jSONObject2.put("yodaId", this.f2739i);
            if (C1498b.f2700a != null) {
                HashMap a = C1499c.m1616a(C1498b.f2700a);
                jSONObject2.put("smartChannelId", a.get(C1499c.f2713a));
                jSONObject2.put("smartClickTime", a.get(C1499c.f2714b));
                jSONObject2.put("smartInstallTime", a.get(C1499c.f2715c));
            }
            try {
                jSONObject2.put("appkey", C1498b.m1620i());
                jSONObject2.put("gisinfo", jSONObject.optString("gisinfo"));
                jSONObject2.put("isFromOpenApp", jSONObject.optBoolean("isFromOpenApp"));
                if (z) {
                    jSONObject2.put("rcode", m1614a(C1498b.f2700a, z));
                } else {
                    jSONObject2.put("activeUuid", C1481q.m1719b("activeUuid", ""));
                    jSONObject2.put("eventNumber", jSONObject.optString("eventNumber"));
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            return jSONObject2;
        } catch (Exception e2) {
            e2.printStackTrace();
            return new JSONObject();
        }
    }

    /* renamed from: d */
    private static String m1599d() {
        try {
            return C1468m.m1848k();
        } catch (Exception unused) {
            return "";
        }
    }

    /* renamed from: e */
    private static String m1598e() {
        try {
            return C1468m.m1846l();
        } catch (Exception unused) {
            return "";
        }
    }

    /* renamed from: f */
    private static String m1597f() {
        String charSequence;
        try {
            ClipboardManager clipboardManager = (ClipboardManager) C1498b.f2700a.getSystemService("clipboard");
            if (clipboardManager == null) {
                return "";
            }
            ClipData primaryClip = clipboardManager.getPrimaryClip();
            if (primaryClip == null) {
                return PushSelfShowConstant.ACTION_APP_OUT_OF_DATE_EVENT_ID;
            }
            if (primaryClip.getItemCount() <= 0) {
                return "";
            }
            for (int i = 0; i < primaryClip.getItemCount(); i++) {
                ClipData.Item itemAt = primaryClip.getItemAt(i);
                if (!(itemAt == null || itemAt.getText() == null || (charSequence = itemAt.getText().toString()) == null || charSequence.length() != 34 || charSequence.charAt(0) != charSequence.charAt(33))) {
                    return charSequence;
                }
            }
            return "";
        } catch (Exception e) {
            e.printStackTrace();
            return "";
        }
    }

    /* renamed from: b */
    private void m1602b(JSONObject jSONObject, boolean z) throws JSONException {
        jSONObject.put(Configuration.UNION_ID, C1498b.m1630b());
        jSONObject.put(Configuration.SUB_UNION_ID, C1498b.m1628c());
        jSONObject.put("devicecode", C1498b.m1635a());
        jSONObject.put("sdkverison", C1457c.f2604a);
        jSONObject.put("osversion", C1455a.m1935a());
        jSONObject.put("appversion", C1455a.m1930b(C1498b.f2700a));
        jSONObject.put("clientos", "android");
        jSONObject.put("brand", Build.BRAND);
        jSONObject.put("idfa", "");
        jSONObject.put("model", Build.MODEL);
        jSONObject.put("currenttime", C1483s.m1705a());
        jSONObject.put("originalsubunionId", C1466k.m1873a());
        jSONObject.put("imei", m1599d());
        jSONObject.put("mac", m1598e());
        jSONObject.put("imsi", C1468m.m1855g(C1498b.f2700a));
        jSONObject.put("imeiAndMeid", "");
        jSONObject.put(Configuration.PARTNER, C1498b.m1626d());
        jSONObject.put("networkinfo", C1465j.m1875a(C1498b.f2700a));
        jSONObject.put("installtionid", C1498b.m1623f());
        jSONObject.put("androidId", C1482r.m1712c(C1498b.f2700a));
        jSONObject.put("ua", C1468m.m1843m(C1498b.f2700a));
        jSONObject.put("oaId", C1498b.m1619j());
        jSONObject.put("yodaId", this.f2739i);
        if (C1498b.f2700a != null) {
            HashMap a = C1499c.m1616a(C1498b.f2700a);
            jSONObject.put("smartChannelId", a.get(C1499c.f2713a));
            jSONObject.put("smartClickTime", a.get(C1499c.f2714b));
            jSONObject.put("smartInstallTime", a.get(C1499c.f2715c));
        }
    }

    /* renamed from: c */
    private static void m1600c(JSONObject jSONObject) throws Exception {
        String str = "";
        String b = C1481q.m1719b(f2736f, "");
        if (!TextUtils.isEmpty(b)) {
            str = new String(Base64.decode(b.getBytes(), 2));
        }
        jSONObject.put("lastUUID", str);
    }

    @SuppressLint({"NewApi"})
    /* renamed from: a */
    private JSONObject m1614a(Context context, boolean z) throws Exception {
        JSONObject jSONObject;
        JSONObject jSONObject2;
        JSONObject jSONObject3 = new JSONObject();
        String a = C1482r.m1716a(context);
        jSONObject3.put("deviceId", "");
        jSONObject3.put(Configuration.CLIENT, "android");
        jSONObject3.put("clientVersion", C1455a.m1930b(context));
        jSONObject3.put(Constants.JdPushMsg.JSON_KEY_OS_VERSION, Build.VERSION.RELEASE);
        StringBuilder sb = new StringBuilder();
        sb.append(C1455a.m1934a(context));
        jSONObject3.put("build", sb.toString());
        jSONObject3.put("screen", C1468m.m1861d(context));
        jSONObject3.put(Constants.JdPushMsg.JSON_KEY_UUID, a);
        jSONObject3.put("androidId", Settings.Secure.getString(context.getContentResolver(), "android_id"));
        jSONObject3.put("openudid", "");
        jSONObject3.put("networkInfo", C1465j.m1875a(context));
        jSONObject3.put("isQEmuDriverExist", C1468m.m1862d());
        jSONObject3.put("isPipeExist", C1468m.m1864c());
        jSONObject3.put("tags", Build.TAGS);
        jSONObject3.put("board", Build.BOARD);
        jSONObject3.put("bootloader", Build.BOOTLOADER);
        jSONObject3.put("device", Build.DEVICE);
        jSONObject3.put(ViewProps.DISPLAY, Build.DISPLAY);
        jSONObject3.put("fingerprint", Build.FINGERPRINT);
        jSONObject3.put("hardware", Build.HARDWARE);
        jSONObject3.put("sdkLevel", Build.VERSION.SDK_INT);
        jSONObject3.put("sdCid", C1468m.m1869a());
        jSONObject3.put("freeDiskSpace", C1468m.m1868a(context));
        jSONObject3.put("totalDiskSpace", C1468m.m1865b(context));
        jSONObject3.put("memSize", C1468m.m1863c(context));
        jSONObject3.put("btMac", C1482r.m1710d(context));
        jSONObject3.put("imei", m1599d());
        jSONObject3.put("wifiMac", m1598e());
        jSONObject3.put("imsi", C1468m.m1855g(context));
        jSONObject3.put("imeiAndMeid", "");
        jSONObject3.put("maxCpuFrequency", C1468m.m1858f());
        jSONObject3.put("minCpuFrequency", C1468m.m1856g());
        jSONObject3.put("cpuType", C1468m.m1866b());
        jSONObject3.put("carrierName", C1465j.m1874b(context));
        jSONObject3.put("phoneNumber", C1468m.m1851i(context));
        StringBuilder sb2 = new StringBuilder();
        List<Sensor> e = C1468m.m1859e(context);
        if (e != null) {
            int i = 0;
            while (i < e.size() && i < 10) {
                Sensor sensor = e.get(i);
                sb2.append(sensor.getName() + "," + sensor.getResolution() + "," + sensor.getVendor());
                sb2.append("@");
                i++;
            }
        }
        if (sb2.length() > 0) {
            jSONObject3.put("sensors", sb2.deleteCharAt(sb2.length() - 1).toString());
        }
        jSONObject3.put("ipAddress", C1468m.m1852i());
        jSONObject3.put("model", Build.MODEL);
        jSONObject3.put("mobileCountryCode", C1468m.m1849j(context));
        jSONObject3.put("mobileNetworkCode", C1468m.m1847k(context));
        jSONObject3.put("isoCountryCode", C1468m.m1857f(context));
        jSONObject3.put("appBundleIdentifier", context.getPackageName());
        jSONObject3.put("platform", Build.MODEL);
        jSONObject3.put("deviceName", Build.DEVICE);
        jSONObject3.put("currentTime", C1483s.m1705a());
        jSONObject3.put("serial", Build.SERIAL);
        jSONObject3.put("simSerialNumber", C1468m.m1853h(context));
        jSONObject3.put("physicalCpu", C1468m.m1854h());
        jSONObject3.put("isRoot", C1468m.m1850j());
        jSONObject3.put("rootConfirm", C1471p.m1838a());
        jSONObject3.put("rootSuspicious", C1471p.m1837a(context));
        jSONObject3.put("cpuFrequency", C1468m.m1860e());
        jSONObject3.put("imeiPermission", C1467l.m1872a(context));
        jSONObject3.put("oaId", C1498b.m1619j());
        if (!C1500d.f2722e) {
            jSONObject = C1470o.m1839b(context);
        } else {
            jSONObject = C1470o.m1840a(context);
        }
        if (!C1500d.f2723f) {
            jSONObject2 = C1461f.m1896b(context);
        } else {
            jSONObject2 = C1461f.m1898a(context);
        }
        C1463h.m1882a(jSONObject3, C1464i.m1877b().m1879a(), jSONObject, jSONObject2);
        return jSONObject3;
    }

    /* renamed from: a */
    static /* synthetic */ void m1612a(C1503a aVar, C1494g gVar, FireEyeCallback fireEyeCallback, boolean z) {
        try {
            JSONObject b = gVar.m1647b();
            String str = "";
            if (b != null) {
                str = b.optString("code");
                if (C1462g.f2620a) {
                    C1462g.m1888b(f2731a, String.format("fire report response json: \n%s", C1463h.m1884a(b.toString())));
                }
            }
            if (TextUtils.equals("0", str)) {
                if (C1462g.f2620a) {
                    C1462g.m1888b(f2731a, C1498b.m1620i() + " report success");
                }
                if (z) {
                    String optString = b.optString("activeUuid");
                    C1481q.m1722a(C1498b.m1620i(), true);
                    if (!TextUtils.isEmpty(optString)) {
                        C1481q.m1723a("activeUuid", optString);
                    }
                }
                if (fireEyeCallback == null) {
                    return;
                }
                if (fireEyeCallback instanceof DeepLinkFireEyeCallback) {
                    ((DeepLinkFireEyeCallback) fireEyeCallback).onSuccess(b);
                } else {
                    fireEyeCallback.onSuccess();
                }
            } else {
                if (C1462g.f2620a) {
                    C1462g.m1892a(f2731a, C1498b.m1620i() + " report failed");
                }
                if (fireEyeCallback != null) {
                    fireEyeCallback.onFail();
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /* renamed from: b */
    static /* synthetic */ JSONObject m1605b(C1503a aVar, JSONObject jSONObject) {
        return C1456b.m1917b(aVar.m1607a(jSONObject, true).toString());
    }
}
