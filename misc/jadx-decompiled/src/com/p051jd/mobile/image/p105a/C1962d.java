package com.p051jd.mobile.image.p105a;

import android.graphics.Rect;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.PictureDrawable;
import com.caverock.androidsvg.SVG;
import com.caverock.androidsvg.SVGParseException;
import com.facebook.imageformat.ImageFormat;
import com.facebook.imageformat.ImageFormatCheckerUtils;
import com.facebook.imagepipeline.common.ImageDecodeOptions;
import com.facebook.imagepipeline.decoder.ImageDecoder;
import com.facebook.imagepipeline.drawable.DrawableFactory;
import com.facebook.imagepipeline.image.CloseableImage;
import com.facebook.imagepipeline.image.EncodedImage;
import com.facebook.imagepipeline.image.QualityInfo;
import javax.annotation.Nullable;

/* renamed from: com.jd.mobile.image.a.d */
/* loaded from: classes.dex */
public class C1962d {

    /* renamed from: a */
    public static final ImageFormat f3404a = new ImageFormat("SVG_FORMAT", "svg");

    /* renamed from: b */
    private static final byte[][] f3405b = {ImageFormatCheckerUtils.asciiBytes("<?xml")};

    /* renamed from: com.jd.mobile.image.a.d$a */
    /* loaded from: classes.dex */
    public static class C1963a extends CloseableImage {

        /* renamed from: a */
        private final SVG f3406a;

        /* renamed from: b */
        private boolean f3407b = false;

        public C1963a(SVG svg) {
            this.f3406a = svg;
        }

        /* renamed from: a */
        public SVG m1051a() {
            return this.f3406a;
        }

        @Override // com.facebook.imagepipeline.image.CloseableImage, java.io.Closeable, java.lang.AutoCloseable
        public void close() {
            this.f3407b = true;
        }

        @Override // com.facebook.imagepipeline.image.ImageInfo
        public int getHeight() {
            return 0;
        }

        @Override // com.facebook.imagepipeline.image.CloseableImage
        public int getSizeInBytes() {
            return 0;
        }

        @Override // com.facebook.imagepipeline.image.ImageInfo
        public int getWidth() {
            return 0;
        }

        @Override // com.facebook.imagepipeline.image.CloseableImage
        public boolean isClosed() {
            return this.f3407b;
        }
    }

    /* renamed from: com.jd.mobile.image.a.d$b */
    /* loaded from: classes.dex */
    public static class C1964b implements ImageDecoder {
        @Override // com.facebook.imagepipeline.decoder.ImageDecoder
        public CloseableImage decode(EncodedImage encodedImage, int i, QualityInfo qualityInfo, ImageDecodeOptions imageDecodeOptions) {
            try {
                return new C1963a(SVG.m4712a(encodedImage.getInputStream()));
            } catch (SVGParseException e) {
                e.printStackTrace();
                return null;
            }
        }
    }

    /* renamed from: com.jd.mobile.image.a.d$c */
    /* loaded from: classes.dex */
    public static class C1965c implements DrawableFactory {
        @Override // com.facebook.imagepipeline.drawable.DrawableFactory
        @Nullable
        public Drawable createDrawable(CloseableImage closeableImage) {
            return new C1967e(((C1963a) closeableImage).m1051a());
        }

        @Override // com.facebook.imagepipeline.drawable.DrawableFactory
        public boolean supportsImageType(CloseableImage closeableImage) {
            return closeableImage instanceof C1963a;
        }
    }

    /* renamed from: com.jd.mobile.image.a.d$d */
    /* loaded from: classes.dex */
    public static class C1966d implements ImageFormat.FormatChecker {

        /* renamed from: a */
        public static final byte[] f3408a = ImageFormatCheckerUtils.asciiBytes("<svg");

        @Override // com.facebook.imageformat.ImageFormat.FormatChecker
        @Nullable
        public ImageFormat determineFormat(byte[] bArr, int i) {
            if (i < getHeaderSize()) {
                return null;
            }
            if (ImageFormatCheckerUtils.startsWithPattern(bArr, f3408a)) {
                return C1962d.f3404a;
            }
            for (byte[] bArr2 : C1962d.f3405b) {
                if (ImageFormatCheckerUtils.startsWithPattern(bArr, bArr2)) {
                    int length = bArr.length;
                    byte[] bArr3 = f3408a;
                    if (ImageFormatCheckerUtils.indexOfPattern(bArr, length, bArr3, bArr3.length) > -1) {
                        return C1962d.f3404a;
                    }
                }
            }
            return null;
        }

        @Override // com.facebook.imageformat.ImageFormat.FormatChecker
        public int getHeaderSize() {
            return f3408a.length;
        }
    }

    /* renamed from: com.jd.mobile.image.a.d$e */
    /* loaded from: classes.dex */
    public static class C1967e extends PictureDrawable {

        /* renamed from: a */
        private final SVG f3409a;

        public C1967e(SVG svg) {
            super(null);
            this.f3409a = svg;
        }

        @Override // android.graphics.drawable.Drawable
        protected void onBoundsChange(Rect rect) {
            super.onBoundsChange(rect);
            setPicture(this.f3409a.m4720a(rect.width(), rect.height()));
        }
    }
}
