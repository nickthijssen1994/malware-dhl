package com.p051jd.lib.p083un.basewidget.widget.simple.footer;

import android.animation.ValueAnimator;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.util.AttributeSet;
import androidx.annotation.AttrRes;
import androidx.annotation.ColorInt;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.core.graphics.ColorUtils;
import com.p051jd.lib.p083un.basewidget.widget.simple.abs.AbsRefreshInternal;
import com.p051jd.lib.p083un.basewidget.widget.simple.constant.RefreshSpinner;
import com.p051jd.lib.p083un.basewidget.widget.simple.interfaces.RefreshFooter;
import com.p051jd.lib.p083un.basewidget.widget.simple.interfaces.RefreshLayout;
import com.p051jd.lib.p083un.basewidget.widget.simple.utils.DpiUtils;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

/* compiled from: TbsSdkJava */
/* renamed from: com.jd.lib.un.basewidget.widget.simple.footer.BallPulseFooter */
/* loaded from: classes.dex */
public class BallPulseFooter extends AbsRefreshInternal implements RefreshFooter {

    /* renamed from: a */
    protected boolean f3112a;

    /* renamed from: b */
    protected boolean f3113b;

    /* renamed from: c */
    protected Paint f3114c;

    /* renamed from: d */
    protected int f3115d;

    /* renamed from: e */
    protected int f3116e;

    /* renamed from: f */
    protected float f3117f;

    /* renamed from: g */
    protected float[] f3118g;

    /* renamed from: h */
    protected boolean f3119h;

    /* renamed from: i */
    protected ArrayList<ValueAnimator> f3120i;

    /* renamed from: j */
    protected Map<ValueAnimator, ValueAnimator.AnimatorUpdateListener> f3121j;

    @Override // com.p051jd.lib.p083un.basewidget.widget.simple.interfaces.RefreshFooter
    public boolean setNoMoreData(boolean z) {
        return false;
    }

    public BallPulseFooter(@NonNull Context context) {
        this(context, null);
    }

    public BallPulseFooter(@NonNull Context context, @Nullable AttributeSet attributeSet) {
        this(context, attributeSet, 0);
    }

    public BallPulseFooter(@NonNull Context context, @Nullable AttributeSet attributeSet, @AttrRes int i) {
        super(context, attributeSet, i);
        this.f3115d = -1118482;
        this.f3116e = -1615546;
        this.f3118g = new float[]{1.0f, 1.0f, 1.0f};
        this.f3119h = false;
        this.f3121j = new HashMap();
        setMinimumHeight(DpiUtils.dp2px(60.0f));
        this.f3114c = new Paint();
        this.f3114c.setColor(-1);
        this.f3114c.setStyle(Paint.Style.FILL);
        this.f3114c.setAntiAlias(true);
        this.mSpinnerStyle = RefreshSpinner.TRANSLATE;
        this.f3117f = (float) DpiUtils.dp2px(4.0f);
        this.f3120i = new ArrayList<>();
        int[] iArr = {120, 240, 360};
        for (final int i2 = 0; i2 < 3; i2++) {
            ValueAnimator ofFloat = ValueAnimator.ofFloat(1.0f, 0.3f, 1.0f);
            ofFloat.setDuration(750L);
            ofFloat.setRepeatCount(-1);
            ofFloat.setTarget(Integer.valueOf(i2));
            ofFloat.setStartDelay((long) iArr[i2]);
            this.f3121j.put(ofFloat, new ValueAnimator.AnimatorUpdateListener() { // from class: com.jd.lib.un.basewidget.widget.simple.footer.BallPulseFooter.1
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public void onAnimationUpdate(ValueAnimator valueAnimator) {
                    BallPulseFooter.this.f3118g[i2] = ((Float) valueAnimator.getAnimatedValue()).floatValue();
                    this.postInvalidate();
                }
            });
            this.f3120i.add(ofFloat);
        }
    }

    @Override // android.view.View, android.view.ViewGroup
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        if (this.f3120i != null) {
            for (int i = 0; i < this.f3120i.size(); i++) {
                this.f3120i.get(i).cancel();
                this.f3120i.get(i).removeAllListeners();
                this.f3120i.get(i).removeAllUpdateListeners();
            }
        }
    }

    @Override // android.view.View, android.view.ViewGroup
    protected void dispatchDraw(Canvas canvas) {
        int width = getWidth();
        int height = getHeight();
        float f = this.f3117f;
        float min = (((float) Math.min(width, height)) - (f * 2.0f)) / 6.0f;
        float f2 = 2.0f * min;
        float f3 = ((float) (width / 2)) - (f + f2);
        float f4 = (float) (height / 2);
        for (int i = 0; i < 3; i++) {
            canvas.save();
            float f5 = (float) i;
            canvas.translate((f2 * f5) + f3 + (this.f3117f * f5), f4);
            float[] fArr = this.f3118g;
            canvas.scale(fArr[i], fArr[i]);
            canvas.drawCircle(0.0f, 0.0f, min, this.f3114c);
            canvas.restore();
        }
        super.dispatchDraw(canvas);
    }

    @Override // com.p051jd.lib.p083un.basewidget.widget.simple.abs.AbsRefreshInternal, com.p051jd.lib.p083un.basewidget.widget.simple.interfaces.RefreshInternal
    public void onStartAnimator(@NonNull RefreshLayout refreshLayout, int i, int i2) {
        if (!this.f3119h) {
            for (int i3 = 0; i3 < this.f3120i.size(); i3++) {
                ValueAnimator valueAnimator = this.f3120i.get(i3);
                ValueAnimator.AnimatorUpdateListener animatorUpdateListener = this.f3121j.get(valueAnimator);
                if (animatorUpdateListener != null) {
                    valueAnimator.addUpdateListener(animatorUpdateListener);
                }
                valueAnimator.start();
            }
            this.f3119h = true;
            this.f3114c.setColor(this.f3116e);
        }
    }

    @Override // com.p051jd.lib.p083un.basewidget.widget.simple.abs.AbsRefreshInternal, com.p051jd.lib.p083un.basewidget.widget.simple.interfaces.RefreshInternal
    public int onFinish(@NonNull RefreshLayout refreshLayout, boolean z) {
        ArrayList<ValueAnimator> arrayList = this.f3120i;
        if (arrayList != null && this.f3119h) {
            this.f3119h = false;
            this.f3118g = new float[]{1.0f, 1.0f, 1.0f};
            Iterator<ValueAnimator> it = arrayList.iterator();
            while (it.hasNext()) {
                ValueAnimator next = it.next();
                if (next != null) {
                    next.removeAllUpdateListeners();
                    next.end();
                }
            }
        }
        this.f3114c.setColor(this.f3115d);
        return 0;
    }

    @Override // com.p051jd.lib.p083un.basewidget.widget.simple.abs.AbsRefreshInternal, com.p051jd.lib.p083un.basewidget.widget.simple.interfaces.RefreshInternal
    @Deprecated
    public void setPrimaryColors(@ColorInt int... iArr) {
        if (!this.f3113b && iArr.length > 1) {
            m1384b(iArr[0]);
            this.f3113b = false;
        }
        if (!this.f3112a) {
            if (iArr.length > 1) {
                m1385a(iArr[1]);
            } else if (iArr.length > 0) {
                m1385a(ColorUtils.compositeColors(-1711276033, iArr[0]));
            }
            this.f3112a = false;
        }
    }

    /* renamed from: a */
    public BallPulseFooter m1385a(@ColorInt int i) {
        this.f3115d = i;
        this.f3112a = true;
        if (!this.f3119h) {
            this.f3114c.setColor(i);
        }
        return this;
    }

    /* renamed from: b */
    public BallPulseFooter m1384b(@ColorInt int i) {
        this.f3116e = i;
        this.f3113b = true;
        if (this.f3119h) {
            this.f3114c.setColor(i);
        }
        return this;
    }
}
