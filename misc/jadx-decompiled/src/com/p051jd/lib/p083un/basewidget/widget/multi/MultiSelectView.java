package com.p051jd.lib.p083un.basewidget.widget.multi;

import android.content.Context;
import android.content.res.TypedArray;
import android.os.Handler;
import android.os.Looper;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewTreeObserver;
import android.widget.FrameLayout;
import android.widget.HorizontalScrollView;
import android.widget.LinearLayout;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;
import com.p051jd.lib.p083un.basewidget.C1620R;
import com.p051jd.lib.p083un.basewidget.widget.multi.cache.MultiDataList;
import com.p051jd.lib.p083un.basewidget.widget.multi.p089a.AbstractC1635a;
import com.p051jd.lib.p083un.basewidget.widget.multi.p089a.C1637b;
import com.p051jd.lib.p083un.basewidget.widget.multi.p090b.C1639a;
import com.p051jd.lib.p083un.basewidget.widget.multi.p091ui.MultiContentAdapter;
import com.p051jd.lib.p083un.basewidget.widget.multi.p091ui.MultiIndicator;
import com.p051jd.lib.p083un.basewidget.widget.multi.p091ui.MultiTagLayout;
import java.util.ArrayList;
import java.util.List;

/* compiled from: TbsSdkJava */
/* renamed from: com.jd.lib.un.basewidget.widget.multi.MultiSelectView */
/* loaded from: classes.dex */
public class MultiSelectView extends FrameLayout {

    /* renamed from: A */
    private boolean f2996A;

    /* renamed from: a */
    private C1637b f2997a;

    /* renamed from: b */
    private boolean f2998b;

    /* renamed from: c */
    private String f2999c;

    /* renamed from: d */
    private int f3000d;

    /* renamed from: e */
    private int f3001e;

    /* renamed from: f */
    private int f3002f;

    /* renamed from: g */
    private int f3003g;

    /* renamed from: h */
    private int f3004h;

    /* renamed from: i */
    private boolean f3005i;

    /* renamed from: j */
    private int f3006j;

    /* renamed from: k */
    private int f3007k;

    /* renamed from: l */
    private MultiTagLayout f3008l;

    /* renamed from: m */
    private MultiIndicator f3009m;

    /* renamed from: n */
    private RecyclerView f3010n;

    /* renamed from: o */
    private MultiContentAdapter f3011o;

    /* renamed from: p */
    private HorizontalScrollView f3012p;

    /* renamed from: q */
    private View f3013q;

    /* renamed from: r */
    private MultiDataList<String> f3014r;

    /* renamed from: s */
    private MultiDataList<List<String>> f3015s;

    /* renamed from: t */
    private Handler f3016t;

    /* renamed from: u */
    private View f3017u;

    /* renamed from: v */
    private int f3018v;

    /* renamed from: w */
    private boolean f3019w;

    /* renamed from: x */
    private AbstractC1634a f3020x;

    /* renamed from: y */
    private int f3021y;

    /* renamed from: z */
    private String f3022z;

    /* compiled from: TbsSdkJava */
    /* renamed from: com.jd.lib.un.basewidget.widget.multi.MultiSelectView$a */
    /* loaded from: classes.dex */
    public interface AbstractC1634a {
        /* renamed from: a */
        void m1416a();

        /* renamed from: a */
        void m1415a(List<String> list);

        /* renamed from: b */
        void m1414b();
    }

    public MultiSelectView(@NonNull Context context) {
        this(context, null);
    }

    public MultiSelectView(@NonNull Context context, @Nullable AttributeSet attributeSet) {
        this(context, attributeSet, 0);
    }

    public MultiSelectView(@NonNull Context context, @Nullable AttributeSet attributeSet, int i) {
        super(context, attributeSet, i);
        this.f2998b = true;
        this.f2999c = "请选择";
        this.f3000d = C1639a.m1409a(13.0f);
        this.f3001e = C1639a.m1409a(13.0f);
        this.f3002f = -65536;
        this.f3003g = -16777216;
        this.f3004h = -7829368;
        this.f3005i = true;
        this.f3006j = 1;
        this.f3007k = 3;
        this.f3014r = new MultiDataList<>();
        this.f3015s = new MultiDataList<>();
        this.f3016t = new Handler(Looper.getMainLooper());
        this.f3018v = 0;
        this.f3019w = false;
        this.f3021y = -1;
        this.f3022z = null;
        this.f2996A = false;
        m1459a(attributeSet);
        m1432d();
        m1430e();
        m1442b();
    }

    /* renamed from: a */
    private void m1459a(AttributeSet attributeSet) {
        if (attributeSet != null) {
            TypedArray obtainStyledAttributes = getContext().obtainStyledAttributes(attributeSet, C1620R.styleable.MultiSelectView);
            this.f3000d = obtainStyledAttributes.getDimensionPixelSize(C1620R.styleable.MultiSelectView_select_tag_text_size, this.f3000d);
            this.f3001e = obtainStyledAttributes.getDimensionPixelSize(C1620R.styleable.MultiSelectView_select_item_text_size, this.f3001e);
            this.f3002f = obtainStyledAttributes.getColor(C1620R.styleable.MultiSelectView_select_selected_color, this.f3002f);
            this.f3003g = obtainStyledAttributes.getColor(C1620R.styleable.MultiSelectView_select_normal_color, this.f3003g);
            this.f3004h = obtainStyledAttributes.getColor(C1620R.styleable.MultiSelectView_select_divide_line_color, this.f3004h);
            this.f3006j = obtainStyledAttributes.getDimensionPixelSize(C1620R.styleable.MultiSelectView_select_divide_line_height, this.f3006j);
            this.f3007k = obtainStyledAttributes.getDimensionPixelSize(C1620R.styleable.MultiSelectView_select_indicator_height, this.f3007k);
            String string = obtainStyledAttributes.getString(C1620R.styleable.MultiSelectView_select_un_selected_text);
            if (string == null) {
                string = "请选择";
            }
            this.f2999c = string;
            obtainStyledAttributes.recycle();
        }
        m1435c();
    }

    /* renamed from: b */
    private void m1442b() {
        this.f3008l.setTextSize(this.f3000d);
        this.f3011o.m1395c(this.f3001e);
        this.f3008l.setSelectedTextColor(this.f3002f);
        this.f3008l.setNormalTextColor(this.f3003g);
        this.f3009m.setColor(this.f3002f);
        this.f3011o.m1404a(this.f3003g);
        this.f3011o.m1397b(this.f3002f);
        this.f3013q.setLayoutParams(new LinearLayout.LayoutParams(-1, this.f3006j));
        this.f3013q.setBackgroundColor(this.f3004h);
        this.f3009m.setHeight(this.f3007k);
    }

    /* renamed from: c */
    private void m1435c() {
        LayoutInflater.from(getContext()).inflate(C1620R.layout.multi_select_layout, (ViewGroup) this, true);
    }

    /* renamed from: d */
    private void m1432d() {
        this.f3008l = (MultiTagLayout) findViewById(C1620R.C1622id.multi_tag_layout);
        this.f3009m = (MultiIndicator) findViewById(C1620R.C1622id.multi_indicator_layout);
        this.f3009m.setNeedChangeWidth(true);
        this.f3010n = findViewById(C1620R.C1622id.multi_recycle_view);
        this.f3010n.setLayoutManager(new LinearLayoutManager(getContext()));
        this.f3010n.setHasFixedSize(true);
        this.f3011o = new MultiContentAdapter();
        this.f3010n.setAdapter(this.f3011o);
        this.f3013q = findViewById(C1620R.C1622id.multi_divide_line_view);
        this.f3012p = (HorizontalScrollView) findViewById(C1620R.C1622id.multi_hor_scroll_view);
    }

    /* renamed from: e */
    private void m1430e() {
        this.f3011o.m1401a(new MultiContentAdapter.AbstractC1642a() { // from class: com.jd.lib.un.basewidget.widget.multi.MultiSelectView.1
            @Override // com.p051jd.lib.p083un.basewidget.widget.multi.p091ui.MultiContentAdapter.AbstractC1642a
            /* renamed from: a */
            public void mo1394a(int i, String str) {
                if (str != null && !MultiSelectView.this.f3014r.contains(str)) {
                    MultiSelectView.this.m1437b(str);
                    MultiSelectView.this.m1447a(str);
                    MultiSelectView.this.m1428f();
                    MultiSelectView.this.m1445a(str, false);
                }
            }
        });
        this.f3008l.setTagClickListener(new MultiTagLayout.AbstractC1644a() { // from class: com.jd.lib.un.basewidget.widget.multi.MultiSelectView.2
            @Override // com.p051jd.lib.p083un.basewidget.widget.multi.p091ui.MultiTagLayout.AbstractC1644a
            /* renamed from: a */
            public void mo1391a(int i, View view) {
                MultiSelectView.this.m1461a(i);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: f */
    public void m1428f() {
        MultiDataList<String> multiDataList = this.f3014r;
        m1450a(multiDataList, this.f3018v + 1, multiDataList.size() - 1);
        MultiDataList<List<String>> multiDataList2 = this.f3015s;
        m1450a(multiDataList2, this.f3018v + 1, multiDataList2.size() - 1);
    }

    /* renamed from: a */
    private <T> void m1450a(MultiDataList<T> multiDataList, int i, int i2) {
        if (multiDataList != null && !multiDataList.isEmpty() && i2 >= i && i >= 0 && i2 <= multiDataList.size() - 1) {
            multiDataList.removeRanges(i, i2);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: a */
    public void m1447a(String str) {
        int i = this.f3018v;
        int tagSize = this.f3008l.getTagSize() - 1;
        if (tagSize > i) {
            this.f3008l.removeTag(i + 1, tagSize);
        }
        this.f3008l.updateTag(this.f3018v, str);
        m1460a(-1, this.f3018v);
    }

    /* renamed from: a */
    private void m1460a(final int i, final int i2) {
        this.f3008l.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() { // from class: com.jd.lib.un.basewidget.widget.multi.MultiSelectView.3
            @Override // android.view.ViewTreeObserver.OnGlobalLayoutListener
            public void onGlobalLayout() {
                MultiSelectView.this.f3008l.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                MultiSelectView.this.f3009m.m1392a(MultiSelectView.this.f3008l.getTagView(i), MultiSelectView.this.f3008l.getTagView(i2));
                MultiSelectView.this.m1462a();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: a */
    public void m1461a(int i) {
        int i2 = this.f3018v;
        if (i != i2) {
            this.f3018v = i;
            List<String> list = (List) m1451a(this.f3015s, i);
            String str = (String) m1451a(this.f3014r, i);
            if (list != null || str == null) {
                m1433c(list, str);
                m1443a(list, str);
            } else {
                m1445a(str, true);
            }
            m1440b(i2, i);
        }
    }

    /* renamed from: a */
    private <T> T m1451a(MultiDataList<T> multiDataList, int i) {
        if (multiDataList == null || multiDataList.isEmpty()) {
            return null;
        }
        int size = multiDataList.size();
        if (i < 0 || i > size - 1) {
            return null;
        }
        return multiDataList.get(i);
    }

    /* renamed from: a */
    private <T> void m1449a(MultiDataList<T> multiDataList, int i, T t) {
        if (multiDataList != null && t != null) {
            if (i < 0 || i > multiDataList.size() - 1) {
                multiDataList.add(t);
            } else {
                multiDataList.set(i, t);
            }
        }
    }

    /* renamed from: b */
    private void m1440b(int i, int i2) {
        int tagSize;
        if (i != i2 && this.f3008l.getTagSize() - 1 >= i && tagSize >= i2 && i >= 0 && i2 >= 0) {
            this.f3009m.m1392a(this.f3008l.getTagView(i), this.f3008l.getTagView(i2));
        }
    }

    /* renamed from: b */
    private void m1441b(int i) {
        this.f3008l.changeTagState(i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: a */
    public void m1445a(final String str, final boolean z) {
        m1418m();
        m1419l();
        m1446a((this.f3018v != 0 || !z) ? str : null, new AbstractC1635a.AbstractC1636a() { // from class: com.jd.lib.un.basewidget.widget.multi.MultiSelectView.4
            @Override // com.p051jd.lib.p083un.basewidget.widget.multi.p089a.AbstractC1635a.AbstractC1636a
            /* renamed from: a */
            public void mo1410a(final List<String> list) {
                MultiSelectView.this.m1448a(new Runnable() { // from class: com.jd.lib.un.basewidget.widget.multi.MultiSelectView.4.1
                    @Override // java.lang.Runnable
                    public void run() {
                        List list2 = list;
                        if (list2 != null && list2.isEmpty()) {
                            MultiSelectView.this.m1422i();
                            MultiSelectView.this.m1417n();
                        } else if (list == null) {
                            MultiSelectView.this.m1424h();
                            MultiSelectView.this.m1417n();
                        } else {
                            if (z) {
                                MultiSelectView.this.m1436b(list, str);
                            } else {
                                MultiSelectView.this.m1444a(list);
                            }
                            MultiSelectView.this.m1417n();
                        }
                    }
                });
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: b */
    public void m1436b(List<String> list, String str) {
        m1433c(list, str);
        m1443a(list, str);
        m1449a((MultiDataList<int>) this.f3015s, this.f3018v, (int) list);
        m1449a((MultiDataList<int>) this.f3014r, this.f3018v, (int) str);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: a */
    public void m1444a(List<String> list) {
        m1426g();
        this.f3018v++;
        m1449a((MultiDataList<int>) this.f3015s, this.f3018v, (int) list);
        m1449a((MultiDataList<int>) this.f3014r, this.f3018v, (int) null);
        m1441b(this.f3018v);
        m1433c(list, null);
    }

    /* renamed from: g */
    private void m1426g() {
        this.f3008l.addTag("请选择");
        int findTagViewIndex = this.f3008l.findTagViewIndex(this.f3017u);
        int tagSize = this.f3008l.getTagSize() - 1;
        m1460a(findTagViewIndex, tagSize);
        this.f3017u = this.f3008l.getTagView(tagSize);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: b */
    public void m1437b(String str) {
        this.f3011o.m1399a(str);
        this.f3011o.notifyDataSetChanged();
        m1449a((MultiDataList<int>) this.f3014r, this.f3018v, (int) str);
    }

    /* renamed from: a */
    private void m1446a(String str, AbstractC1635a.AbstractC1636a aVar) {
        C1637b bVar = this.f2997a;
        if (bVar == null) {
            m1424h();
            m1417n();
            return;
        }
        bVar.mo1413a(this.f3018v, str, aVar);
    }

    @Override // android.view.ViewGroup
    public boolean onInterceptTouchEvent(MotionEvent motionEvent) {
        return this.f3019w;
    }

    /* renamed from: c */
    private void m1433c(List<String> list, String str) {
        this.f3011o.m1399a(str);
        this.f3011o.m1398a(list);
        this.f3011o.notifyDataSetChanged();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: h */
    public void m1424h() {
        m1420k();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: i */
    public void m1422i() {
        m1421j();
    }

    /* renamed from: j */
    private void m1421j() {
        if (this.f3020x != null) {
            ArrayList arrayList = new ArrayList();
            arrayList.addAll(this.f3014r);
            this.f3020x.m1415a(arrayList);
        }
    }

    /* renamed from: k */
    private void m1420k() {
        AbstractC1634a aVar = this.f3020x;
        if (aVar != null) {
            aVar.m1416a();
        }
    }

    /* renamed from: l */
    private void m1419l() {
        AbstractC1634a aVar = this.f3020x;
        if (aVar != null) {
            aVar.m1414b();
        }
    }

    /* renamed from: m */
    private void m1418m() {
        this.f3019w = true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: n */
    public void m1417n() {
        this.f3019w = false;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: a */
    public void m1448a(Runnable runnable) {
        if (runnable != null) {
            if (Looper.myLooper() == Looper.getMainLooper()) {
                runnable.run();
            } else {
                this.f3016t.post(runnable);
            }
        }
    }

    public void setUseCache(boolean z) {
        this.f2998b = z;
        C1637b bVar = this.f2997a;
        if (bVar != null) {
            bVar.m1411a(z);
        }
    }

    public void setProvider(AbstractC1635a aVar) {
        if (aVar != null) {
            this.f2997a = new C1637b(aVar);
            this.f2997a.m1411a(this.f2998b);
        }
    }

    /* renamed from: a */
    public void m1443a(List<String> list, String str) {
        int indexOf;
        if (str != null && list != null && !list.isEmpty() && (indexOf = list.indexOf(str)) != -1) {
            LinearLayoutManager layoutManager = this.f3010n.getLayoutManager();
            int findFirstVisibleItemPosition = layoutManager.findFirstVisibleItemPosition();
            int findLastVisibleItemPosition = layoutManager.findLastVisibleItemPosition();
            if (indexOf <= findFirstVisibleItemPosition) {
                this.f3010n.scrollToPosition(indexOf);
            } else if (indexOf <= findLastVisibleItemPosition) {
                this.f3010n.scrollBy(0, this.f3010n.getChildAt(indexOf - findFirstVisibleItemPosition).getTop());
            } else {
                this.f3010n.scrollToPosition(indexOf);
            }
        }
    }

    /* renamed from: a */
    public void m1462a() {
        this.f3016t.post(new Runnable() { // from class: com.jd.lib.un.basewidget.widget.multi.MultiSelectView.5
            @Override // java.lang.Runnable
            public void run() {
                MultiSelectView.this.f3012p.smoothScrollTo(MultiSelectView.this.f3012p.getWidth(), 0);
            }
        });
    }

    public void setStateListener(AbstractC1634a aVar) {
        this.f3020x = aVar;
    }
}
