package com.p051jd.sentry.performance.block.p116b;

import android.os.Looper;
import android.os.SystemClock;
import android.util.Printer;
import com.jd.sentry.Sentry;
import java.lang.reflect.Field;

/* renamed from: com.jd.sentry.performance.block.b.c */
/* loaded from: classes.dex */
public class C2085c implements Printer {

    /* renamed from: b */
    private final long f3687b;

    /* renamed from: e */
    private AbstractC2087a f3690e;

    /* renamed from: g */
    private Printer f3692g;

    /* renamed from: a */
    private long f3686a = 1000;

    /* renamed from: c */
    private long f3688c = 0;

    /* renamed from: d */
    private long f3689d = 0;

    /* renamed from: f */
    private boolean f3691f = false;

    /* renamed from: com.jd.sentry.performance.block.b.c$a */
    /* loaded from: classes.dex */
    public interface AbstractC2087a {
        /* renamed from: a */
        void mo768a(long j, long j2, long j3, long j4);
    }

    C2085c(AbstractC2087a aVar, long j) {
        this.f3690e = null;
        this.f3692g = null;
        this.f3690e = aVar;
        this.f3687b = j;
        this.f3692g = m774a();
    }

    /* renamed from: a */
    private boolean m773a(long j) {
        return Sentry.getSentryConfig().isEnableBlockDetect() && j - this.f3688c > ((long) Sentry.getSentryConfig().getBlockContext().a());
    }

    /* renamed from: b */
    private void m771b() {
        if (Sentry.getSentryConfig().isEnableBlockDetect()) {
            if (C2081a.m778a().f3678b != null) {
                C2081a.m778a().f3678b.mo789a();
            }
            if (C2081a.m778a().f3679c != null) {
                C2081a.m778a().f3679c.mo789a();
            }
        }
    }

    /* renamed from: b */
    private void m770b(final long j) {
        final long j2 = this.f3688c;
        final long j3 = this.f3689d;
        final long currentThreadTimeMillis = SystemClock.currentThreadTimeMillis();
        C2083b.m776b().post(new Runnable() { // from class: com.jd.sentry.performance.block.b.c.1
            @Override // java.lang.Runnable
            public void run() {
                try {
                    C2085c.this.f3690e.mo768a(j2, j, j3, currentThreadTimeMillis);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /* renamed from: c */
    private void m769c() {
        if (C2081a.m778a().f3678b != null) {
            C2081a.m778a().f3678b.m790b();
        }
        if (C2081a.m778a().f3679c != null) {
            C2081a.m778a().f3679c.m790b();
        }
    }

    /* renamed from: a */
    public Printer m774a() {
        try {
            Field declaredField = Looper.class.getDeclaredField("mLogging");
            declaredField.setAccessible(true);
            Printer printer = (Printer) declaredField.get(Looper.getMainLooper());
            if (printer != null) {
                return printer;
            }
            return null;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    @Override // android.util.Printer
    public void println(String str) {
        Printer printer = this.f3692g;
        if (printer != null) {
            printer.println(str);
        }
        if (!this.f3691f) {
            this.f3688c = System.currentTimeMillis();
            this.f3689d = SystemClock.currentThreadTimeMillis();
            this.f3691f = true;
            m771b();
            return;
        }
        long currentTimeMillis = System.currentTimeMillis();
        this.f3691f = false;
        if (m773a(currentTimeMillis)) {
            m770b(currentTimeMillis);
        }
        m769c();
    }
}
