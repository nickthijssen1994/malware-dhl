package com.p051jd.android.sdk.coreinfo.p060a;

import android.content.Context;
import android.content.pm.PackageManager;
import android.os.Build;
import android.os.IBinder;
import android.telephony.TelephonyManager;
import android.text.TextUtils;
import com.p051jd.android.sdk.coreinfo.p062c.C1212b;
import com.p051jd.android.sdk.coreinfo.p062c.C1213c;
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.util.regex.Pattern;

/* compiled from: TbsSdkJava */
/* renamed from: com.jd.android.sdk.coreinfo.a.e */
/* loaded from: classes.dex */
public final class C1208e {
    /* renamed from: a */
    public static String m2338a(Context context) {
        TelephonyManager telephonyManager;
        String str = "";
        if (context == null) {
            return str;
        }
        try {
            PackageManager packageManager = context.getPackageManager();
            if (packageManager == null || packageManager.checkPermission("android.permission.READ_PHONE_STATE", context.getPackageName()) != 0) {
                return str;
            }
            if (Build.VERSION.SDK_INT < 28) {
                str = m2336b(context);
                if (!m2337a(str)) {
                    str = m2335c(context);
                    if (!m2337a(str)) {
                        str = m2334d(context);
                        if (!m2337a(str)) {
                            str = m2333e(context);
                            if (!m2337a(str)) {
                                str = "";
                            }
                        }
                    }
                }
            }
            if (!TextUtils.isEmpty(str) || (telephonyManager = (TelephonyManager) context.getSystemService("phone")) == null) {
                return str;
            }
            str = telephonyManager.getSubscriberId();
            return str == null ? "" : str;
        } catch (Throwable unused) {
            return str;
        }
    }

    /* renamed from: b */
    private static String m2336b(Context context) {
        String str = "";
        try {
            Field declaredField = Class.forName("com.android.internal.telephony.IPhoneSubInfo$Stub").getDeclaredField("TRANSACTION_getSubscriberId");
            if (declaredField == null) {
                return str;
            }
            declaredField.setAccessible(true);
            int i = declaredField.getInt(null);
            try {
                str = C1213c.m2284a(C1212b.m2287a("service call iphonesubinfo " + i + " s16 " + context.getPackageName()));
            } catch (Throwable unused) {
            }
            return !m2337a(str) ? C1213c.m2284a(C1212b.m2287a("service call iphonesubinfo ".concat(String.valueOf(i)))) : str;
        } catch (Throwable unused2) {
            return str;
        }
    }

    /* renamed from: c */
    private static String m2335c(Context context) {
        String str = "";
        try {
            Method declaredMethod = Class.forName("android.os.ServiceManager").getDeclaredMethod("getService", String.class);
            declaredMethod.setAccessible(true);
            IBinder iBinder = (IBinder) declaredMethod.invoke(null, "iphonesubinfo");
            Class<?> cls = Class.forName("com.android.internal.telephony.IPhoneSubInfo$Stub");
            Method declaredMethod2 = cls.getDeclaredMethod("asInterface", IBinder.class);
            declaredMethod2.setAccessible(true);
            Object invoke = declaredMethod2.invoke(null, iBinder);
            if (invoke.getClass().getDeclaredMethod("getSubscriberId", String.class) != null) {
                str = C1213c.m2283a(context.getPackageName(), iBinder, C1213c.m2286a(cls), C1213c.m2285a(invoke, "TRANSACTION_getSubscriberId"));
            }
            return (m2337a(str) || invoke.getClass().getDeclaredMethod("getSubscriberId", new Class[0]) == null) ? str : C1213c.m2283a("", iBinder, C1213c.m2286a(cls), C1213c.m2285a(invoke, "TRANSACTION_getSubscriberId"));
        } catch (Throwable unused) {
            return str;
        }
    }

    /* renamed from: d */
    private static String m2334d(Context context) {
        Method declaredMethod;
        String str = "";
        try {
            Method declaredMethod2 = Class.forName("android.os.ServiceManager").getDeclaredMethod("getService", String.class);
            declaredMethod2.setAccessible(true);
            Method declaredMethod3 = Class.forName("com.android.internal.telephony.IPhoneSubInfo$Stub").getDeclaredMethod("asInterface", IBinder.class);
            declaredMethod3.setAccessible(true);
            Object invoke = declaredMethod3.invoke(null, (IBinder) declaredMethod2.invoke(null, "iphonesubinfo"));
            try {
                Method declaredMethod4 = invoke.getClass().getDeclaredMethod("getSubscriberId", String.class);
                if (declaredMethod4 != null) {
                    str = (String) declaredMethod4.invoke(invoke, context.getPackageName());
                }
            } catch (Exception unused) {
            }
            return (m2337a(str) || (declaredMethod = invoke.getClass().getDeclaredMethod("getSubscriberId", new Class[0])) == null) ? str : (String) declaredMethod.invoke(invoke, new Object[0]);
        } catch (Throwable unused2) {
            return str;
        }
    }

    /* renamed from: e */
    private static String m2333e(Context context) {
        Method declaredMethod;
        String str = "";
        try {
            Method declaredMethod2 = TelephonyManager.class.getDeclaredMethod("getSubscriberInfo", new Class[0]);
            declaredMethod2.setAccessible(true);
            Object invoke = declaredMethod2.invoke((TelephonyManager) context.getSystemService("phone"), new Object[0]);
            try {
                Method declaredMethod3 = invoke.getClass().getDeclaredMethod("getSubscriberId", String.class);
                if (declaredMethod3 != null) {
                    str = (String) declaredMethod3.invoke(invoke, context.getPackageName());
                }
            } catch (Throwable unused) {
            }
            return (m2337a(str) || (declaredMethod = invoke.getClass().getDeclaredMethod("getSubscriberId", new Class[0])) == null) ? str : (String) declaredMethod.invoke(invoke, new Object[0]);
        } catch (Throwable unused2) {
            return str;
        }
    }

    /* renamed from: a */
    private static boolean m2337a(String str) {
        try {
            if (!TextUtils.isEmpty(str)) {
                return Pattern.compile("^[-\\+]?[\\d]*$").matcher(str).matches();
            }
            return false;
        } catch (Throwable unused) {
            return false;
        }
    }
}
