package com.p051jd.libs.hybrid;

import android.content.Context;
import android.os.Build;
import androidx.annotation.Keep;
import com.jd.libs.hybrid.base.a.a;
import com.jd.libs.hybrid.offlineload.entity.CommonEntity;
import com.jd.libs.hybrid.offlineload.entity.OfflineEntity;
import com.jd.libs.hybrid.preload.entity.PreloadInfoEntity;
import com.p051jd.framework.json.JDJSON;
import com.p051jd.hybrid.downloader.C1551b;
import com.p051jd.libs.hybrid.base.C1841a;
import com.p051jd.libs.hybrid.base.p094a.a$a;
import com.p051jd.libs.hybrid.base.p095b.C1853c;
import com.p051jd.libs.hybrid.offlineload.C1861a;
import com.p051jd.libs.hybrid.offlineload.loader.OfflineEntityLoader;
import com.p051jd.libs.hybrid.preload.AbstractC1934b;
import com.p051jd.libs.hybrid.preload.C1923a;
import com.p051jd.libs.hybrid.preload.C1939c;
import com.p051jd.libs.hybrid.preload.CustomParamProvider;
import com.p051jd.libs.xconsole.C1954a;
import java.util.Collections;
import java.util.List;

@Keep
/* renamed from: com.jd.libs.hybrid.HybridSDK */
/* loaded from: classes.dex */
public class HybridSDK {
    private static final String TAG = "HybridSDK";

    @Keep
    /* renamed from: com.jd.libs.hybrid.HybridSDK$HybridResult */
    /* loaded from: classes.dex */
    static class HybridResult implements a {
        Offline offlinePackage;
        Preload preload;

        HybridResult() {
        }

        public Offline getOfflinePackage() {
            return this.offlinePackage;
        }

        public Preload getPreload() {
            return this.preload;
        }

        public void setOfflinePackage(Offline offline) {
            this.offlinePackage = offline;
        }

        public void setPreload(Preload preload) {
            this.preload = preload;
        }

        public boolean useful() {
            Preload preload = this.preload;
            if (preload != null && !preload.useful()) {
                return false;
            }
            Offline offline = this.offlinePackage;
            return offline == null || offline.useful();
        }
    }

    @Keep
    /* renamed from: com.jd.libs.hybrid.HybridSDK$Offline */
    /* loaded from: classes.dex */
    static class Offline implements a {
        List<CommonEntity> common;
        int maxThread;
        List<OfflineEntity> modules;
        List<String> network;
        int timeout;
        int retry = 0;
        int dUpper = 50;
        float spRatio = 0.4f;

        Offline() {
        }

        public List<CommonEntity> getCommon() {
            return this.common;
        }

        public int getMaxThread() {
            return this.maxThread;
        }

        public List<OfflineEntity> getModules() {
            return this.modules;
        }

        public List<String> getNetwork() {
            return this.network;
        }

        public int getRetry() {
            return this.retry;
        }

        public float getSpRatio() {
            return this.spRatio;
        }

        public int getTimeout() {
            return this.timeout;
        }

        public int getdUpper() {
            return this.dUpper;
        }

        public void setCommon(List<CommonEntity> list) {
            this.common = list;
        }

        public void setMaxThread(int i) {
            this.maxThread = i;
        }

        public void setModules(List<OfflineEntity> list) {
            this.modules = list;
        }

        public void setNetwork(List<String> list) {
            this.network = list;
        }

        public void setRetry(int i) {
            this.retry = i;
        }

        public void setSpRatio(float f) {
            this.spRatio = f;
        }

        public void setTimeout(int i) {
            this.timeout = i;
        }

        public void setdUpper(int i) {
            this.dUpper = i;
        }

        public boolean useful() {
            return a$a.m1333a(this.modules, true);
        }
    }

    @Keep
    /* renamed from: com.jd.libs.hybrid.HybridSDK$Preload */
    /* loaded from: classes.dex */
    static class Preload implements a {
        List<PreloadInfoEntity> modules;

        Preload() {
        }

        public List<PreloadInfoEntity> getModules() {
            return this.modules;
        }

        public void setModules(List<PreloadInfoEntity> list) {
            this.modules = list;
        }

        public boolean useful() {
            return a$a.m1333a(this.modules, true);
        }
    }

    public static int getMaxOfflineFetchTime() {
        return C1841a.f3181a;
    }

    public static void initSDK(Context context, String str) {
        if (isInited()) {
            C1853c.m1308c(TAG, "Hybrid was inited before.");
        } else if (Build.VERSION.SDK_INT < 19) {
            C1853c.m1308c(TAG, "Web Hybrid SDK does NOT support SDK less than 19(API < KITKAT).");
        } else {
            C1841a.m1347a(true);
            C1841a.m1351a(context);
            C1841a.m1349a(str);
            C1551b.m1573a(C1551b.m1574a(context));
            C1954a.m1064a(context);
        }
    }

    public static void initSDK(Context context, String str, boolean z) {
        setDebug(z);
        initSDK(context, str);
    }

    public static boolean isDebug() {
        return C1841a.m1346b();
    }

    public static boolean isInited() {
        return C1841a.m1355a();
    }

    public static void loadConfig() {
        if (!isInited()) {
            C1853c.m1311b("Hybrid SDK is not initialized!");
        } else if (!C1841a.m1337e() || !C1841a.m1336f()) {
            new OfflineEntityLoader().m1202a(new OfflineEntityLoader.Callback<String>() { // from class: com.jd.libs.hybrid.HybridSDK.1
                @Override // com.p051jd.libs.hybrid.offlineload.loader.OfflineEntityLoader.Callback
                /* renamed from: a */
                public final void mo1185a(Exception exc) {
                    String str;
                    C1841a.m1338d(true);
                    C1841a.m1341c(true);
                    StringBuilder sb = new StringBuilder("Hybrid接口获取失败，Hybrid所有功能关闭。");
                    if (exc != null) {
                        str = "error: " + exc.getMessage();
                    } else {
                        str = "";
                    }
                    sb.append(str);
                    C1853c.m1310b(HybridSDK.TAG, sb.toString());
                    C1853c.m1312a(HybridSDK.TAG, exc);
                }

                @Override // com.p051jd.libs.hybrid.offlineload.loader.OfflineEntityLoader.Callback
                /* renamed from: a */
                public final /* synthetic */ void mo1184a(String str) {
                    String str2 = str;
                    try {
                        if (C1853c.m1317a()) {
                            C1853c.m1309b(HybridSDK.TAG, "Hybrid接口数据", str2);
                        }
                        HybridResult hybridResult = (HybridResult) JDJSON.parseObject(str2, HybridResult.class);
                        C1853c.m1308c(HybridSDK.TAG, "loadConfig success");
                        Context c = C1841a.m1343c();
                        if (c != null) {
                            C1939c cVar = new C1939c(c);
                            C1861a aVar = new C1861a(c);
                            if (hybridResult != null) {
                                if (hybridResult.preload == null || hybridResult.preload.modules == null) {
                                    C1853c.m1308c(HybridSDK.TAG, "No Preload config, delete preload's all database.");
                                    cVar.m1092a();
                                } else {
                                    cVar.m1090a(hybridResult.preload.modules);
                                }
                                Offline offline = hybridResult.offlinePackage;
                                if (offline != null) {
                                    C1841a.m1353a(offline.timeout);
                                    C1841a.m1345b(offline.maxThread);
                                    C1841a.m1342c(offline.retry);
                                    C1841a.m1348a(offline.network);
                                    C1841a.m1339d(offline.dUpper);
                                    C1841a.m1354a(offline.spRatio);
                                    List<CommonEntity> list = offline.common;
                                    if (list == null) {
                                        list = Collections.emptyList();
                                    }
                                    aVar.m1282a(list);
                                    List<OfflineEntity> list2 = offline.modules;
                                    if (list2 == null) {
                                        list2 = Collections.emptyList();
                                    }
                                    aVar.m1280b(list2);
                                    return;
                                }
                                C1853c.m1308c(HybridSDK.TAG, "No Offline config, delete offline's all database and local files.");
                                aVar.m1285a();
                                return;
                            }
                            C1853c.m1308c(HybridSDK.TAG, "But config is null/empty, DELETE EVERYTHING: ALL database and local files.");
                            cVar.m1092a();
                            aVar.m1285a();
                            return;
                        }
                        C1853c.m1306e(HybridSDK.TAG, "Internal error, app context is null.");
                    } catch (Exception e) {
                        mo1185a(e);
                    }
                }
            });
        }
    }

    public static void setDebug(boolean z) {
        C1841a.m1344b(z);
    }

    public static void setForceHttp(boolean z) {
        C1841a.C1843b.m1329a(z);
    }

    public static void setGatewaySettings(C1841a.C1843b.C1847d dVar) {
        C1841a.C1843b.m1330a(dVar);
    }

    public static void setMaxOfflineFetchTime(int i) {
        if (i > 0) {
            C1841a.m1353a(i);
        }
    }

    public static void setPreloadCustomParamsGetter(CustomParamProvider.ParamGetter paramGetter) {
        CustomParamProvider.m1112a(paramGetter);
    }

    public static void setPreloadDataProvider(C1841a.C1843b.AbstractC1844a aVar) {
        C1841a.C1843b.m1331a(aVar);
    }

    @Deprecated
    public static void setPreloadExtraParamsGetter(AbstractC1934b bVar) {
        C1923a.m1103a(bVar);
    }
}
