package com.p051jd.scan.p113c;

import android.content.Context;
import android.text.TextUtils;
import com.alibaba.fastjson.JSON;
import com.p051jd.lib.p083un.utils.UnSharedPreferencesUtils;
import com.p051jd.scan.p112b.C2057a;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.LinkedHashSet;
import java.util.List;

/* renamed from: com.jd.scan.c.a */
/* loaded from: classes.dex */
public class C2058a {

    /* renamed from: a */
    private static final String f3608a = "a";

    /* renamed from: a */
    public static List<C2057a> m828a(Context context) {
        String string = UnSharedPreferencesUtils.getSharedPreferences(context.getApplicationContext()).getString("scan_histroy_key", "");
        if (!TextUtils.isEmpty(string)) {
            try {
                return JSON.parseArray(string, C2057a.class);
            } catch (Exception unused) {
            }
        }
        return null;
    }

    /* renamed from: a */
    public static List<C2057a> m826a(List<C2057a> list) {
        Collections.sort(list, new Comparator<C2057a>() { // from class: com.jd.scan.c.a.1
            @Override // java.util.Comparator
            public final /* bridge */ /* synthetic */ int compare(C2057a aVar, C2057a aVar2) {
                C2057a aVar3 = aVar;
                C2057a aVar4 = aVar2;
                if (aVar4.f3605c > aVar3.f3605c) {
                    return 1;
                }
                return aVar4.f3605c == aVar3.f3605c ? 0 : -1;
            }
        });
        return list;
    }

    /* renamed from: a */
    public static void m827a(Context context, List<C2057a> list) {
        if (!list.isEmpty()) {
            String string = UnSharedPreferencesUtils.getSharedPreferences(context.getApplicationContext()).getString("scan_histroy_key", "");
            if (TextUtils.isEmpty(string)) {
                m826a(list);
                m824b(context, list);
                return;
            }
            List list2 = null;
            try {
                list2 = JSON.parseArray(string, C2057a.class);
            } catch (Exception unused) {
            }
            if (list2 == null) {
                list2 = new ArrayList();
            }
            LinkedHashSet linkedHashSet = new LinkedHashSet(list);
            linkedHashSet.addAll(list2);
            List<C2057a> a = m826a(new ArrayList(linkedHashSet));
            if (a.size() > 30) {
                a = a.subList(0, 30);
            }
            UnSharedPreferencesUtils.getSharedPreferences(context.getApplicationContext()).edit().putString("scan_histroy_key", JSON.toJSONString(a)).apply();
        }
    }

    /* renamed from: b */
    public static int m825b(Context context) {
        return (int) ((context.getResources().getDisplayMetrics().density * 52.0f) + 0.5f);
    }

    /* renamed from: b */
    public static void m824b(Context context, List<C2057a> list) {
        ((list == null || list.isEmpty()) ? UnSharedPreferencesUtils.getSharedPreferences(context.getApplicationContext()).edit().putString("scan_histroy_key", "") : UnSharedPreferencesUtils.getSharedPreferences(context.getApplicationContext()).edit().putString("scan_histroy_key", JSON.toJSONString(list))).apply();
    }
}
