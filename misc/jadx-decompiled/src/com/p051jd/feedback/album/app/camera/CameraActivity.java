package com.p051jd.feedback.album.app.camera;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.text.TextUtils;
import androidx.annotation.Nullable;
import com.p051jd.feedback.C1287R;
import com.p051jd.feedback.album.AbstractC1303a;
import com.p051jd.feedback.album.mvp.BaseActivity;
import com.p051jd.feedback.album.p070c.C1369a;
import com.p051jd.feedback.album.p070c.C1370b;
import com.p051jd.feedback.p075ui.C1448b;
import java.io.File;

/* compiled from: TbsSdkJava */
/* renamed from: com.jd.feedback.album.app.camera.CameraActivity */
/* loaded from: classes.dex */
public class CameraActivity extends BaseActivity {

    /* renamed from: a */
    public static AbstractC1303a<String> f2408a;

    /* renamed from: b */
    public static AbstractC1303a<String> f2409b;

    /* renamed from: c */
    static final /* synthetic */ boolean f2410c = !CameraActivity.class.desiredAssertionStatus();

    /* renamed from: d */
    private int f2411d;

    /* renamed from: e */
    private String f2412e;

    /* renamed from: f */
    private int f2413f;

    /* renamed from: j */
    private long f2414j;

    /* renamed from: k */
    private long f2415k;

    /* JADX WARN: Multi-variable type inference failed */
    @Override // com.p051jd.feedback.album.mvp.BaseActivity
    public void onCreate(@Nullable Bundle bundle) {
        String str;
        String str2;
        super.onCreate(bundle);
        C1370b.m2088a((Activity) this, 0);
        C1370b.m2085b((Activity) this, 0);
        C1370b.m2089a((Activity) this);
        C1370b.m2089a((Activity) this);
        if (bundle != null) {
            this.f2411d = bundle.getInt("INSTANCE_CAMERA_FUNCTION");
            this.f2412e = bundle.getString("INSTANCE_CAMERA_FILE_PATH");
            this.f2413f = bundle.getInt("INSTANCE_CAMERA_QUALITY");
            this.f2414j = bundle.getLong("INSTANCE_CAMERA_DURATION");
            this.f2415k = bundle.getLong("INSTANCE_CAMERA_BYTES");
            return;
        }
        Bundle extras = getIntent().getExtras();
        if (f2410c || extras != null) {
            this.f2411d = extras.getInt("KEY_INPUT_FUNCTION");
            this.f2412e = extras.getString("KEY_INPUT_FILE_PATH");
            this.f2413f = extras.getInt("KEY_INPUT_CAMERA_QUALITY");
            this.f2414j = extras.getLong("KEY_INPUT_CAMERA_DURATION");
            this.f2415k = extras.getLong("KEY_INPUT_CAMERA_BYTES");
            switch (this.f2411d) {
                case 0:
                    if (TextUtils.isEmpty(this.f2412e)) {
                        if (!"mounted".equals(Environment.getExternalStorageState())) {
                            str = C1369a.m2095a(getCacheDir(), ".jpg");
                        } else {
                            str = C1369a.m2100a();
                        }
                        this.f2412e = str;
                    }
                    m2075a(f2476g, 1);
                    return;
                case 1:
                    if (TextUtils.isEmpty(this.f2412e)) {
                        if (!"mounted".equals(Environment.getExternalStorageState())) {
                            str2 = C1369a.m2095a(getCacheDir(), ".mp4");
                        } else {
                            str2 = C1369a.m2093b();
                        }
                        this.f2412e = str2;
                    }
                    m2075a(f2477h, 2);
                    return;
                default:
                    throw new AssertionError("This should not be the case.");
            }
        } else {
            throw new AssertionError();
        }
    }

    public void onSaveInstanceState(Bundle bundle) {
        bundle.putInt("INSTANCE_CAMERA_FUNCTION", this.f2411d);
        bundle.putString("INSTANCE_CAMERA_FILE_PATH", this.f2412e);
        bundle.putInt("INSTANCE_CAMERA_QUALITY", this.f2413f);
        bundle.putLong("INSTANCE_CAMERA_DURATION", this.f2414j);
        bundle.putLong("INSTANCE_CAMERA_BYTES", this.f2415k);
        super.onSaveInstanceState(bundle);
    }

    /* JADX WARN: Multi-variable type inference failed */
    @Override // com.p051jd.feedback.album.mvp.BaseActivity
    /* renamed from: b */
    public final void mo2073b(int i) {
        switch (i) {
            case 1:
                File file = new File(this.f2412e);
                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                intent.putExtra("output", C1369a.m2097a((Context) this, file));
                intent.addFlags(1);
                intent.addFlags(2);
                startActivityForResult(intent, 1);
                return;
            case 2:
                File file2 = new File(this.f2412e);
                int i2 = this.f2413f;
                long j = this.f2414j;
                long j2 = this.f2415k;
                Intent intent2 = new Intent("android.media.action.VIDEO_CAPTURE");
                intent2.putExtra("output", C1369a.m2097a((Context) this, file2));
                intent2.putExtra("android.intent.extra.videoQuality", i2);
                intent2.putExtra("android.intent.extra.durationLimit", j);
                intent2.putExtra("android.intent.extra.sizeLimit", j2);
                intent2.addFlags(1);
                intent2.addFlags(2);
                startActivityForResult(intent2, 2);
                return;
            default:
                throw new AssertionError("This should not be the case.");
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    @Override // com.p051jd.feedback.album.mvp.BaseActivity
    /* renamed from: a_ */
    public final void mo2074a_() {
        int i;
        switch (this.f2411d) {
            case 0:
                i = C1287R.string.album_permission_camera_image_failed_hint;
                break;
            case 1:
                i = C1287R.string.album_permission_camera_video_failed_hint;
                break;
            default:
                throw new AssertionError("This should not be the case.");
        }
        C1448b.m1940a(this, getResources().getString(i)).show();
    }

    public void onActivityResult(int i, int i2, Intent intent) {
        switch (i) {
            case 1:
            case 2:
                if (i2 == -1) {
                    AbstractC1303a<String> aVar = f2408a;
                    if (aVar != null) {
                        aVar.mo2162a(this.f2412e);
                    }
                    f2408a = null;
                    f2409b = null;
                    finish();
                    return;
                }
                AbstractC1303a<String> aVar2 = f2409b;
                if (aVar2 != null) {
                    aVar2.mo2162a("User canceled.");
                }
                f2408a = null;
                f2409b = null;
                finish();
                return;
            default:
                throw new AssertionError("This should not be the case.");
        }
    }
}
