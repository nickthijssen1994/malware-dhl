package com.p051jd.feedback;

import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.DividerItemDecoration;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;
import com.google.gson.Gson;
import com.p051jd.feedback.network.C1432a;
import com.p051jd.feedback.network.beans.MessageBean;
import com.p051jd.feedback.network.result.MessageRequestResult;
import com.p051jd.feedback.p063a.C1301c;
import io.reactivex.Observer;
import io.reactivex.android.schedulers.AndroidSchedulers;
import io.reactivex.disposables.Disposable;
import io.reactivex.functions.Consumer;
import io.reactivex.schedulers.Schedulers;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;

/* compiled from: TbsSdkJava */
/* renamed from: com.jd.feedback.FeedbackReplyActivity */
/* loaded from: classes.dex */
public class FeedbackReplyActivity extends AppCompatActivity {

    /* renamed from: a */
    public static String f2130a = "feedback_id";

    /* renamed from: b */
    private ImageView f2131b;

    /* renamed from: c */
    private Button f2132c;

    /* renamed from: d */
    private RecyclerView f2133d;

    /* renamed from: e */
    private C1301c f2134e;

    /* renamed from: g */
    private String f2136g;

    /* renamed from: f */
    private List<MessageBean> f2135f = new ArrayList();

    /* renamed from: h */
    private int f2137h = 0;

    /* renamed from: i */
    private List<MessageRequestResult.FeedbackMessages> f2138i = new ArrayList();

    /* JADX WARN: Multi-variable type inference failed */
    protected void onCreate(@Nullable Bundle bundle) {
        FeedbackReplyActivity.super.onCreate(bundle);
        setContentView(C1287R.layout.activity_reply_detail);
        this.f2136g = getIntent().getStringExtra(f2130a);
        this.f2131b = (ImageView) findViewById(C1287R.C1290id.back);
        this.f2131b.setOnClickListener(new View.OnClickListener() { // from class: com.jd.feedback.FeedbackReplyActivity.1
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                FeedbackReplyActivity.this.finish();
            }
        });
        this.f2132c = (Button) findViewById(C1287R.C1290id.reply);
        this.f2132c.setOnClickListener(new View.OnClickListener() { // from class: com.jd.feedback.FeedbackReplyActivity.2
            /* JADX WARN: Type inference failed for: r0v0, types: [android.content.Context, com.jd.feedback.FeedbackReplyActivity] */
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                Intent intent = new Intent((Context) FeedbackReplyActivity.this, FeedbackActivity.class);
                intent.putExtra(FeedbackReplyActivity.f2130a, FeedbackReplyActivity.this.f2136g);
                FeedbackReplyActivity.this.startActivity(intent);
            }
        });
        this.f2133d = findViewById(C1287R.C1290id.recycler_view);
        this.f2134e = new C1301c(this.f2135f);
        this.f2133d.setAdapter(this.f2134e);
        this.f2133d.setLayoutManager(new LinearLayoutManager(this, 1, false));
        DividerItemDecoration dividerItemDecoration = new DividerItemDecoration(this, 1);
        dividerItemDecoration.setDrawable(getResources().getDrawable(C1287R.C1289drawable.item_divider_horizontal_transparent));
        this.f2133d.addItemDecoration(dividerItemDecoration);
    }

    public void onStart() {
        FeedbackReplyActivity.super.onStart();
        C1432a.m1962a("1", this.f2136g).doOnNext(new Consumer<MessageRequestResult>() { // from class: com.jd.feedback.FeedbackReplyActivity.4

            /* renamed from: a */
            final /* synthetic */ int f2143a = 1;

            public final /* synthetic */ void accept(Object obj) {
                MessageRequestResult messageRequestResult = (MessageRequestResult) obj;
                Log.i("FeedbackReplyActivity", "reply messages: " + new Gson().toJson(messageRequestResult));
                if (FeedbackReplyActivity.this.f2138i.size() >= this.f2143a) {
                    FeedbackReplyActivity.this.f2138i.subList(this.f2143a - 1, FeedbackReplyActivity.this.f2138i.size()).clear();
                }
                FeedbackReplyActivity.this.f2138i.add(messageRequestResult.getData());
            }
        }).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer<MessageRequestResult>() { // from class: com.jd.feedback.FeedbackReplyActivity.3

            /* renamed from: a */
            final /* synthetic */ int f2141a = 1;

            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            /* JADX WARN: Type inference failed for: r0v0, types: [android.content.Context, com.jd.feedback.FeedbackReplyActivity] */
            public final void onError(Throwable th) {
                Toast.makeText((Context) FeedbackReplyActivity.this, "数据更新失败", 0).show();
                Log.e("FeedbackReplyActivity", "Pull feedback reply error: " + th.getMessage(), th);
                th.printStackTrace();
            }

            public final /* synthetic */ void onNext(Object obj) {
                FeedbackReplyActivity.m2238b(FeedbackReplyActivity.this);
                FeedbackReplyActivity.this.f2137h = this.f2141a;
            }
        });
    }

    /* renamed from: b */
    static /* synthetic */ void m2238b(FeedbackReplyActivity feedbackReplyActivity) {
        feedbackReplyActivity.f2135f.clear();
        for (MessageRequestResult.FeedbackMessages feedbackMessages : C1415b.m1998a()) {
            Iterator<MessageBean> it = feedbackMessages.getList().iterator();
            while (true) {
                if (!it.hasNext()) {
                    break;
                }
                MessageBean next = it.next();
                if (next.getId().equals(feedbackReplyActivity.f2136g)) {
                    feedbackReplyActivity.f2135f.add(next.clone());
                    break;
                }
            }
            if (feedbackReplyActivity.f2135f.size() > 0) {
                break;
            }
        }
        for (MessageRequestResult.FeedbackMessages feedbackMessages2 : feedbackReplyActivity.f2138i) {
            for (MessageBean messageBean : feedbackMessages2.getList()) {
                feedbackReplyActivity.f2135f.add(messageBean.clone());
            }
        }
        C1301c cVar = feedbackReplyActivity.f2134e;
        cVar.f2230a = feedbackReplyActivity.f2135f;
        Collections.sort(cVar.f2230a);
        feedbackReplyActivity.f2134e.notifyDataSetChanged();
    }
}
