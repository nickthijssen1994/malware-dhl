package com.p051jd.feedback;

import android.content.Context;
import android.content.SharedPreferences;
import android.text.TextUtils;
import android.util.Log;
import com.facebook.react.uimanager.ViewProps;
import com.google.gson.Gson;
import com.huawei.hms.adapter.internal.CommonCode;
import com.jingdong.common.utils.Configuration;
import com.p051jd.feedback.network.C1432a;
import com.p051jd.feedback.network.result.FeedbackRequestResult;
import com.p051jd.feedback.p074b.C1421c;
import com.p051jd.push.common.constant.Constants;
import io.reactivex.Observable;
import io.reactivex.functions.Consumer;
import io.reactivex.functions.Function;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.LinkedHashMap;
import java.util.List;
import org.json.JSONException;
import org.json.JSONObject;

/* compiled from: TbsSdkJava */
/* renamed from: com.jd.feedback.a */
/* loaded from: classes.dex */
public final class C1292a {

    /* renamed from: a */
    private static Context f2195a;

    /* renamed from: b */
    private static String f2196b;

    /* renamed from: c */
    private static String f2197c;

    /* renamed from: d */
    private static String f2198d;

    /* renamed from: e */
    private static boolean f2199e;

    /* renamed from: f */
    private static String f2200f;

    /* renamed from: g */
    private static List<String> f2201g;

    /* renamed from: h */
    private static String f2202h;

    /* renamed from: i */
    private static boolean f2203i;

    /* renamed from: j */
    private static String f2204j;

    /* renamed from: k */
    private static String f2205k;

    /* renamed from: l */
    private static boolean f2206l;

    /* renamed from: m */
    private static String f2207m;

    /* renamed from: n */
    private static String f2208n;

    /* renamed from: o */
    private static String f2209o;

    /* renamed from: p */
    private static String f2210p;

    /* renamed from: a */
    public static void m2230a(Context context) {
        if (context != null) {
            f2195a = context;
            f2196b = m2210r();
            f2197c = m2209s();
            f2198d = m2208t();
            f2199e = m2232D();
            f2200f = m2207u();
            f2201g = m2206v();
            f2202h = m2205w();
            m2211q();
            f2203i = f2195a.getResources().getBoolean(C1287R.bool.default_phone_enable);
            f2204j = m2204x();
            f2205k = m2203y();
            m2211q();
            f2206l = f2195a.getResources().getBoolean(C1287R.bool.default_phone_required);
            f2207m = m2202z();
            f2208n = m2235A();
            f2209o = m2234B();
            f2210p = m2233C();
            m2211q();
            SharedPreferences sharedPreferences = f2195a.getSharedPreferences("feedback_sdk", 0);
            if (sharedPreferences != null) {
                String string = sharedPreferences.getString("ui_config", "");
                if (!TextUtils.isEmpty(string)) {
                    m2225c(string);
                    return;
                }
                return;
            }
            return;
        }
        throw new IllegalArgumentException("Failed to initial FeedBackConfig as context is null");
    }

    /* renamed from: q */
    private static void m2211q() {
        if (f2195a == null) {
            throw new IllegalStateException("FeedBackConfig is uninitialized");
        }
    }

    /* renamed from: c */
    public static void m2225c(String str) {
        m2211q();
        Log.d("FeedBackConfig", "Feedback config: ".concat(String.valueOf(str)));
        try {
            JSONObject jSONObject = new JSONObject(str);
            JSONObject optJSONObject = jSONObject.optJSONObject("navigation");
            if (optJSONObject != null) {
                f2196b = optJSONObject.optString(Constants.JdPushMsg.JSON_KEY_TITLE, m2210r());
                String optString = optJSONObject.optString("fontColor");
                if (!C1421c.m1985a(optString)) {
                    optString = m2209s();
                }
                f2197c = optString;
                String optString2 = optJSONObject.optString(ViewProps.BACKGROUND_COLOR);
                if (!C1421c.m1985a(optString2)) {
                    optString2 = m2208t();
                }
                f2198d = optString2;
            }
            JSONObject optJSONObject2 = jSONObject.optJSONObject("switch");
            boolean z = false;
            if (optJSONObject2 != null) {
                f2199e = optJSONObject2.optInt("showReply", 2) == 1;
            } else {
                f2199e = m2232D();
            }
            JSONObject optJSONObject3 = jSONObject.optJSONObject("feedback");
            if (optJSONObject3 != null) {
                f2200f = optJSONObject3.optString(Constants.JdPushMsg.JSON_KEY_TITLE);
                String optString3 = optJSONObject3.optString("types");
                if (!TextUtils.isEmpty(optString3)) {
                    f2201g = Arrays.asList(optString3.split(","));
                }
                f2202h = optJSONObject3.optString("tip");
            }
            JSONObject optJSONObject4 = jSONObject.optJSONObject("phone");
            if (optJSONObject4 != null) {
                f2203i = true;
                f2205k = optJSONObject4.optString("tip");
                if (optJSONObject4.optInt("phoneRequired", 2) == 1) {
                    z = true;
                }
                f2206l = z;
                f2204j = optJSONObject4.optString("barTitle", m2204x());
            } else {
                f2203i = false;
            }
            JSONObject optJSONObject5 = jSONObject.optJSONObject("button");
            if (optJSONObject5 != null) {
                f2207m = optJSONObject5.optString("text", m2202z());
                String optString4 = optJSONObject5.optString("fontColor");
                if (!C1421c.m1985a(optString4)) {
                    optString4 = m2235A();
                }
                f2208n = optString4;
                String optString5 = optJSONObject5.optString(ViewProps.BACKGROUND_COLOR);
                if (!C1421c.m1985a(optString5)) {
                    optString5 = m2234B();
                }
                f2209o = optString5;
            }
            String optString6 = jSONObject.optString(ViewProps.BACKGROUND_COLOR);
            if (!C1421c.m1985a(optString6)) {
                optString6 = m2233C();
            }
            f2210p = optString6;
        } catch (JSONException e) {
            Log.i("FeedBackConfig", "sync2Memory error when new JSONObject from ".concat(String.valueOf(str)));
            e.printStackTrace();
        }
    }

    /* renamed from: a */
    public static Observable<String> m2231a() {
        m2211q();
        Log.i("FeedbackRequestHelper", ">>>>>>>>>>>> Request openFeedbackConfig >>>>>>>>>>>>");
        C1432a.m1953a("clientVersion", "build", Configuration.PARTNER, "appKey", "secretKey");
        LinkedHashMap<String, String> b = C1432a.m1952b("openFeedbackConfig");
        ArrayList arrayList = new ArrayList();
        arrayList.add(Constants.JdPushMsg.JSON_SDK_VER);
        arrayList.add("appKey");
        arrayList.add(Constants.JdPushMsg.JSON_KEY_PKG_NAME_full);
        arrayList.add("sign");
        arrayList.add("isJailbroken");
        arrayList.add(CommonCode.MapKey.HAS_RESOLUTION);
        arrayList.add("networkName");
        arrayList.add("userId");
        arrayList.add("userName");
        b.put("body", C1432a.m1956a(arrayList, b).toString());
        return C1432a.m1957a(b, "openFeedbackConfig").map(new Function<FeedbackRequestResult, String>() { // from class: com.jd.feedback.a.2
            public final /* synthetic */ Object apply(Object obj) {
                return new Gson().toJson((FeedbackRequestResult) obj);
            }
        }).doOnNext(new Consumer<String>() { // from class: com.jd.feedback.a.1
            public final /* synthetic */ void accept(Object obj) {
                String str = (String) obj;
                C1292a.m2225c(str);
                C1292a.m2227b(str);
            }
        });
    }

    /* renamed from: r */
    private static String m2210r() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_navigation_title);
    }

    /* renamed from: s */
    private static String m2209s() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_navigation_fontColor);
    }

    /* renamed from: t */
    private static String m2208t() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_navigation_backgroundColor);
    }

    /* renamed from: u */
    private static String m2207u() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_feedback_type_title);
    }

    /* renamed from: v */
    private static List<String> m2206v() {
        m2211q();
        return Arrays.asList(f2195a.getResources().getStringArray(C1287R.array.default_feedback_types));
    }

    /* renamed from: w */
    private static String m2205w() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_feedback_tip);
    }

    /* renamed from: x */
    private static String m2204x() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_phone_title);
    }

    /* renamed from: y */
    private static String m2203y() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_phone_tip);
    }

    /* renamed from: z */
    private static String m2202z() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_button_text);
    }

    /* renamed from: A */
    private static String m2235A() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_button_fontColor);
    }

    /* renamed from: B */
    private static String m2234B() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_button_backgroundColor_enabled);
    }

    /* renamed from: C */
    private static String m2233C() {
        m2211q();
        return f2195a.getResources().getString(C1287R.string.default_backgroundColor);
    }

    /* renamed from: D */
    private static boolean m2232D() {
        m2211q();
        return f2195a.getResources().getBoolean(C1287R.bool.default_feedback_reply_enable);
    }

    /* renamed from: b */
    public static String m2228b() {
        Log.i("FeedBackConfig", "navigation_title: " + f2196b);
        if (TextUtils.isEmpty(f2196b)) {
            return m2210r();
        }
        return f2196b;
    }

    /* renamed from: c */
    public static String m2226c() {
        Log.i("FeedBackConfig", "navigation_fontColor: " + f2197c);
        if (C1421c.m1985a(f2197c)) {
            return f2197c;
        }
        return m2209s();
    }

    /* renamed from: d */
    public static String m2224d() {
        Log.i("FeedBackConfig", "navigation_backgroundColor: " + f2198d);
        if (C1421c.m1985a(f2198d)) {
            return f2198d;
        }
        return m2208t();
    }

    /* renamed from: e */
    public static String m2223e() {
        String str = f2200f;
        return str == null ? m2207u() : str;
    }

    /* renamed from: f */
    public static List<String> m2222f() {
        List<String> list = f2201g;
        return list == null ? m2206v() : list;
    }

    /* renamed from: g */
    public static String m2221g() {
        String str = f2202h;
        return str == null ? m2205w() : str;
    }

    /* renamed from: h */
    public static String m2220h() {
        if (TextUtils.isEmpty(f2204j)) {
            return m2204x();
        }
        return f2204j;
    }

    /* renamed from: i */
    public static String m2219i() {
        String str = f2205k;
        return str == null ? m2203y() : str;
    }

    /* renamed from: j */
    public static String m2218j() {
        if (TextUtils.isEmpty(f2207m)) {
            return m2202z();
        }
        return f2207m;
    }

    /* renamed from: k */
    public static String m2217k() {
        if (C1421c.m1985a(f2208n)) {
            return f2208n;
        }
        return m2235A();
    }

    /* renamed from: l */
    public static String m2216l() {
        if (C1421c.m1985a(f2209o)) {
            return f2209o;
        }
        return m2234B();
    }

    /* renamed from: m */
    public static String m2215m() {
        if (C1421c.m1985a(f2210p)) {
            return f2210p;
        }
        return m2233C();
    }

    /* renamed from: n */
    public static boolean m2214n() {
        return f2203i;
    }

    /* renamed from: o */
    public static boolean m2213o() {
        return f2206l;
    }

    /* renamed from: p */
    public static boolean m2212p() {
        return f2199e;
    }

    /* renamed from: b */
    static /* synthetic */ void m2227b(String str) {
        m2211q();
        SharedPreferences.Editor edit = f2195a.getSharedPreferences("feedback_sdk", 0).edit();
        if (edit != null) {
            edit.putString("ui_config", str);
            edit.commit();
        }
    }
}
