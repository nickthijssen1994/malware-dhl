package com.p051jd.feedback;

import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Rect;
import android.graphics.drawable.BitmapDrawable;
import android.net.Uri;
import android.os.Bundle;
import android.text.TextPaint;
import android.util.DisplayMetrics;
import android.view.View;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;
import com.github.chrisbanes.photoview.PhotoView;
import com.p051jd.feedback.FeedbackSDK;
import com.p051jd.feedback.p074b.C1422d;

/* compiled from: TbsSdkJava */
/* renamed from: com.jd.feedback.PhotoViewActivity */
/* loaded from: classes.dex */
public class PhotoViewActivity extends AppCompatActivity {

    /* renamed from: a */
    private PhotoView f2186a;

    /* renamed from: b */
    private String f2187b;

    protected void onCreate(@Nullable Bundle bundle) {
        PhotoViewActivity.super.onCreate(bundle);
        setContentView(C1287R.layout.activity_photo_view);
        this.f2187b = getIntent().getStringExtra("show_image_url");
        findViewById(C1287R.C1290id.back).setOnClickListener(new View.OnClickListener() { // from class: com.jd.feedback.PhotoViewActivity.1
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                PhotoViewActivity.this.finish();
            }
        });
        this.f2186a = findViewById(C1287R.C1290id.image);
        this.f2186a.setOnClickListener(new View.OnClickListener() { // from class: com.jd.feedback.PhotoViewActivity.2
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                PhotoViewActivity.this.finish();
            }
        });
        Bitmap a = m2236a(getResources().getString(C1287R.string.text_loading));
        Bitmap a2 = m2236a(getResources().getString(C1287R.string.text_load_failed));
        if (this.f2187b != null) {
            FeedbackSDK.getImageLoader().load(this.f2186a, Uri.parse(this.f2187b), new BitmapDrawable(a), new BitmapDrawable(a2), FeedbackSDK.ImageLoader.OPTION_FIT_CENTER);
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* renamed from: a */
    private Bitmap m2236a(String str) {
        TextPaint textPaint = new TextPaint(1);
        textPaint.setTextSize((float) C1422d.m1982b(this));
        textPaint.setColor(getResources().getColor(17170443));
        Rect rect = new Rect();
        textPaint.getTextBounds(str, 0, str.length(), rect);
        DisplayMetrics displayMetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
        Bitmap createBitmap = Bitmap.createBitmap(displayMetrics.widthPixels, displayMetrics.heightPixels, Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(createBitmap);
        canvas.drawText(str, (float) ((displayMetrics.widthPixels - rect.width()) / 2), (float) ((displayMetrics.heightPixels / 2) + (rect.height() / 2)), textPaint);
        canvas.save();
        canvas.restore();
        return createBitmap;
    }
}
