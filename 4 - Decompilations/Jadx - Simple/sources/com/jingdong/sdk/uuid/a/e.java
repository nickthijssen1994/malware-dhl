package com.jingdong.sdk.uuid.a;

import android.content.Context;
import android.net.wifi.WifiManager;
import android.os.Build;
import android.text.TextUtils;
import com.jingdong.sdk.uuid.Request;
import com.jingdong.sdk.uuid.b;
import com.jingdong.sdk.uuid.d;
import com.jingdong.sdk.uuid.f;
import java.net.NetworkInterface;
import java.util.Collections;

/* loaded from: classes.dex */
public class e implements b {
    private static String a() {
        try {
            for (NetworkInterface networkInterface : Collections.list(NetworkInterface.getNetworkInterfaces())) {
                if (networkInterface.getName().equalsIgnoreCase("wlan0")) {
                    byte[] hardwareAddress = networkInterface.getHardwareAddress();
                    if (hardwareAddress == null) {
                        return "";
                    }
                    StringBuilder sb = new StringBuilder();
                    int length = hardwareAddress.length;
                    for (int i = 0; i < length; i++) {
                        sb.append(String.format("%02x:", Byte.valueOf(hardwareAddress[i])));
                    }
                    if (sb.length() > 0) {
                        sb.deleteCharAt(sb.length() - 1);
                    }
                    return sb.toString();
                }
            }
            return "";
        } catch (Exception unused) {
            return "";
        }
    }

    public static String a(Context context) {
        String str = "";
        try {
        } catch (Exception e) {
            d.a(e);
        }
        if (context != null) {
            WifiManager wifiManager = (WifiManager) context.getApplicationContext().getSystemService("wifi");
            if (wifiManager != null) {
                str = wifiManager.getConnectionInfo().getMacAddress();
                if (Build.VERSION.SDK_INT >= 23 || str == null || str.equals("02:00:00:00:00:00")) {
                    str = a();
                }
                return a(str);
            }
            throw new IllegalStateException("Can't get WifiManager.");
        }
        throw new NullPointerException("getMacAddressStr(), context is null");
    }

    private static String a(String str) {
        return !TextUtils.isEmpty(str) ? str.trim().replaceAll("-|\\.|:", "") : str;
    }

    @Override // com.jingdong.sdk.uuid.b
    public f a(b.a aVar) {
        d.a("Enter WifiMacInterceptor intercept()");
        Request a = aVar.a();
        com.jingdong.sdk.uuid.e.a(a);
        if (TextUtils.isEmpty(com.jingdong.sdk.uuid.e.a().a("mac")) && a.isWifiMacReadable()) {
            String a2 = a(a.getContext());
            com.jingdong.sdk.uuid.e.a().a("mac", a2);
            a.fillingIdSlot("mac", a2);
        }
        return aVar.a(a);
    }
}
