package com.jingdong.sdk.uuid.a;

import android.os.Process;
import android.telephony.TelephonyManager;
import android.text.TextUtils;
import com.jingdong.sdk.uuid.Request;
import com.jingdong.sdk.uuid.b;
import com.jingdong.sdk.uuid.d;
import com.jingdong.sdk.uuid.e;
import com.jingdong.sdk.uuid.f;
import com.jingdong.sdk.uuid.i;

/* loaded from: classes.dex */
public class c implements b {
    private static String a(Request request) {
        try {
            if (request.getContext() != null) {
                TelephonyManager telephonyManager = (TelephonyManager) request.getContext().getSystemService("phone");
                if (telephonyManager != null) {
                    return request.getContext().checkPermission("android.permission.READ_PHONE_STATE", Process.myPid(), Process.myUid()) != 0 ? "" : telephonyManager.getDeviceId();
                }
                throw new NullPointerException("Cannot get the telephony manager");
            }
            throw new NullPointerException("Context is null");
        } catch (Throwable th) {
            if (th instanceof SecurityException) {
                d.a("No READ_PHONE_STATE Permission");
            }
            d.a(th);
            return "";
        }
    }

    @Override // com.jingdong.sdk.uuid.b
    public f a(b.a aVar) {
        d.a("Enter IMEIInterceptor intercept()");
        Request a = aVar.a();
        String str = "";
        e.a(a);
        if (a.isDeviceCodeReadable()) {
            String a2 = e.a().a("imei");
            if (TextUtils.isEmpty(a2)) {
                a2 = a(a);
                e.a().a("imei", a2);
                a.fillingIdSlot("imei", a2);
            }
            if (!TextUtils.isEmpty(a2)) {
                if (a.isWifiMacReadable()) {
                    str = i.a(a);
                } else {
                    str = a2 + "-";
                }
            }
        } else if (a.isWifiMacReadable()) {
            str = e.a().a("mac");
            if (!TextUtils.isEmpty(str)) {
                str = "-" + str;
            }
        }
        if (TextUtils.isEmpty(str)) {
            return aVar.a(a);
        }
        boolean a3 = i.a(str);
        if (a3) {
            e.a().b(str);
        }
        return new f(a, true).a(str).a(a3);
    }
}
