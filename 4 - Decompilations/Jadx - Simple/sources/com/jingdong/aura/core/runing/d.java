package com.jingdong.aura.core.runing;

import android.content.ComponentName;
import android.content.Context;
import android.content.ContextWrapper;
import android.content.Intent;
import android.content.ServiceConnection;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.content.res.AssetManager;
import android.content.res.Resources;
import com.jingdong.aura.core.util.a.b;
import com.jingdong.aura.core.util.a.c;
import com.jingdong.aura.core.util.h;
import org.osgi.framework.BundleException;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class d extends ContextWrapper {
    private static final b a = c.a(d.class);
    private ClassLoader b;

    public d(Context context, ClassLoader classLoader) {
        super(context);
        this.b = null;
        this.b = classLoader;
    }

    @Override // android.content.ContextWrapper, android.content.Context
    public Resources getResources() {
        return k.d;
    }

    @Override // android.content.ContextWrapper, android.content.Context
    public AssetManager getAssets() {
        return k.d.getAssets();
    }

    @Override // android.content.ContextWrapper, android.content.Context
    public PackageManager getPackageManager() {
        return getApplicationContext().getPackageManager();
    }

    @Override // android.content.ContextWrapper, android.content.Context
    public ClassLoader getClassLoader() {
        ClassLoader classLoader = this.b;
        if (classLoader != null) {
            return classLoader;
        }
        return super.getClassLoader();
    }

    @Override // android.content.ContextWrapper, android.content.Context
    public boolean bindService(Intent intent, ServiceConnection serviceConnection, int i) {
        String str;
        String str2 = null;
        if (intent.getComponent() != null) {
            str2 = intent.getComponent().getPackageName();
            str = intent.getComponent().getClassName();
        } else {
            ResolveInfo resolveService = getBaseContext().getPackageManager().resolveService(intent, 0);
            if (resolveService == null || resolveService.serviceInfo == null) {
                str = null;
            } else {
                str2 = resolveService.serviceInfo.packageName;
                str = resolveService.serviceInfo.name;
            }
        }
        if (!h.b(getBaseContext().getPackageName(), str2)) {
            return super.bindService(intent, serviceConnection, i);
        }
        c.b(str);
        String c = f.c(str);
        if (c != null) {
            com.jingdong.aura.core.b.h a2 = com.jingdong.aura.core.b.b.b.a(c);
            if (a2 != null) {
                try {
                    a2.j();
                } catch (BundleException e) {
                    a.b(e.getMessage() + " Caused by: ", e.getNestedException());
                }
            }
            return super.bindService(intent, serviceConnection, i);
        }
        try {
            if (com.jingdong.aura.core.b.b.b.b().loadClass(str) != null) {
                return super.bindService(intent, serviceConnection, i);
            }
        } catch (ClassNotFoundException unused) {
            a.e("Can't find class " + str);
        }
        return false;
    }

    @Override // android.content.ContextWrapper, android.content.Context
    public ComponentName startService(Intent intent) {
        String str;
        String str2;
        if (intent.getComponent() != null) {
            str2 = intent.getComponent().getPackageName();
            str = intent.getComponent().getClassName();
        } else {
            ResolveInfo resolveService = getBaseContext().getPackageManager().resolveService(intent, 0);
            if (resolveService == null || resolveService.serviceInfo == null) {
                str2 = null;
                str = null;
            } else {
                String str3 = resolveService.serviceInfo.packageName;
                str = resolveService.serviceInfo.name;
                str2 = str3;
            }
        }
        if (!h.b(getBaseContext().getPackageName(), str2)) {
            return super.startService(intent);
        }
        c.b(str);
        String c = f.c(str);
        if (c != null) {
            com.jingdong.aura.core.b.h a2 = com.jingdong.aura.core.b.b.b.a(c);
            if (a2 != null) {
                try {
                    a2.j();
                } catch (BundleException e) {
                    a.b(e.getMessage() + " Caused by: ", e.getNestedException());
                }
            }
            return super.startService(intent);
        }
        try {
            if (com.jingdong.aura.core.b.b.b.b().loadClass(str) != null) {
                return super.startService(intent);
            }
            return null;
        } catch (ClassNotFoundException unused) {
            a.e("Can't find class " + str);
            return null;
        }
    }
}
