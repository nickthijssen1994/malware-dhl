package com.jingdong.aura.core.b.c;

import com.jingdong.aura.core.a.a;
import com.jingdong.aura.core.b.b.b;
import com.jingdong.aura.core.util.f;
import com.jingdong.aura.wrapper.AuraConfig;
import java.io.File;
import java.util.SortedMap;
import java.util.TreeMap;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class h {
    private static final String[] a = {"com.jd.lib.productdetail", "com.jd.lib.coupon", "com.jd.lib.mycoupon", "com.jd.lib.ordercenter", "com.jd.lib.live", "com.jd.mobiledd.sdk", "com.jd.lib.personal", "com.jd.lib.cart", "com.jd.lib.login", "com.jd.lib.settlement", "com.jd.lib.push", "com.jd.lib.category"};

    public static SortedMap<Long, c> a(File file) {
        if (file == null || !file.exists()) {
            return null;
        }
        TreeMap treeMap = new TreeMap();
        File[] listFiles = file.listFiles();
        if (listFiles == null) {
            return treeMap;
        }
        for (File file2 : listFiles) {
            if (file2.getName().startsWith("package")) {
                long parseLong = Long.parseLong(com.jingdong.aura.core.util.h.d(file2.getName(), "_"));
                if (parseLong > 0) {
                    treeMap.put(Long.valueOf(parseLong), null);
                }
            }
        }
        return treeMap;
    }

    public static long b(File file) {
        if (file == null || !file.exists()) {
            return 0;
        }
        long j = -1;
        File[] listFiles = file.listFiles();
        if (listFiles == null) {
            return 0;
        }
        for (File file2 : listFiles) {
            if (file2.getName().startsWith("package")) {
                long parseLong = Long.parseLong(com.jingdong.aura.core.util.h.d(file2.getName(), "_"));
                if (parseLong > j) {
                    j = parseLong;
                }
            }
        }
        return j;
    }

    public static String a(File file, long j) {
        return d(new File(file, "package_" + String.valueOf(j)));
    }

    /* JADX WARN: Removed duplicated region for block: B:33:0x0040 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* Code decompiled incorrectly, please refer to instructions dump */
    private static java.lang.String d(java.io.File r3) {
        /*
            java.io.File r0 = new java.io.File
            java.lang.String r1 = "meta"
            r0.<init>(r3, r1)
            boolean r3 = r0.exists()
            r1 = 0
            if (r3 == 0) goto L_0x0049
            java.io.DataInputStream r3 = new java.io.DataInputStream     // Catch: IOException -> 0x002c, all -> 0x002a
            java.io.FileInputStream r2 = new java.io.FileInputStream     // Catch: IOException -> 0x002c, all -> 0x002a
            r2.<init>(r0)     // Catch: IOException -> 0x002c, all -> 0x002a
            r3.<init>(r2)     // Catch: IOException -> 0x002c, all -> 0x002a
            r3.readUTF()     // Catch: IOException -> 0x0028, all -> 0x003c
            java.lang.String r0 = r3.readUTF()     // Catch: IOException -> 0x0028, all -> 0x003c
            r3.close()     // Catch: IOException -> 0x0023
            goto L_0x0027
        L_0x0023:
            r3 = move-exception
            r3.printStackTrace()
        L_0x0027:
            return r0
        L_0x0028:
            r0 = move-exception
            goto L_0x002e
        L_0x002a:
            r0 = move-exception
            goto L_0x003e
        L_0x002c:
            r0 = move-exception
            r3 = r1
        L_0x002e:
            r0.printStackTrace()     // Catch: all -> 0x003c
            if (r3 == 0) goto L_0x0049
            r3.close()     // Catch: IOException -> 0x0037
            goto L_0x0049
        L_0x0037:
            r3 = move-exception
            r3.printStackTrace()
            goto L_0x0049
        L_0x003c:
            r0 = move-exception
            r1 = r3
        L_0x003e:
            if (r1 == 0) goto L_0x0048
            r1.close()     // Catch: IOException -> 0x0044
            goto L_0x0048
        L_0x0044:
            r3 = move-exception
            r3.printStackTrace()
        L_0x0048:
            throw r0
        L_0x0049:
            return r1
        */
        throw new UnsupportedOperationException("Method not decompiled: com.jingdong.aura.core.b.c.h.d(java.io.File):java.lang.String");
    }

    public static boolean a(long j, String str, long j2, String str2) {
        if (j > j2) {
            return true;
        }
        if (j != j2 || com.jingdong.aura.core.util.h.a(str)) {
            return false;
        }
        return com.jingdong.aura.core.util.h.a(str2) || !str.equals(str2);
    }

    public static boolean c(File file) {
        File[] listFiles;
        if (file == null || !file.exists() || (listFiles = file.listFiles()) == null) {
            return false;
        }
        for (File file2 : listFiles) {
            if (file2.isDirectory() && file2.getName().startsWith("com.") && e(file2)) {
                return true;
            }
        }
        int i = 0;
        for (File file3 : listFiles) {
            String name = file3.getName();
            if (file3.isDirectory() && name.startsWith("com.") && b.a(name) == null && a(name)) {
                f.a(file3);
                i++;
                if (i >= 2) {
                    return true;
                }
            }
        }
        if (i > 0) {
            return true;
        }
        return false;
    }

    private static boolean e(File file) {
        File[] listFiles;
        if (file == null || !file.exists() || (listFiles = file.listFiles()) == null) {
            return false;
        }
        long j = -1;
        for (File file2 : listFiles) {
            if (file2.getName().startsWith("package")) {
                long parseLong = Long.parseLong(com.jingdong.aura.core.util.h.d(file2.getName(), "_"));
                if (parseLong > j) {
                    j = parseLong;
                }
            }
        }
        if (-1 == j) {
            return false;
        }
        boolean z = false;
        for (File file3 : listFiles) {
            if (file3.getName().startsWith("package") && Long.parseLong(com.jingdong.aura.core.util.h.d(file3.getName(), "_")) != j) {
                f.a(file3);
                z = true;
            }
        }
        return z;
    }

    private static boolean a(String str) {
        if (com.jingdong.aura.core.util.h.a(str)) {
            return false;
        }
        for (String str2 : AuraConfig.AUTO) {
            if (str.equals(str2)) {
                return false;
            }
        }
        if (a.a().c(str)) {
            return false;
        }
        for (String str3 : a) {
            if (str.equals(str3)) {
                return false;
            }
        }
        return true;
    }
}
