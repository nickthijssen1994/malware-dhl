package com.jingdong.aura.wrapper;

import android.content.Context;
import android.content.pm.PackageManager;
import com.jingdong.aura.core.b.e;
import java.io.BufferedInputStream;
import java.io.File;
import java.io.IOException;
import java.security.cert.Certificate;
import java.security.cert.X509Certificate;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class a {
    private static int a;

    public static void a(Context context) {
        try {
            b.a = a(context.getPackageManager().getPackageInfo(context.getPackageName(), 64).signatures[0].toByteArray());
        } catch (PackageManager.NameNotFoundException e) {
            e.a("com.jingdong.aura", "name not fount", "ApkUtils.initHostKey_1", e);
            e.printStackTrace();
        } catch (Throwable th) {
            e.a("com.jingdong.aura", "name not fount", "ApkUtils.initHostKey_1", th);
            th.printStackTrace();
        }
    }

    public static final String a(String str) {
        Throwable th;
        JarFile jarFile;
        Throwable th2;
        JarFile jarFile2;
        JarEntry jarEntry;
        Certificate[] a2;
        try {
            jarFile = null;
        } catch (Throwable th3) {
            th = th3;
        }
        try {
            try {
                jarFile2 = new JarFile(str);
                try {
                    jarEntry = jarFile2.getJarEntry("classes.dex");
                } catch (Throwable th4) {
                    th2 = th4;
                    th2.printStackTrace();
                    return null;
                }
            } catch (IOException unused) {
                return null;
            }
        } catch (Throwable th5) {
            th = th5;
            if (0 != 0) {
                try {
                    jarFile.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            throw th;
        }
        if (jarEntry == null || (a2 = a(jarFile2, jarEntry, new byte[4096])) == null) {
            try {
                jarFile2.close();
            } catch (IOException e2) {
                e2.printStackTrace();
            }
            return null;
        }
        String a3 = a(((X509Certificate) a2[0]).getEncoded());
        try {
            jarFile2.close();
        } catch (IOException e3) {
            e3.printStackTrace();
        }
        return a3;
    }

    private static Certificate[] a(JarFile jarFile, JarEntry jarEntry, byte[] bArr) {
        try {
            BufferedInputStream bufferedInputStream = new BufferedInputStream(jarFile.getInputStream(jarEntry));
            do {
            } while (bufferedInputStream.read(bArr, 0, bArr.length) != -1);
            bufferedInputStream.close();
            if (jarEntry != null) {
                return jarEntry.getCertificates();
            }
            return null;
        } catch (Throwable unused) {
            return null;
        }
    }

    private static final String a(byte[] bArr) {
        StringBuilder sb = new StringBuilder();
        if (bArr == null || bArr.length <= 0) {
            return null;
        }
        for (byte b : bArr) {
            String hexString = Integer.toHexString(b & 255);
            if (hexString.length() < 2) {
                sb.append(0);
            }
            sb.append(hexString);
        }
        return sb.toString();
    }

    public static boolean a() {
        int i = a;
        if (i == -1) {
            for (String str : new String[]{"/system/bin/", "/system/xbin/", "/system/sbin/", "/sbin/", "/vendor/bin/"}) {
                if (new File(str, "su").exists()) {
                    a = 1;
                    return true;
                }
            }
            return false;
        } else if (i == 1) {
            return true;
        } else {
            return false;
        }
    }
}
