package com.huawei.updatesdk.a.b.d;

import android.os.AsyncTask;
import android.text.TextUtils;
import android.util.Log;
import com.huawei.updatesdk.a.a.c.g;
import com.huawei.updatesdk.a.b.d.c.a;
import com.huawei.updatesdk.a.b.d.c.c;
import com.huawei.updatesdk.a.b.d.c.d;
import java.io.IOException;
import java.io.InterruptedIOException;
import java.net.ConnectException;
import java.net.SocketTimeoutException;
import java.util.concurrent.Executor;
import org.apache.http.conn.ConnectTimeoutException;
import org.json.JSONException;
import org.json.JSONObject;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class b extends AsyncTask<c, Void, d> {
    protected c a;
    private a c;
    private d b = null;
    private com.huawei.updatesdk.a.a.a.b d = null;
    private int e = 0;

    public b(c cVar, a aVar) {
        this.a = null;
        this.c = null;
        this.a = cVar;
        this.c = aVar;
    }

    private d a(String str, String str2, d dVar) {
        try {
            dVar.fromJson(new JSONObject(str2));
            dVar.b(0);
        } catch (ClassNotFoundException | IllegalAccessException | InstantiationException | JSONException e) {
            com.huawei.updatesdk.a.a.b.a.a.a.a("StoreTask", "parse json error", e);
        }
        return dVar;
    }

    private void a(d dVar, int i, d.a aVar, Throwable th) {
        if (dVar != null) {
            dVar.b(i);
            dVar.a(aVar);
            dVar.a(th.toString());
        }
    }

    private void a(d dVar, Throwable th, String str) {
        d.a aVar;
        int i = 1;
        if (th instanceof ConnectException) {
            aVar = d.a.CONNECT_EXCEPTION;
        } else if ((th instanceof SocketTimeoutException) || (th instanceof ConnectTimeoutException)) {
            aVar = d.a.CONNECT_EXCEPTION;
            i = 2;
        } else if (th instanceof IllegalArgumentException) {
            aVar = d.a.PARAM_ERROR;
            i = 5;
        } else if (th instanceof IllegalAccessException) {
            aVar = d.a.UNKNOWN_EXCEPTION;
        } else if (th instanceof ArrayIndexOutOfBoundsException) {
            aVar = d.a.NO_PROGUARD;
            i = 6;
        } else {
            if ((th instanceof InterruptedException) || (th instanceof InterruptedIOException)) {
                a(dVar, 0, d.a.NORMAL, th);
                Log.e("StoreTask", "UpdateSDK task is canceled");
            } else if (th instanceof IOException) {
                aVar = d.a.IO_EXCEPTION;
            } else if (dVar != null) {
                dVar.a(th.toString());
            }
            a(str, th);
        }
        a(dVar, i, aVar, th);
        a(str, th);
    }

    private void a(String str, Throwable th) {
        StringBuilder sb = new StringBuilder();
        sb.append("invoke store error");
        sb.append(", exceptionType:");
        sb.append(th.getClass().getName());
        sb.append(", url:");
        sb.append(str);
        sb.append(", method:");
        sb.append(this.a.b());
        sb.append(", retryTimes:" + this.e);
        String sb2 = sb.toString();
        com.huawei.updatesdk.a.a.b.a.a.a.a("StoreTask", sb2, th);
        Log.e("StoreTask", "UpdateSDK call store error: " + sb2);
    }

    private boolean a(String str) {
        return TextUtils.isEmpty(str) || !g.d(str);
    }

    private void b(String str) {
        String str2;
        String str3;
        if (TextUtils.isEmpty(str)) {
            str2 = "StoreTask";
            str3 = "UpdateSDK response error, resData == null";
        } else {
            str2 = "StoreTask";
            str3 = "UpdateSDK response error, resData is not json string";
        }
        Log.e(str2, str3);
    }

    /* JADX WARN: Removed duplicated region for block: B:15:0x0044  */
    /* JADX WARN: Removed duplicated region for block: B:16:0x004c  */
    /* Code decompiled incorrectly, please refer to instructions dump */
    private void c(com.huawei.updatesdk.a.b.d.c.d r4) {
        /*
            r3 = this;
            boolean r0 = r3.isCancelled()
            if (r0 != 0) goto L_0x005c
            com.huawei.updatesdk.a.b.d.c.a r0 = r3.c
            if (r0 == 0) goto L_0x005c
            if (r4 != 0) goto L_0x0055
            java.lang.String r0 = "StoreTask"
            java.lang.String r1 = "notifyResult, response is null"
            com.huawei.updatesdk.a.a.b.a.a.a.b(r0, r1)
            com.huawei.updatesdk.a.b.d.c.c r0 = r3.a     // Catch: InstantiationException -> 0x0025, IllegalAccessException -> 0x001e
            java.lang.String r0 = r0.b()     // Catch: InstantiationException -> 0x0025, IllegalAccessException -> 0x001e
            com.huawei.updatesdk.a.b.d.c.d r4 = com.huawei.updatesdk.a.b.d.a.a(r0)     // Catch: InstantiationException -> 0x0025, IllegalAccessException -> 0x001e
            goto L_0x0042
        L_0x001e:
            r0 = move-exception
            java.lang.StringBuilder r1 = new java.lang.StringBuilder
            r1.<init>()
            goto L_0x002b
        L_0x0025:
            r0 = move-exception
            java.lang.StringBuilder r1 = new java.lang.StringBuilder
            r1.<init>()
        L_0x002b:
            java.lang.String r2 = "notifyResult, create response error, method:"
            r1.append(r2)
            com.huawei.updatesdk.a.b.d.c.c r2 = r3.a
            java.lang.String r2 = r2.b()
            r1.append(r2)
            java.lang.String r1 = r1.toString()
            java.lang.String r2 = "StoreTask"
            com.huawei.updatesdk.a.a.b.a.a.a.a(r2, r1, r0)
        L_0x0042:
            if (r4 != 0) goto L_0x004c
            com.huawei.updatesdk.a.b.d.c.d r4 = new com.huawei.updatesdk.a.b.d.c.d
            r4.<init>()
            com.huawei.updatesdk.a.b.d.c.d$a r0 = com.huawei.updatesdk.a.b.d.c.d.a.PARAM_ERROR
            goto L_0x004e
        L_0x004c:
            com.huawei.updatesdk.a.b.d.c.d$a r0 = com.huawei.updatesdk.a.b.d.c.d.a.UNKNOWN_EXCEPTION
        L_0x004e:
            r4.a(r0)
            r0 = 1
            r4.b(r0)
        L_0x0055:
            com.huawei.updatesdk.a.b.d.c.a r0 = r3.c
            com.huawei.updatesdk.a.b.d.c.c r1 = r3.a
            r0.b(r1, r4)
        L_0x005c:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: com.huawei.updatesdk.a.b.d.b.c(com.huawei.updatesdk.a.b.d.c.d):void");
    }

    private boolean d(d dVar) {
        if (isCancelled()) {
            return false;
        }
        if (dVar.d() != 1 && dVar.d() != 2) {
            return false;
        }
        int i = this.e;
        this.e = i + 1;
        if (i >= 3) {
            com.huawei.updatesdk.a.a.b.a.a.a.a("StoreTask", "retry completed total times = " + this.e + ",response.responseCode = " + dVar.d());
            return false;
        }
        com.huawei.updatesdk.a.a.b.a.a.a.a("StoreTask", "retry times = " + this.e + ",response.responseCode = " + dVar.d());
        return true;
    }

    private void e() {
        c(this.b);
    }

    /* JADX WARN: Removed duplicated region for block: B:28:0x0105  */
    /* JADX WARN: Removed duplicated region for block: B:33:? A[RETURN, SYNTHETIC] */
    /* Code decompiled incorrectly, please refer to instructions dump */
    protected com.huawei.updatesdk.a.b.d.c.d a() {
        /*
        // Method dump skipped, instructions count: 275
        */
        throw new UnsupportedOperationException("Method not decompiled: com.huawei.updatesdk.a.b.d.b.a():com.huawei.updatesdk.a.b.d.c.d");
    }

    /* renamed from: a */
    public d doInBackground(c... cVarArr) {
        com.huawei.updatesdk.a.a.b.a.a.a.a("StoreTask", "doInBackground, method:" + this.a.b());
        com.huawei.updatesdk.b.e.a.b.a(this);
        d c = c();
        a aVar = this.c;
        if (aVar != null) {
            aVar.a(this.a, c);
        }
        return c;
    }

    public void a(d dVar) {
    }

    public final void a(Executor executor) {
        executeOnExecutor(executor, this.a);
    }

    public void b() {
        com.huawei.updatesdk.a.a.a.b bVar = this.d;
        if (bVar != null) {
            bVar.a();
            this.d = null;
        }
    }

    /* renamed from: b */
    public void onPostExecute(d dVar) {
        com.huawei.updatesdk.a.a.b.a.a.a.a("StoreTask", "onPostExecute, method:" + this.a.b());
        com.huawei.updatesdk.b.e.a.b.a().remove(this);
        e();
    }

    public final d c() {
        d dVar = null;
        do {
            if (this.e > 0 && dVar != null) {
                com.huawei.updatesdk.a.a.b.a.a.a.a("StoreTask", "call store error! responseCode:" + dVar.d() + ", retryTimes:" + this.e);
            }
            dVar = a();
            a(dVar);
        } while (d(dVar));
        this.b = dVar;
        return this.b;
    }

    protected String d() {
        String a = com.huawei.updatesdk.b.e.a.a.a();
        return TextUtils.isEmpty(a) ? "Android/1.0" : a;
    }
}
