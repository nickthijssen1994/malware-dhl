package com.huawei.updatesdk.service.otaupdate;

import android.content.Context;
import android.os.AsyncTask;
import android.text.TextUtils;
import android.util.Log;
import java.util.Locale;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class h {
    private static h e = new h();
    private static String f;
    private String a;
    private String b;
    private String c = null;
    private String d;

    /* JADX INFO: Access modifiers changed from: private */
    /* compiled from: TbsSdkJava */
    /* loaded from: classes.dex */
    public static class b extends AsyncTask<Void, Void, String> {
        private b() {
        }

        /*  JADX ERROR: NullPointerException in pass: BlockProcessor
            java.lang.NullPointerException
            */
        /* renamed from: a */
        public java.lang.String doInBackground(java.lang.Void... r8) {
            /*
                r7 = this;
                java.lang.String r8 = com.huawei.updatesdk.service.otaupdate.h.f()
                android.net.Uri r1 = android.net.Uri.parse(r8)
                r8 = 0
                com.huawei.updatesdk.a.b.a.a r0 = com.huawei.updatesdk.a.b.a.a.c()     // Catch: Exception -> 0x006a, all -> 0x0065
                android.content.Context r0 = r0.a()     // Catch: Exception -> 0x006a, all -> 0x0065
                android.content.ContentResolver r0 = r0.getContentResolver()     // Catch: Exception -> 0x006a, all -> 0x0065
                r2 = 0
                r3 = 0
                r4 = 0
                r5 = 0
                android.database.Cursor r0 = r0.query(r1, r2, r3, r4, r5)     // Catch: Exception -> 0x006a, all -> 0x0065
                if (r0 == 0) goto L_0x0051
                boolean r1 = r0.moveToFirst()     // Catch: Exception -> 0x0060, all -> 0x005e
                if (r1 == 0) goto L_0x0051
                java.lang.String r1 = "homecountry"
                int r1 = r0.getColumnIndex(r1)     // Catch: Exception -> 0x0060, all -> 0x005e
                java.lang.String r8 = r0.getString(r1)     // Catch: Exception -> 0x0060, all -> 0x005e
                com.huawei.updatesdk.service.otaupdate.h r1 = com.huawei.updatesdk.service.otaupdate.h.g()     // Catch: Exception -> 0x0060, all -> 0x005e
                r1.a(r8)     // Catch: Exception -> 0x0060, all -> 0x005e
                com.huawei.updatesdk.service.otaupdate.h r1 = com.huawei.updatesdk.service.otaupdate.h.g()     // Catch: Exception -> 0x0060, all -> 0x005e
                java.lang.String r1 = r1.c()     // Catch: Exception -> 0x0060, all -> 0x005e
                com.huawei.updatesdk.b.b.a r2 = com.huawei.updatesdk.b.b.a.c()     // Catch: Exception -> 0x0060, all -> 0x005e
                long r3 = java.lang.System.currentTimeMillis()     // Catch: Exception -> 0x0060, all -> 0x005e
                r2.a(r1, r3)     // Catch: Exception -> 0x0060, all -> 0x005e
                com.huawei.updatesdk.b.b.a r2 = com.huawei.updatesdk.b.b.a.c()     // Catch: Exception -> 0x0060, all -> 0x005e
                r2.b(r1, r8)     // Catch: Exception -> 0x0060, all -> 0x005e
                goto L_0x0058
            L_0x0051:
                java.lang.String r1 = "ServiceZoneUtil"
                java.lang.String r2 = "cursor == null: "
                android.util.Log.e(r1, r2)     // Catch: Exception -> 0x0060, all -> 0x005e
            L_0x0058:
                if (r0 == 0) goto L_0x0096
                r0.close()     // Catch: Exception -> 0x008d
                goto L_0x0096
            L_0x005e:
                r8 = move-exception
                goto L_0x0097
            L_0x0060:
                r1 = move-exception
                r6 = r0
                r0 = r8
                r8 = r6
                goto L_0x006c
            L_0x0065:
                r0 = move-exception
                r6 = r0
                r0 = r8
                r8 = r6
                goto L_0x0097
            L_0x006a:
                r1 = move-exception
                r0 = r8
            L_0x006c:
                java.lang.String r2 = "ServiceZoneUtil"
                java.lang.StringBuilder r3 = new java.lang.StringBuilder     // Catch: all -> 0x0065
                r3.<init>()     // Catch: all -> 0x0065
                java.lang.String r4 = "close cursor error: "
                r3.append(r4)     // Catch: all -> 0x0065
                java.lang.String r1 = r1.toString()     // Catch: all -> 0x0065
                r3.append(r1)     // Catch: all -> 0x0065
                java.lang.String r1 = r3.toString()     // Catch: all -> 0x0065
                android.util.Log.e(r2, r1)     // Catch: all -> 0x0065
                if (r8 == 0) goto L_0x0095
                r8.close()     // Catch: Exception -> 0x008c
                goto L_0x0095
            L_0x008c:
                r8 = r0
            L_0x008d:
                java.lang.String r0 = "ServiceZoneUtil"
                java.lang.String r1 = "cursor Execption"
                com.huawei.updatesdk.a.a.b.a.a.a.b(r0, r1)
                goto L_0x0096
            L_0x0095:
                r8 = r0
            L_0x0096:
                return r8
            L_0x0097:
                if (r0 == 0) goto L_0x00a4
                r0.close()     // Catch: Exception -> 0x009d
                goto L_0x00a4
            L_0x009d:
                java.lang.String r0 = "ServiceZoneUtil"
                java.lang.String r1 = "cursor Execption"
                com.huawei.updatesdk.a.a.b.a.a.a.b(r0, r1)
            L_0x00a4:
                throw r8
            */
            throw new UnsupportedOperationException("Method not decompiled: com.huawei.updatesdk.service.otaupdate.h.b.doInBackground(java.lang.Void[]):java.lang.String");
        }
    }

    private h() {
    }

    static /* synthetic */ String f() {
        return f;
    }

    public static h g() {
        return e;
    }

    public String a() {
        return !TextUtils.isEmpty(this.a) ? this.a : this.b;
    }

    public void a(Context context, String str) {
        this.b = null;
        if (com.huawei.updatesdk.b.f.b.d(context, str)) {
            if (Math.abs(System.currentTimeMillis() - com.huawei.updatesdk.b.b.a.c().b(str)) < 86400000) {
                g().a(com.huawei.updatesdk.b.b.a.c().a(str));
                return;
            }
            f = String.format(Locale.ROOT, "content://%s.commondata/item/1", str);
            b bVar = new b();
            bVar.executeOnExecutor(Executors.newSingleThreadExecutor(), new Void[0]);
            try {
                bVar.get(1000, TimeUnit.MILLISECONDS);
            } catch (Exception e2) {
                bVar.cancel(true);
                Log.e("ServiceZoneUtil", "init AccountZone error: " + e2.toString());
            }
        }
    }

    public void a(String str) {
        this.b = str;
    }

    public String b() {
        return this.a;
    }

    public void b(String str) {
        this.a = str;
    }

    public String c() {
        return this.c;
    }

    public void c(String str) {
        this.d = str;
    }

    public void d(String str) {
        this.c = str;
    }

    public boolean d() {
        String str = this.a;
        if (str != null) {
            return str.equals(this.b);
        }
        return true;
    }

    public boolean e() {
        return TextUtils.equals(this.d, "AppTouch");
    }
}
