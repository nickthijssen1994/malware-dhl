package com.jd.feedback.album.app.gallery;

import android.app.Activity;
import android.content.res.ColorStateList;
import android.os.Build;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.Window;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TextView;
import androidx.appcompat.widget.AppCompatCheckBox;
import androidx.viewpager.widget.ViewPager;
import com.jd.feedback.R;
import com.jd.feedback.album.app.a;
import com.jd.feedback.album.c.b;
import com.jd.feedback.album.d;
import java.util.List;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public final class a<Data> extends a.d<Data> implements View.OnClickListener {
    ViewPager a;
    private Activity d;
    private MenuItem e;
    private RelativeLayout f;
    private TextView g;
    private AppCompatCheckBox h;
    private FrameLayout i;

    public a(Activity activity, a.c cVar) {
        super(activity, cVar);
        this.d = activity;
        this.a = activity.findViewById(R.id.view_pager);
        this.f = (RelativeLayout) activity.findViewById(R.id.layout_bottom);
        this.g = (TextView) activity.findViewById(R.id.tv_duration);
        this.h = activity.findViewById(R.id.check_box);
        this.i = (FrameLayout) activity.findViewById(R.id.layout_layer);
        this.h.setOnClickListener(this);
        this.i.setOnClickListener(this);
    }

    @Override // com.jd.feedback.album.mvp.c
    public final void a(MenuItem menuItem) {
        if (menuItem.getItemId() == R.id.album_menu_finish) {
            ((a.c) this.c).d();
        }
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void a(com.jd.feedback.album.a.c.a aVar, boolean z) {
        Activity activity = this.d;
        if (Build.VERSION.SDK_INT >= 21) {
            Window window = activity.getWindow();
            View decorView = window.getDecorView();
            decorView.setSystemUiVisibility(decorView.getSystemUiVisibility() | 1024 | 256);
            window.setStatusBarColor(0);
        }
        b.a(this.d);
        b.a(this.d, 0);
        b.b(this.d, g(R.color.albumSheetBottom));
        d(R.drawable.album_ic_back_white);
        if (!z) {
            this.e.setVisible(false);
            this.h.setVisibility(8);
        } else {
            ColorStateList colorStateList = aVar.f;
            this.h.setSupportButtonTintList(colorStateList);
            this.h.setTextColor(colorStateList);
        }
        this.a.addOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() { // from class: com.jd.feedback.album.app.gallery.a.1
            public final void onPageSelected(int i) {
                ((a.c) a.this.c).a(i);
            }
        });
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void a(List<Data> list) {
        AnonymousClass2 r0 = new b<Data>(this.b.d(), list) { // from class: com.jd.feedback.album.app.gallery.a.2
            @Override // com.jd.feedback.album.app.gallery.b
            protected final void a(ImageView imageView, Data data) {
                if (data instanceof String) {
                    com.jd.feedback.album.b.a().a.a(imageView, (String) data);
                } else if (data instanceof d) {
                    com.jd.feedback.album.b.a().a.a(imageView, (d) data);
                }
            }
        };
        r0.b = new View.OnClickListener() { // from class: com.jd.feedback.album.app.gallery.a.3
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                a.this.a.getCurrentItem();
                ((a.c) a.this.c).a();
            }
        };
        r0.c = new View.OnClickListener() { // from class: com.jd.feedback.album.app.gallery.a.4
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                a.this.a.getCurrentItem();
                ((a.c) a.this.c).b();
            }
        };
        if (r0.getCount() > 3) {
            this.a.setOffscreenPageLimit(3);
        } else if (r0.getCount() > 2) {
            this.a.setOffscreenPageLimit(2);
        }
        this.a.setAdapter(r0);
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void a(int i) {
        this.a.setCurrentItem(i);
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void a(boolean z) {
        this.g.setVisibility(z ? 0 : 8);
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void a(String str) {
        this.g.setText(str);
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void b(boolean z) {
        this.h.setChecked(z);
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void c(boolean z) {
        this.f.setVisibility(z ? 0 : 8);
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void d(boolean z) {
        this.i.setVisibility(z ? 0 : 8);
    }

    @Override // com.jd.feedback.album.app.a.d
    public final void b(String str) {
        this.e.setTitle(str);
    }

    @Override // android.view.View.OnClickListener
    public final void onClick(View view) {
        if (view == this.h) {
            ((a.c) this.c).c();
        }
    }

    @Override // com.jd.feedback.album.mvp.c
    public final void a(Menu menu) {
        this.b.b().inflate(R.menu.album_menu_gallery, menu);
        this.e = menu.findItem(R.id.album_menu_finish);
    }
}
