package com.jd.feedback.album.app.gallery;

import android.os.Bundle;
import androidx.annotation.Nullable;
import com.jd.feedback.R;
import com.jd.feedback.album.app.a;
import com.jd.feedback.album.h;
import com.jd.feedback.album.mvp.BaseActivity;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class GalleryActivity extends BaseActivity implements a.c {
    public static com.jd.feedback.album.a<ArrayList<String>> a;
    public static com.jd.feedback.album.a<String> b;
    public static h<String> c;
    public static h<String> d;
    static final /* synthetic */ boolean e = !GalleryActivity.class.desiredAssertionStatus();
    private com.jd.feedback.album.a.c.a f;
    private ArrayList<String> j;
    private int k;
    private boolean l;
    private Map<String, Boolean> m;
    private a.d<String> n;

    /* JADX WARN: Multi-variable type inference failed */
    @Override // com.jd.feedback.album.mvp.BaseActivity
    public void onCreate(@Nullable Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.album_activity_gallery);
        this.n = new a(this, this);
        Bundle extras = getIntent().getExtras();
        if (e || extras != null) {
            this.f = (com.jd.feedback.album.a.c.a) extras.getParcelable("KEY_INPUT_WIDGET");
            this.j = extras.getStringArrayList("KEY_INPUT_CHECKED_LIST");
            this.k = extras.getInt("KEY_INPUT_CURRENT_POSITION");
            this.l = extras.getBoolean("KEY_INPUT_GALLERY_CHECKABLE");
            this.m = new HashMap();
            Iterator<String> it = this.j.iterator();
            while (it.hasNext()) {
                this.m.put(it.next(), Boolean.TRUE);
            }
            this.n.c(this.f.e);
            this.n.a(this.f, this.l);
            if (!this.l) {
                this.n.c(false);
            }
            this.n.d(false);
            this.n.a(false);
            this.n.a(this.j);
            int i = this.k;
            if (i == 0) {
                a(i);
            } else {
                this.n.a(i);
            }
            e();
            return;
        }
        throw new AssertionError();
    }

    private void e() {
        int i = 0;
        for (Map.Entry<String, Boolean> entry : this.m.entrySet()) {
            if (entry.getValue().booleanValue()) {
                i++;
            }
        }
        String string = getString(R.string.album_menu_finish);
        this.n.b(string + "(" + i + " / " + this.j.size() + ")");
    }

    @Override // com.jd.feedback.album.app.a.c
    public final void a() {
        if (c != null) {
            this.j.get(this.k);
        }
    }

    @Override // com.jd.feedback.album.app.a.c
    public final void b() {
        if (d != null) {
            this.j.get(this.k);
        }
    }

    @Override // com.jd.feedback.album.app.a.c
    public final void a(int i) {
        this.k = i;
        a.d<String> dVar = this.n;
        dVar.d((i + 1) + " / " + this.j.size());
        if (this.l) {
            this.n.b(this.m.get(this.j.get(i)).booleanValue());
        }
    }

    @Override // com.jd.feedback.album.app.a.c
    public final void c() {
        String str = this.j.get(this.k);
        Map<String, Boolean> map = this.m;
        map.put(str, Boolean.valueOf(!map.get(str).booleanValue()));
        e();
    }

    @Override // com.jd.feedback.album.app.a.c
    public final void d() {
        if (a != null) {
            ArrayList<String> arrayList = new ArrayList<>();
            for (Map.Entry<String, Boolean> entry : this.m.entrySet()) {
                if (entry.getValue().booleanValue()) {
                    arrayList.add(entry.getKey());
                }
            }
            a.a(arrayList);
        }
        finish();
    }

    public void onBackPressed() {
        com.jd.feedback.album.a<String> aVar = b;
        if (aVar != null) {
            aVar.a("User canceled.");
        }
        finish();
    }

    public void finish() {
        a = null;
        b = null;
        c = null;
        d = null;
        super.finish();
    }
}
