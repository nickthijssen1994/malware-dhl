package com.jd.feedback;

import android.content.Context;
import android.os.Bundle;
import android.text.TextUtils;
import android.view.View;
import android.widget.Toast;
import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.AppCompatImageView;
import androidx.recyclerview.widget.DividerItemDecoration;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;
import com.jd.feedback.a.a;
import com.jd.feedback.b;
import com.jd.feedback.network.beans.MessageBean;
import com.jd.feedback.network.result.MessageRequestResult;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class FeedbackHistoryActivity extends AppCompatActivity {
    private static String a = "FeedbackHistoryActivity";
    private AppCompatImageView b;
    private RecyclerView c;
    private View d;
    private a e;
    private List<MessageBean> f = new ArrayList();
    private int g = 0;

    /* JADX WARN: Multi-variable type inference failed */
    public void onCreate(Bundle bundle) {
        FeedbackHistoryActivity.super.onCreate(bundle);
        setContentView(R.layout.activity_feedback_history);
        this.b = findViewById(R.id.btn_back);
        this.b.setOnClickListener(new View.OnClickListener() { // from class: com.jd.feedback.FeedbackHistoryActivity.1
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                FeedbackHistoryActivity.this.finish();
            }
        });
        this.d = findViewById(R.id.no_data);
        this.e = new a(this.f);
        this.c = findViewById(R.id.recycler_view);
        this.c.setAdapter(this.e);
        this.c.setLayoutManager(new LinearLayoutManager(this, 1, false));
        DividerItemDecoration dividerItemDecoration = new DividerItemDecoration(this, 1);
        dividerItemDecoration.setDrawable(getResources().getDrawable(R.drawable.item_divider_horizontal_transparent));
        this.c.addItemDecoration(dividerItemDecoration);
        b.a((Context) this);
        a();
    }

    public void onStart() {
        FeedbackHistoryActivity.super.onStart();
        if (!TextUtils.isEmpty(FeedbackSDK.getUserId())) {
            b.a(new b.a() { // from class: com.jd.feedback.FeedbackHistoryActivity.2
                final /* synthetic */ int a = 1;

                @Override // com.jd.feedback.b.a
                public final void a(int i) {
                    if (i > 0) {
                        FeedbackHistoryActivity.this.a();
                        FeedbackHistoryActivity.this.g = this.a;
                    }
                }

                @Override // com.jd.feedback.b.a
                public final void a() {
                    FeedbackHistoryActivity.a(FeedbackHistoryActivity.this, "数据更新失败");
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void a() {
        this.f.clear();
        for (MessageRequestResult.FeedbackMessages feedbackMessages : b.a()) {
            for (MessageBean messageBean : feedbackMessages.getList()) {
                this.f.add(messageBean.clone());
            }
        }
        a aVar = this.e;
        aVar.a = this.f;
        Collections.sort(aVar.a);
        Collections.reverse(aVar.a);
        this.e.notifyDataSetChanged();
        if (this.f.size() > 0) {
            this.d.setVisibility(8);
        } else {
            this.d.setVisibility(0);
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    static /* synthetic */ void a(FeedbackHistoryActivity feedbackHistoryActivity, String str) {
        Toast.makeText((Context) feedbackHistoryActivity, (CharSequence) str, 0).show();
    }
}
