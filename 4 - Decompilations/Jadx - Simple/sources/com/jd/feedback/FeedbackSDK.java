package com.jd.feedback;

import android.content.Context;
import android.content.Intent;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.Build;
import android.util.Log;
import android.widget.ImageView;
import androidx.annotation.Nullable;
import androidx.lifecycle.LifecycleOwner;
import com.google.gson.Gson;
import com.jd.android.sdk.coreinfo.a;
import com.jd.feedback.album.b;
import com.jd.feedback.album.c;
import com.jd.feedback.album.d;
import com.jd.feedback.album.f;
import com.jd.feedback.b.g;
import com.jd.feedback.b.h;
import com.jd.feedback.network.result.FeedbackRequestResult;
import com.jd.feedback.network.result.MessageRequestResult;
import com.jd.feedback.network.result.StatisticsRequestResult;
import com.uber.autodispose.l;
import io.reactivex.ObservableSource;
import io.reactivex.Observer;
import io.reactivex.android.schedulers.AndroidSchedulers;
import io.reactivex.disposables.Disposable;
import io.reactivex.functions.Consumer;
import io.reactivex.functions.Function;
import io.reactivex.schedulers.Schedulers;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Pattern;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class FeedbackSDK {
    public static final String INTENT_KEY_IMAGES2ADD;
    private static final String SDK_VERSION;
    public static final String TAG;
    private static a sConfig;
    private static Context sContext;
    private static ImageLoader sImageLoader = ImageLoader.DEFAULT;
    private static boolean isTest = false;
    private static boolean initialized = false;

    /* compiled from: TbsSdkJava */
    /* loaded from: classes.dex */
    public interface FeedbackRequestListener {
        void onFailure(Throwable th);

        void onSuccess(String str);
    }

    /* compiled from: TbsSdkJava */
    /* loaded from: classes.dex */
    public interface ImageLoader {
        public static final ImageLoader DEFAULT = new ImageLoader() { // from class: com.jd.feedback.FeedbackSDK.ImageLoader.1
            @Override // com.jd.feedback.FeedbackSDK.ImageLoader
            public final void load(ImageView imageView, Uri uri, Drawable drawable, Drawable drawable2, String str) {
            }
        };
        public static final String OPTION_CENTER_CROP;
        public static final String OPTION_FIT_CENTER;

        void load(ImageView imageView, Uri uri, Drawable drawable, Drawable drawable2, String str);
    }

    /* compiled from: TbsSdkJava */
    /* loaded from: classes.dex */
    public interface PullConfigListener extends FeedbackRequestListener {
    }

    /* compiled from: TbsSdkJava */
    /* loaded from: classes.dex */
    public interface UploadFeedbackListener extends FeedbackRequestListener {
    }

    public static String getClient() {
        return "android";
    }

    @Deprecated
    public static String getNetworkCode() {
        return "";
    }

    public static String getSdkVersion() {
        return SDK_VERSION;
    }

    public static ImageLoader getImageLoader() {
        return sImageLoader;
    }

    public static void init(Context context, ImageLoader imageLoader) {
        if (initialized) {
            Log.i(TAG, "FeedbackSDK has been initialized!");
        } else if (context != null) {
            if (context.getApplicationContext() == null) {
                sContext = context;
            } else {
                sContext = context.getApplicationContext();
            }
            if (imageLoader != null) {
                sImageLoader = imageLoader;
            }
            checkMateData(sContext);
            sConfig = new a((byte) 0);
            a.a(sContext);
            c.a a2 = c.a();
            a2.a = new f() { // from class: com.jd.feedback.FeedbackSDK.1
                @Override // com.jd.feedback.album.f
                public final void a(ImageView imageView, d dVar) {
                    ImageLoader imageLoader2 = FeedbackSDK.sImageLoader;
                    imageLoader2.load(imageView, Uri.parse("content://media/external/images/media/" + dVar.a), FeedbackSDK.sContext.getResources().getDrawable(R.drawable.placeholder), FeedbackSDK.sContext.getResources().getDrawable(R.drawable.placeholder), ImageLoader.OPTION_CENTER_CROP);
                }

                @Override // com.jd.feedback.album.f
                public final void a(ImageView imageView, String str) {
                    Uri a3 = g.a(FeedbackSDK.getContext(), str);
                    Log.d(FeedbackSDK.TAG, "image uri: " + a3.toString());
                    if (a3 == null) {
                        Log.w(FeedbackSDK.TAG, "image uri is null");
                    } else {
                        FeedbackSDK.sImageLoader.load(imageView, a3, FeedbackSDK.sContext.getResources().getDrawable(R.drawable.placeholder), FeedbackSDK.sContext.getResources().getDrawable(R.drawable.placeholder), ImageLoader.OPTION_CENTER_CROP);
                    }
                }
            };
            c a3 = a2.a();
            if (b.a == null) {
                b.a = a3;
            } else {
                Log.w("Album", new IllegalStateException("Illegal operation, only allowed to configure once."));
            }
            initialized = true;
        } else {
            throw new IllegalStateException("Failed to initial FeedbackSDK as context is null");
        }
    }

    private static void checkMateData(Context context) {
        try {
            ApplicationInfo applicationInfo = context.getApplicationContext().getPackageManager().getApplicationInfo(context.getPackageName(), 128);
            if (applicationInfo != null && applicationInfo.metaData != null) {
                isTest = applicationInfo.metaData.getBoolean("feedbackSdk-isTest", false);
            }
        } catch (PackageManager.NameNotFoundException e) {
            e.printStackTrace();
        }
    }

    public static boolean isTest() {
        return isTest;
    }

    public static Context getContext() {
        checkFeedbackSDKState();
        return sContext;
    }

    private static a getConfig() {
        checkFeedbackSDKState();
        return sConfig;
    }

    private static void checkFeedbackSDKState() {
        if (sContext == null) {
            throw new IllegalStateException("FeedbackSDK is uninitialized");
        }
    }

    /* compiled from: TbsSdkJava */
    /* loaded from: classes.dex */
    public static class a {
        String a;
        String b;
        byte[] c;
        String d;
        String e;
        String f;
        String g;
        String h;
        String i;
        String j;
        String k;
        String l;
        String m;
        String n;
        String o;

        /* synthetic */ a(byte b) {
            this();
        }

        private a() {
            this.a = "48c1055755f6421cb03046f6362fca35";
            this.c = new byte[]{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
            this.d = "open-feedback-app";
            this.e = "";
            this.n = "Android";
        }
    }

    public static String getHostSecretKey() {
        return getConfig().a;
    }

    public static String getSecretKey() {
        return getConfig().b;
    }

    public static byte[] getAesIV() {
        return getConfig().c;
    }

    public static String getAppId() {
        return getConfig().d;
    }

    public static String getTime() {
        return String.valueOf(System.currentTimeMillis());
    }

    public static String getClientVersion() {
        return getConfig().e;
    }

    public static String getBuild() {
        return getConfig().f;
    }

    public static String getUuid() {
        return getConfig().g;
    }

    public static String getOsVersion() {
        return String.valueOf(Build.VERSION.RELEASE);
    }

    public static String getNetworkType() {
        return a.b.m(getContext());
    }

    public static String getPartner() {
        return getConfig().h;
    }

    public static String getScreen() {
        Context context = getContext();
        float f = context.getResources().getDisplayMetrics().scaledDensity;
        float f2 = context.getResources().getDisplayMetrics().density;
        float f3 = context.getResources().getDisplayMetrics().xdpi;
        float f4 = context.getResources().getDisplayMetrics().ydpi;
        float f5 = ((float) context.getResources().getDisplayMetrics().widthPixels) / f3;
        return (f5 * f5) + "x" + ((((float) context.getResources().getDisplayMetrics().heightPixels) / f4) * f5);
    }

    public static String getBrand() {
        return Build.BRAND;
    }

    public static String getModel() {
        return Build.MODEL;
    }

    public static String getAppKey() {
        return getConfig().i;
    }

    public static String getPackageName() {
        return getConfig().j;
    }

    public static boolean getIsJailbroken() {
        getContext();
        return com.jd.feedback.b.b.a();
    }

    public static String getResolution() {
        return a.b.h(getContext());
    }

    public static String getNetworkName() {
        Context context = getContext();
        String str = "";
        if (h.a("android.permission.READ_PHONE_STATE")) {
            str = a.b.c(context);
        }
        if (str.startsWith("46000") || str.startsWith("46002") || str.startsWith("46004") || str.startsWith("46007") || str.startsWith("46008")) {
            return "中国移动";
        }
        if (str.startsWith("46001") || str.startsWith("46006") || str.startsWith("46009")) {
            return "中国联通";
        }
        return (str.startsWith("46003") || str.startsWith("46005") || str.startsWith("46011")) ? "中国电信" : "未知";
    }

    public static String getUserId() {
        return getConfig().k;
    }

    public static String getUserName() {
        return getConfig().l;
    }

    public static String getUserPhoneNumber() {
        return getConfig().m;
    }

    public static String getSource() {
        return getConfig().n;
    }

    public static String getExt() {
        return getConfig().o;
    }

    public static void setExt(String str) {
        getConfig().o = str;
    }

    public static void setClientVersion(String str) {
        getConfig().e = str;
    }

    public static void setUserPhoneNumber(String str) {
        getConfig().m = str;
    }

    public static void setBuild(String str) {
        getConfig().f = str;
    }

    public static void setUuid(String str) {
        getConfig().g = str;
    }

    public static void setPartner(String str) {
        getConfig().h = str;
    }

    public static void setAppKey(String str) {
        getConfig().i = str;
    }

    public static void setUserId(String str) {
        getConfig().k = str;
    }

    public static void setUserName(String str) {
        getConfig().l = str;
    }

    public static void setSecret(String str) {
        getConfig().b = str;
    }

    public static void setPackageName(String str) {
        getConfig().j = str;
    }

    public static void setSource(String str) {
        getConfig().n = str;
    }

    public static void api_pullconfig(LifecycleOwner lifecycleOwner, final PullConfigListener pullConfigListener) {
        checkFeedbackSDKState();
        ((l) a.a().subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).as(com.uber.autodispose.a.a(com.uber.autodispose.android.lifecycle.a.a(lifecycleOwner)))).a(new Observer<String>() { // from class: com.jd.feedback.FeedbackSDK.12
            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            public final /* synthetic */ void onNext(Object obj) {
                String str = (String) obj;
                PullConfigListener pullConfigListener2 = pullConfigListener;
                if (pullConfigListener2 != null) {
                    pullConfigListener2.onSuccess(str);
                }
            }

            public final void onError(Throwable th) {
                PullConfigListener pullConfigListener2 = pullConfigListener;
                if (pullConfigListener2 != null) {
                    pullConfigListener2.onFailure(th);
                }
                Log.e(FeedbackSDK.TAG, "拉取配置失败: " + th.getMessage(), th);
            }
        });
    }

    public static void api_pullconfig(final PullConfigListener pullConfigListener) {
        checkFeedbackSDKState();
        a.a().subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer<String>() { // from class: com.jd.feedback.FeedbackSDK.15
            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            public final /* synthetic */ void onNext(Object obj) {
                String str = (String) obj;
                PullConfigListener pullConfigListener2 = pullConfigListener;
                if (pullConfigListener2 != null) {
                    pullConfigListener2.onSuccess(str);
                }
            }

            public final void onError(Throwable th) {
                PullConfigListener pullConfigListener2 = pullConfigListener;
                if (pullConfigListener2 != null) {
                    pullConfigListener2.onFailure(th);
                }
                Log.e(FeedbackSDK.TAG, "拉取配置失败: " + th.getMessage(), th);
            }
        });
    }

    public static void api_uploadFeedback(final String str, final String str2, final String str3, List list, final UploadFeedbackListener uploadFeedbackListener) {
        checkFeedbackSDKState();
        final ArrayList<Uri> a2 = g.a(list, false);
        c.a(a2).subscribeOn(Schedulers.io()).toList().doOnSuccess(new Consumer<List<String>>() { // from class: com.jd.feedback.FeedbackSDK.18
            public final /* synthetic */ void accept(Object obj) {
                if (((List) obj).size() < a2.size()) {
                    throw new Exception("部分图片上传失败");
                }
            }
        }).flatMapObservable(new Function<List<String>, ObservableSource<FeedbackRequestResult>>() { // from class: com.jd.feedback.FeedbackSDK.17
            public final /* synthetic */ Object apply(Object obj) {
                return com.jd.feedback.network.a.a(str, str2, str3, (List) obj);
            }
        }).observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer<FeedbackRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.16
            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            public final /* synthetic */ void onNext(Object obj) {
                FeedbackRequestResult feedbackRequestResult = (FeedbackRequestResult) obj;
                UploadFeedbackListener uploadFeedbackListener2 = uploadFeedbackListener;
                if (uploadFeedbackListener2 != null) {
                    uploadFeedbackListener2.onSuccess(new Gson().toJson(feedbackRequestResult));
                }
            }

            public final void onError(Throwable th) {
                UploadFeedbackListener uploadFeedbackListener2 = uploadFeedbackListener;
                if (uploadFeedbackListener2 != null) {
                    uploadFeedbackListener2.onFailure(th);
                }
                Log.e(FeedbackSDK.TAG, "上传反馈失败: " + th.getMessage(), th);
            }
        });
    }

    public static void api_uploadFeedback(LifecycleOwner lifecycleOwner, final String str, final String str2, final String str3, List list, final UploadFeedbackListener uploadFeedbackListener) {
        checkFeedbackSDKState();
        final ArrayList<Uri> a2 = g.a(list, false);
        ((l) c.a(a2).subscribeOn(Schedulers.io()).toList().doOnSuccess(new Consumer<List<String>>() { // from class: com.jd.feedback.FeedbackSDK.21
            public final /* synthetic */ void accept(Object obj) {
                if (((List) obj).size() < a2.size()) {
                    throw new Exception("部分图片上传失败");
                }
            }
        }).flatMapObservable(new Function<List<String>, ObservableSource<FeedbackRequestResult>>() { // from class: com.jd.feedback.FeedbackSDK.20
            public final /* synthetic */ Object apply(Object obj) {
                return com.jd.feedback.network.a.a(str, str2, str3, (List) obj);
            }
        }).observeOn(AndroidSchedulers.mainThread()).as(com.uber.autodispose.a.a(com.uber.autodispose.android.lifecycle.a.a(lifecycleOwner)))).a(new Observer<FeedbackRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.19
            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            public final /* synthetic */ void onNext(Object obj) {
                FeedbackRequestResult feedbackRequestResult = (FeedbackRequestResult) obj;
                UploadFeedbackListener uploadFeedbackListener2 = uploadFeedbackListener;
                if (uploadFeedbackListener2 != null) {
                    uploadFeedbackListener2.onSuccess(new Gson().toJson(feedbackRequestResult));
                }
            }

            public final void onError(Throwable th) {
                UploadFeedbackListener uploadFeedbackListener2 = uploadFeedbackListener;
                if (uploadFeedbackListener2 != null) {
                    uploadFeedbackListener2.onFailure(th);
                }
                Log.e(FeedbackSDK.TAG, "上传反馈失败： " + th.getMessage(), th);
            }
        });
    }

    public static void api_uploadReply(final String str, List list, final String str2, final FeedbackRequestListener feedbackRequestListener) {
        checkFeedbackSDKState();
        final ArrayList<Uri> a2 = g.a(list, false);
        c.a(a2, str2).subscribeOn(Schedulers.io()).toList().doOnSuccess(new Consumer<List<String>>() { // from class: com.jd.feedback.FeedbackSDK.4
            public final /* synthetic */ void accept(Object obj) {
                if (((List) obj).size() < a2.size()) {
                    throw new Exception("部分图片上传失败");
                }
            }
        }).flatMapObservable(new Function<List<String>, ObservableSource<FeedbackRequestResult>>() { // from class: com.jd.feedback.FeedbackSDK.3
            public final /* synthetic */ Object apply(Object obj) {
                return com.jd.feedback.network.a.a(str, (List) obj, str2);
            }
        }).observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer<FeedbackRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.2
            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            public final /* synthetic */ void onNext(Object obj) {
                FeedbackRequestResult feedbackRequestResult = (FeedbackRequestResult) obj;
                FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                if (feedbackRequestListener2 != null) {
                    feedbackRequestListener2.onSuccess(new Gson().toJson(feedbackRequestResult));
                }
            }

            public final void onError(Throwable th) {
                FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                if (feedbackRequestListener2 != null) {
                    feedbackRequestListener2.onFailure(th);
                }
                Log.e(FeedbackSDK.TAG, "回复上报失败： " + th.getMessage(), th);
            }
        });
    }

    public static void api_uploadReply(LifecycleOwner lifecycleOwner, final String str, List list, final String str2, final FeedbackRequestListener feedbackRequestListener) {
        checkFeedbackSDKState();
        final ArrayList<Uri> a2 = g.a(list, false);
        ((l) c.a(a2, str2).subscribeOn(Schedulers.io()).toList().doOnSuccess(new Consumer<List<String>>() { // from class: com.jd.feedback.FeedbackSDK.7
            public final /* synthetic */ void accept(Object obj) {
                if (((List) obj).size() < a2.size()) {
                    throw new Exception("部分图片上传失败");
                }
            }
        }).flatMapObservable(new Function<List<String>, ObservableSource<FeedbackRequestResult>>() { // from class: com.jd.feedback.FeedbackSDK.6
            public final /* synthetic */ Object apply(Object obj) {
                return com.jd.feedback.network.a.a(str, (List) obj, str2);
            }
        }).observeOn(AndroidSchedulers.mainThread()).as(com.uber.autodispose.a.a(com.uber.autodispose.android.lifecycle.a.a(lifecycleOwner)))).a(new Observer<FeedbackRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.5
            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            public final /* synthetic */ void onNext(Object obj) {
                FeedbackRequestResult feedbackRequestResult = (FeedbackRequestResult) obj;
                FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                if (feedbackRequestListener2 != null) {
                    feedbackRequestListener2.onSuccess(new Gson().toJson(feedbackRequestResult));
                }
            }

            public final void onError(Throwable th) {
                FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                if (feedbackRequestListener2 != null) {
                    feedbackRequestListener2.onFailure(th);
                }
                Log.e(FeedbackSDK.TAG, "回复上报失败： " + th.getMessage(), th);
            }
        });
    }

    public static void api_getFeedbackStatistics(final FeedbackRequestListener feedbackRequestListener) {
        checkFeedbackSDKState();
        com.jd.feedback.network.a.a().subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer<StatisticsRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.8
            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            public final /* synthetic */ void onNext(Object obj) {
                StatisticsRequestResult statisticsRequestResult = (StatisticsRequestResult) obj;
                FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                if (feedbackRequestListener2 != null) {
                    feedbackRequestListener2.onSuccess(new Gson().toJson(statisticsRequestResult));
                }
            }

            public final void onError(Throwable th) {
                FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                if (feedbackRequestListener2 != null) {
                    feedbackRequestListener2.onFailure(th);
                }
                Log.e(FeedbackSDK.TAG, "获取未读消息失败: " + th.getMessage(), th);
            }
        });
    }

    public static void api_getFeedbackStatistics(LifecycleOwner lifecycleOwner, final FeedbackRequestListener feedbackRequestListener) {
        checkFeedbackSDKState();
        ((l) com.jd.feedback.network.a.a().subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).as(com.uber.autodispose.a.a(com.uber.autodispose.android.lifecycle.a.a(lifecycleOwner)))).a(new Observer<StatisticsRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.9
            public final void onComplete() {
            }

            public final void onSubscribe(Disposable disposable) {
            }

            public final /* synthetic */ void onNext(Object obj) {
                StatisticsRequestResult statisticsRequestResult = (StatisticsRequestResult) obj;
                FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                if (feedbackRequestListener2 != null) {
                    feedbackRequestListener2.onSuccess(new Gson().toJson(statisticsRequestResult));
                }
            }

            public final void onError(Throwable th) {
                FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                if (feedbackRequestListener2 != null) {
                    feedbackRequestListener2.onFailure(th);
                }
                Log.e(FeedbackSDK.TAG, "获取未读消息失败: " + th.getMessage(), th);
            }
        });
    }

    public static void api_getFeedbackHistories(LifecycleOwner lifecycleOwner, String str, final FeedbackRequestListener feedbackRequestListener) {
        checkFeedbackSDKState();
        if (str == null || Pattern.compile("^\\d+$").matcher(str).matches()) {
            ((l) com.jd.feedback.network.a.a(str).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).as(com.uber.autodispose.a.a(com.uber.autodispose.android.lifecycle.a.a(lifecycleOwner)))).a(new Observer<MessageRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.10
                public final void onComplete() {
                }

                public final void onSubscribe(Disposable disposable) {
                }

                public final /* synthetic */ void onNext(Object obj) {
                    MessageRequestResult messageRequestResult = (MessageRequestResult) obj;
                    FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                    if (feedbackRequestListener2 != null) {
                        feedbackRequestListener2.onSuccess(new Gson().toJson(messageRequestResult));
                    }
                }

                public final void onError(Throwable th) {
                    FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                    if (feedbackRequestListener2 != null) {
                        feedbackRequestListener2.onFailure(th);
                    }
                    Log.e(FeedbackSDK.TAG, "获取历史反馈失败: " + th.getMessage(), th);
                }
            });
        }
    }

    public static void api_getFeedbackHistories(String str, final FeedbackRequestListener feedbackRequestListener) {
        checkFeedbackSDKState();
        if (str == null || Pattern.compile("^\\d+$").matcher(str).matches()) {
            com.jd.feedback.network.a.a(str).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer<MessageRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.11
                public final void onComplete() {
                }

                public final void onSubscribe(Disposable disposable) {
                }

                public final /* synthetic */ void onNext(Object obj) {
                    MessageRequestResult messageRequestResult = (MessageRequestResult) obj;
                    FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                    if (feedbackRequestListener2 != null) {
                        feedbackRequestListener2.onSuccess(new Gson().toJson(messageRequestResult));
                    }
                }

                public final void onError(Throwable th) {
                    FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                    if (feedbackRequestListener2 != null) {
                        feedbackRequestListener2.onFailure(th);
                    }
                    Log.e(FeedbackSDK.TAG, "获取历史反馈失败: " + th.getMessage(), th);
                }
            });
        }
    }

    public static void api_getReplyInformation(LifecycleOwner lifecycleOwner, String str, String str2, final FeedbackRequestListener feedbackRequestListener) {
        checkFeedbackSDKState();
        if (str == null || Pattern.compile("^\\d+$").matcher(str).matches()) {
            ((l) com.jd.feedback.network.a.a(str, str2).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).as(com.uber.autodispose.a.a(com.uber.autodispose.android.lifecycle.a.a(lifecycleOwner)))).a(new Observer<MessageRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.13
                public final void onComplete() {
                }

                public final void onSubscribe(Disposable disposable) {
                }

                public final /* synthetic */ void onNext(Object obj) {
                    MessageRequestResult messageRequestResult = (MessageRequestResult) obj;
                    FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                    if (feedbackRequestListener2 != null) {
                        feedbackRequestListener2.onSuccess(new Gson().toJson(messageRequestResult));
                    }
                }

                public final void onError(Throwable th) {
                    FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                    if (feedbackRequestListener2 != null) {
                        feedbackRequestListener2.onFailure(th);
                    }
                    Log.e(FeedbackSDK.TAG, "获取回复列表失败: " + th.getMessage(), th);
                }
            });
        }
    }

    public static void api_getReplyInformation(String str, String str2, final FeedbackRequestListener feedbackRequestListener) {
        checkFeedbackSDKState();
        if (str == null || Pattern.compile("^\\d+$").matcher(str).matches()) {
            com.jd.feedback.network.a.a(str, str2).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(new Observer<MessageRequestResult>() { // from class: com.jd.feedback.FeedbackSDK.14
                public final void onComplete() {
                }

                public final void onSubscribe(Disposable disposable) {
                }

                public final /* synthetic */ void onNext(Object obj) {
                    MessageRequestResult messageRequestResult = (MessageRequestResult) obj;
                    FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                    if (feedbackRequestListener2 != null) {
                        feedbackRequestListener2.onSuccess(new Gson().toJson(messageRequestResult));
                    }
                }

                public final void onError(Throwable th) {
                    FeedbackRequestListener feedbackRequestListener2 = feedbackRequestListener;
                    if (feedbackRequestListener2 != null) {
                        feedbackRequestListener2.onFailure(th);
                    }
                    Log.e(FeedbackSDK.TAG, "获取回复列表失败: " + th.getMessage(), th);
                }
            });
        }
    }

    public static void launch(Context context, @Nullable ArrayList arrayList) {
        ArrayList<Uri> arrayList2;
        checkFeedbackSDKState();
        try {
            arrayList2 = g.a((List) arrayList, true);
        } catch (Exception e) {
            Log.w(TAG, "get image uri from path failed");
            e.printStackTrace();
            arrayList2 = new ArrayList<>();
        }
        Intent intent = new Intent(context, FeedbackActivity.class);
        intent.putParcelableArrayListExtra(INTENT_KEY_IMAGES2ADD, arrayList2);
        context.startActivity(intent);
    }
}
