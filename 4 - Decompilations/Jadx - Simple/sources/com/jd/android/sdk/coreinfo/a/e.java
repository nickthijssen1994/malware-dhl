package com.jd.android.sdk.coreinfo.a;

import android.content.Context;
import android.content.pm.PackageManager;
import android.os.Build;
import android.os.IBinder;
import android.telephony.TelephonyManager;
import android.text.TextUtils;
import com.jd.android.sdk.coreinfo.c.b;
import com.jd.android.sdk.coreinfo.c.c;
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.util.regex.Pattern;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public final class e {
    public static String a(Context context) {
        TelephonyManager telephonyManager;
        String str = "";
        if (context == null) {
            return str;
        }
        try {
            PackageManager packageManager = context.getPackageManager();
            if (packageManager == null || packageManager.checkPermission("android.permission.READ_PHONE_STATE", context.getPackageName()) != 0) {
                return str;
            }
            if (Build.VERSION.SDK_INT < 28) {
                str = b(context);
                if (!a(str)) {
                    str = c(context);
                    if (!a(str)) {
                        str = d(context);
                        if (!a(str)) {
                            str = e(context);
                            if (!a(str)) {
                                str = "";
                            }
                        }
                    }
                }
            }
            if (!TextUtils.isEmpty(str) || (telephonyManager = (TelephonyManager) context.getSystemService("phone")) == null) {
                return str;
            }
            str = telephonyManager.getSubscriberId();
            return str == null ? "" : str;
        } catch (Throwable unused) {
            return str;
        }
    }

    private static String b(Context context) {
        String str = "";
        try {
            Field declaredField = Class.forName("com.android.internal.telephony.IPhoneSubInfo$Stub").getDeclaredField("TRANSACTION_getSubscriberId");
            if (declaredField == null) {
                return str;
            }
            declaredField.setAccessible(true);
            int i = declaredField.getInt(null);
            try {
                str = c.a(b.a("service call iphonesubinfo " + i + " s16 " + context.getPackageName()));
            } catch (Throwable unused) {
            }
            return !a(str) ? c.a(b.a("service call iphonesubinfo ".concat(String.valueOf(i)))) : str;
        } catch (Throwable unused2) {
            return str;
        }
    }

    private static String c(Context context) {
        String str = "";
        try {
            Method declaredMethod = Class.forName("android.os.ServiceManager").getDeclaredMethod("getService", String.class);
            declaredMethod.setAccessible(true);
            IBinder iBinder = (IBinder) declaredMethod.invoke(null, "iphonesubinfo");
            Class<?> cls = Class.forName("com.android.internal.telephony.IPhoneSubInfo$Stub");
            Method declaredMethod2 = cls.getDeclaredMethod("asInterface", IBinder.class);
            declaredMethod2.setAccessible(true);
            Object invoke = declaredMethod2.invoke(null, iBinder);
            if (invoke.getClass().getDeclaredMethod("getSubscriberId", String.class) != null) {
                str = c.a(context.getPackageName(), iBinder, c.a(cls), c.a(invoke, "TRANSACTION_getSubscriberId"));
            }
            return (a(str) || invoke.getClass().getDeclaredMethod("getSubscriberId", new Class[0]) == null) ? str : c.a("", iBinder, c.a(cls), c.a(invoke, "TRANSACTION_getSubscriberId"));
        } catch (Throwable unused) {
            return str;
        }
    }

    private static String d(Context context) {
        Method declaredMethod;
        String str = "";
        try {
            Method declaredMethod2 = Class.forName("android.os.ServiceManager").getDeclaredMethod("getService", String.class);
            declaredMethod2.setAccessible(true);
            Method declaredMethod3 = Class.forName("com.android.internal.telephony.IPhoneSubInfo$Stub").getDeclaredMethod("asInterface", IBinder.class);
            declaredMethod3.setAccessible(true);
            Object invoke = declaredMethod3.invoke(null, (IBinder) declaredMethod2.invoke(null, "iphonesubinfo"));
            try {
                Method declaredMethod4 = invoke.getClass().getDeclaredMethod("getSubscriberId", String.class);
                if (declaredMethod4 != null) {
                    str = (String) declaredMethod4.invoke(invoke, context.getPackageName());
                }
            } catch (Exception unused) {
            }
            return (a(str) || (declaredMethod = invoke.getClass().getDeclaredMethod("getSubscriberId", new Class[0])) == null) ? str : (String) declaredMethod.invoke(invoke, new Object[0]);
        } catch (Throwable unused2) {
            return str;
        }
    }

    private static String e(Context context) {
        Method declaredMethod;
        String str = "";
        try {
            Method declaredMethod2 = TelephonyManager.class.getDeclaredMethod("getSubscriberInfo", new Class[0]);
            declaredMethod2.setAccessible(true);
            Object invoke = declaredMethod2.invoke((TelephonyManager) context.getSystemService("phone"), new Object[0]);
            try {
                Method declaredMethod3 = invoke.getClass().getDeclaredMethod("getSubscriberId", String.class);
                if (declaredMethod3 != null) {
                    str = (String) declaredMethod3.invoke(invoke, context.getPackageName());
                }
            } catch (Throwable unused) {
            }
            return (a(str) || (declaredMethod = invoke.getClass().getDeclaredMethod("getSubscriberId", new Class[0])) == null) ? str : (String) declaredMethod.invoke(invoke, new Object[0]);
        } catch (Throwable unused2) {
            return str;
        }
    }

    private static boolean a(String str) {
        try {
            if (!TextUtils.isEmpty(str)) {
                return Pattern.compile("^[-\\+]?[\\d]*$").matcher(str).matches();
            }
            return false;
        } catch (Throwable unused) {
            return false;
        }
    }
}
