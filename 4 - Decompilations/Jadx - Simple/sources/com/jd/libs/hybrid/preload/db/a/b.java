package com.jd.libs.hybrid.preload.db.a;

import android.database.Cursor;
import androidx.room.EntityDeletionOrUpdateAdapter;
import androidx.room.EntityInsertionAdapter;
import androidx.room.RoomDatabase;
import androidx.room.RoomSQLiteQuery;
import androidx.room.SharedSQLiteStatement;
import androidx.sqlite.db.SupportSQLiteStatement;
import com.jd.libs.hybrid.preload.db.converter.RoomJdJsonObjConverts;
import com.jd.libs.hybrid.preload.db.converter.RoomListStrConverts;
import com.jd.libs.hybrid.preload.db.converter.RoomMapConverts;
import com.jd.libs.hybrid.preload.entity.PreloadInfoEntity;
import java.util.ArrayList;
import java.util.List;

/* loaded from: classes.dex */
public final class b implements a {
    final RoomMapConverts a = new RoomMapConverts();
    final RoomJdJsonObjConverts b = new RoomJdJsonObjConverts();
    final RoomListStrConverts c = new RoomListStrConverts();
    private final RoomDatabase d;
    private final EntityInsertionAdapter e;
    private final EntityDeletionOrUpdateAdapter f;
    private final EntityDeletionOrUpdateAdapter g;
    private final SharedSQLiteStatement h;

    public b(RoomDatabase roomDatabase) {
        this.d = roomDatabase;
        this.e = new EntityInsertionAdapter<PreloadInfoEntity>(roomDatabase) { // from class: com.jd.libs.hybrid.preload.db.a.b.1
            public final /* synthetic */ void bind(SupportSQLiteStatement supportSQLiteStatement, Object obj) {
                PreloadInfoEntity preloadInfoEntity = (PreloadInfoEntity) obj;
                if (preloadInfoEntity.getAppid() == null) {
                    supportSQLiteStatement.bindNull(1);
                } else {
                    supportSQLiteStatement.bindString(1, preloadInfoEntity.getAppid());
                }
                if (preloadInfoEntity.getUrl() == null) {
                    supportSQLiteStatement.bindNull(2);
                } else {
                    supportSQLiteStatement.bindString(2, preloadInfoEntity.getUrl());
                }
                if (preloadInfoEntity.getOriginalUrl() == null) {
                    supportSQLiteStatement.bindNull(3);
                } else {
                    supportSQLiteStatement.bindString(3, preloadInfoEntity.getOriginalUrl());
                }
                if (preloadInfoEntity.getRequestUrl() == null) {
                    supportSQLiteStatement.bindNull(4);
                } else {
                    supportSQLiteStatement.bindString(4, preloadInfoEntity.getRequestUrl());
                }
                if (preloadInfoEntity.getRequestType() == null) {
                    supportSQLiteStatement.bindNull(5);
                } else {
                    supportSQLiteStatement.bindString(5, preloadInfoEntity.getRequestType());
                }
                if (preloadInfoEntity.getFunctionId() == null) {
                    supportSQLiteStatement.bindNull(6);
                } else {
                    supportSQLiteStatement.bindString(6, preloadInfoEntity.getFunctionId());
                }
                if (preloadInfoEntity.getMethod() == null) {
                    supportSQLiteStatement.bindNull(7);
                } else {
                    supportSQLiteStatement.bindString(7, preloadInfoEntity.getMethod());
                }
                String roomMapConverts = b.this.a.toString(preloadInfoEntity.getHeader());
                if (roomMapConverts == null) {
                    supportSQLiteStatement.bindNull(8);
                } else {
                    supportSQLiteStatement.bindString(8, roomMapConverts);
                }
                String roomMapConverts2 = b.this.a.toString(preloadInfoEntity.getParams());
                if (roomMapConverts2 == null) {
                    supportSQLiteStatement.bindNull(9);
                } else {
                    supportSQLiteStatement.bindString(9, roomMapConverts2);
                }
                String roomJdJsonObjConverts = b.this.b.toString(preloadInfoEntity.getBody());
                if (roomJdJsonObjConverts == null) {
                    supportSQLiteStatement.bindNull(10);
                } else {
                    supportSQLiteStatement.bindString(10, roomJdJsonObjConverts);
                }
                String roomListStrConverts = b.this.c.toString(preloadInfoEntity.getExtraKeys());
                if (roomListStrConverts == null) {
                    supportSQLiteStatement.bindNull(11);
                } else {
                    supportSQLiteStatement.bindString(11, roomListStrConverts);
                }
                String roomMapConverts3 = b.this.a.toString(preloadInfoEntity.getMappings());
                if (roomMapConverts3 == null) {
                    supportSQLiteStatement.bindNull(12);
                } else {
                    supportSQLiteStatement.bindString(12, roomMapConverts3);
                }
                supportSQLiteStatement.bindLong(13, (long) preloadInfoEntity.getUrlParamsState());
                if (preloadInfoEntity.getAppMin() == null) {
                    supportSQLiteStatement.bindNull(14);
                } else {
                    supportSQLiteStatement.bindString(14, preloadInfoEntity.getAppMin());
                }
                if (preloadInfoEntity.getAppMax() == null) {
                    supportSQLiteStatement.bindNull(15);
                } else {
                    supportSQLiteStatement.bindString(15, preloadInfoEntity.getAppMax());
                }
            }

            public final String createQuery() {
                return "INSERT OR REPLACE INTO `HybridPreloadInfo`(`appid`,`url`,`originalUrl`,`requestUrl`,`requestType`,`functionId`,`method`,`header`,`params`,`body`,`extraKeys`,`mappings`,`urlParamsState`,`appMin`,`appMax`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
            }
        };
        this.f = new EntityDeletionOrUpdateAdapter<PreloadInfoEntity>(roomDatabase) { // from class: com.jd.libs.hybrid.preload.db.a.b.2
            public final /* synthetic */ void bind(SupportSQLiteStatement supportSQLiteStatement, Object obj) {
                PreloadInfoEntity preloadInfoEntity = (PreloadInfoEntity) obj;
                if (preloadInfoEntity.getAppid() == null) {
                    supportSQLiteStatement.bindNull(1);
                } else {
                    supportSQLiteStatement.bindString(1, preloadInfoEntity.getAppid());
                }
            }

            public final String createQuery() {
                return "DELETE FROM `HybridPreloadInfo` WHERE `appid` = ?";
            }
        };
        this.g = new EntityDeletionOrUpdateAdapter<PreloadInfoEntity>(roomDatabase) { // from class: com.jd.libs.hybrid.preload.db.a.b.3
            public final /* synthetic */ void bind(SupportSQLiteStatement supportSQLiteStatement, Object obj) {
                PreloadInfoEntity preloadInfoEntity = (PreloadInfoEntity) obj;
                if (preloadInfoEntity.getAppid() == null) {
                    supportSQLiteStatement.bindNull(1);
                } else {
                    supportSQLiteStatement.bindString(1, preloadInfoEntity.getAppid());
                }
                if (preloadInfoEntity.getUrl() == null) {
                    supportSQLiteStatement.bindNull(2);
                } else {
                    supportSQLiteStatement.bindString(2, preloadInfoEntity.getUrl());
                }
                if (preloadInfoEntity.getOriginalUrl() == null) {
                    supportSQLiteStatement.bindNull(3);
                } else {
                    supportSQLiteStatement.bindString(3, preloadInfoEntity.getOriginalUrl());
                }
                if (preloadInfoEntity.getRequestUrl() == null) {
                    supportSQLiteStatement.bindNull(4);
                } else {
                    supportSQLiteStatement.bindString(4, preloadInfoEntity.getRequestUrl());
                }
                if (preloadInfoEntity.getRequestType() == null) {
                    supportSQLiteStatement.bindNull(5);
                } else {
                    supportSQLiteStatement.bindString(5, preloadInfoEntity.getRequestType());
                }
                if (preloadInfoEntity.getFunctionId() == null) {
                    supportSQLiteStatement.bindNull(6);
                } else {
                    supportSQLiteStatement.bindString(6, preloadInfoEntity.getFunctionId());
                }
                if (preloadInfoEntity.getMethod() == null) {
                    supportSQLiteStatement.bindNull(7);
                } else {
                    supportSQLiteStatement.bindString(7, preloadInfoEntity.getMethod());
                }
                String roomMapConverts = b.this.a.toString(preloadInfoEntity.getHeader());
                if (roomMapConverts == null) {
                    supportSQLiteStatement.bindNull(8);
                } else {
                    supportSQLiteStatement.bindString(8, roomMapConverts);
                }
                String roomMapConverts2 = b.this.a.toString(preloadInfoEntity.getParams());
                if (roomMapConverts2 == null) {
                    supportSQLiteStatement.bindNull(9);
                } else {
                    supportSQLiteStatement.bindString(9, roomMapConverts2);
                }
                String roomJdJsonObjConverts = b.this.b.toString(preloadInfoEntity.getBody());
                if (roomJdJsonObjConverts == null) {
                    supportSQLiteStatement.bindNull(10);
                } else {
                    supportSQLiteStatement.bindString(10, roomJdJsonObjConverts);
                }
                String roomListStrConverts = b.this.c.toString(preloadInfoEntity.getExtraKeys());
                if (roomListStrConverts == null) {
                    supportSQLiteStatement.bindNull(11);
                } else {
                    supportSQLiteStatement.bindString(11, roomListStrConverts);
                }
                String roomMapConverts3 = b.this.a.toString(preloadInfoEntity.getMappings());
                if (roomMapConverts3 == null) {
                    supportSQLiteStatement.bindNull(12);
                } else {
                    supportSQLiteStatement.bindString(12, roomMapConverts3);
                }
                supportSQLiteStatement.bindLong(13, (long) preloadInfoEntity.getUrlParamsState());
                if (preloadInfoEntity.getAppMin() == null) {
                    supportSQLiteStatement.bindNull(14);
                } else {
                    supportSQLiteStatement.bindString(14, preloadInfoEntity.getAppMin());
                }
                if (preloadInfoEntity.getAppMax() == null) {
                    supportSQLiteStatement.bindNull(15);
                } else {
                    supportSQLiteStatement.bindString(15, preloadInfoEntity.getAppMax());
                }
                if (preloadInfoEntity.getAppid() == null) {
                    supportSQLiteStatement.bindNull(16);
                } else {
                    supportSQLiteStatement.bindString(16, preloadInfoEntity.getAppid());
                }
            }

            public final String createQuery() {
                return "UPDATE OR ABORT `HybridPreloadInfo` SET `appid` = ?,`url` = ?,`originalUrl` = ?,`requestUrl` = ?,`requestType` = ?,`functionId` = ?,`method` = ?,`header` = ?,`params` = ?,`body` = ?,`extraKeys` = ?,`mappings` = ?,`urlParamsState` = ?,`appMin` = ?,`appMax` = ? WHERE `appid` = ?";
            }
        };
        this.h = new SharedSQLiteStatement(roomDatabase) { // from class: com.jd.libs.hybrid.preload.db.a.b.4
            public final String createQuery() {
                return "DELETE FROM hybridpreloadinfo";
            }
        };
    }

    @Override // com.jd.libs.hybrid.preload.db.a.a
    public final PreloadInfoEntity a(String str) {
        RoomSQLiteQuery roomSQLiteQuery;
        Throwable th;
        PreloadInfoEntity preloadInfoEntity;
        RoomSQLiteQuery acquire = RoomSQLiteQuery.acquire("SELECT * FROM HybridPreloadInfo WHERE url=? OR originalUrl=? LIMIT 1", 2);
        if (str == null) {
            acquire.bindNull(1);
        } else {
            acquire.bindString(1, str);
        }
        if (str == null) {
            acquire.bindNull(2);
        } else {
            acquire.bindString(2, str);
        }
        Cursor query = this.d.query(acquire);
        try {
            int columnIndexOrThrow = query.getColumnIndexOrThrow("appid");
            int columnIndexOrThrow2 = query.getColumnIndexOrThrow("url");
            int columnIndexOrThrow3 = query.getColumnIndexOrThrow("originalUrl");
            int columnIndexOrThrow4 = query.getColumnIndexOrThrow("requestUrl");
            int columnIndexOrThrow5 = query.getColumnIndexOrThrow("requestType");
            int columnIndexOrThrow6 = query.getColumnIndexOrThrow("functionId");
            int columnIndexOrThrow7 = query.getColumnIndexOrThrow("method");
            int columnIndexOrThrow8 = query.getColumnIndexOrThrow("header");
            int columnIndexOrThrow9 = query.getColumnIndexOrThrow("params");
            int columnIndexOrThrow10 = query.getColumnIndexOrThrow("body");
            int columnIndexOrThrow11 = query.getColumnIndexOrThrow("extraKeys");
            int columnIndexOrThrow12 = query.getColumnIndexOrThrow("mappings");
            int columnIndexOrThrow13 = query.getColumnIndexOrThrow("urlParamsState");
            roomSQLiteQuery = acquire;
            try {
                int columnIndexOrThrow14 = query.getColumnIndexOrThrow("appMin");
                int columnIndexOrThrow15 = query.getColumnIndexOrThrow("appMax");
                if (query.moveToFirst()) {
                    preloadInfoEntity = new PreloadInfoEntity();
                    preloadInfoEntity.setAppid(query.getString(columnIndexOrThrow));
                    preloadInfoEntity.setUrl(query.getString(columnIndexOrThrow2));
                    preloadInfoEntity.setOriginalUrl(query.getString(columnIndexOrThrow3));
                    preloadInfoEntity.setRequestUrl(query.getString(columnIndexOrThrow4));
                    preloadInfoEntity.setRequestType(query.getString(columnIndexOrThrow5));
                    preloadInfoEntity.setFunctionId(query.getString(columnIndexOrThrow6));
                    preloadInfoEntity.setMethod(query.getString(columnIndexOrThrow7));
                    preloadInfoEntity.setHeader(this.a.toMap(query.getString(columnIndexOrThrow8)));
                    preloadInfoEntity.setParams(this.a.toMap(query.getString(columnIndexOrThrow9)));
                    preloadInfoEntity.setBody(this.b.toJson(query.getString(columnIndexOrThrow10)));
                    preloadInfoEntity.setExtraKeys(this.c.toArray(query.getString(columnIndexOrThrow11)));
                    preloadInfoEntity.setMappings(this.a.toMap(query.getString(columnIndexOrThrow12)));
                    preloadInfoEntity.setUrlParamsState(query.getInt(columnIndexOrThrow13));
                    preloadInfoEntity.setAppMin(query.getString(columnIndexOrThrow14));
                    preloadInfoEntity.setAppMax(query.getString(columnIndexOrThrow15));
                } else {
                    preloadInfoEntity = null;
                }
                query.close();
                roomSQLiteQuery.release();
                return preloadInfoEntity;
            } catch (Throwable th2) {
                th = th2;
                query.close();
                roomSQLiteQuery.release();
                throw th;
            }
        } catch (Throwable th3) {
            th = th3;
            roomSQLiteQuery = acquire;
        }
    }

    @Override // com.jd.libs.hybrid.preload.db.a.a
    public final List<PreloadInfoEntity> a() {
        RoomSQLiteQuery roomSQLiteQuery;
        Throwable th;
        b bVar = this;
        RoomSQLiteQuery acquire = RoomSQLiteQuery.acquire("SELECT * FROM HybridPreloadInfo", 0);
        Cursor query = bVar.d.query(acquire);
        try {
            int columnIndexOrThrow = query.getColumnIndexOrThrow("appid");
            int columnIndexOrThrow2 = query.getColumnIndexOrThrow("url");
            int columnIndexOrThrow3 = query.getColumnIndexOrThrow("originalUrl");
            int columnIndexOrThrow4 = query.getColumnIndexOrThrow("requestUrl");
            int columnIndexOrThrow5 = query.getColumnIndexOrThrow("requestType");
            int columnIndexOrThrow6 = query.getColumnIndexOrThrow("functionId");
            int columnIndexOrThrow7 = query.getColumnIndexOrThrow("method");
            int columnIndexOrThrow8 = query.getColumnIndexOrThrow("header");
            int columnIndexOrThrow9 = query.getColumnIndexOrThrow("params");
            int columnIndexOrThrow10 = query.getColumnIndexOrThrow("body");
            int columnIndexOrThrow11 = query.getColumnIndexOrThrow("extraKeys");
            int columnIndexOrThrow12 = query.getColumnIndexOrThrow("mappings");
            int columnIndexOrThrow13 = query.getColumnIndexOrThrow("urlParamsState");
            roomSQLiteQuery = acquire;
            try {
                int columnIndexOrThrow14 = query.getColumnIndexOrThrow("appMin");
                int columnIndexOrThrow15 = query.getColumnIndexOrThrow("appMax");
                ArrayList arrayList = new ArrayList(query.getCount());
                while (query.moveToNext()) {
                    PreloadInfoEntity preloadInfoEntity = new PreloadInfoEntity();
                    preloadInfoEntity.setAppid(query.getString(columnIndexOrThrow));
                    preloadInfoEntity.setUrl(query.getString(columnIndexOrThrow2));
                    preloadInfoEntity.setOriginalUrl(query.getString(columnIndexOrThrow3));
                    preloadInfoEntity.setRequestUrl(query.getString(columnIndexOrThrow4));
                    preloadInfoEntity.setRequestType(query.getString(columnIndexOrThrow5));
                    preloadInfoEntity.setFunctionId(query.getString(columnIndexOrThrow6));
                    preloadInfoEntity.setMethod(query.getString(columnIndexOrThrow7));
                    preloadInfoEntity.setHeader(bVar.a.toMap(query.getString(columnIndexOrThrow8)));
                    preloadInfoEntity.setParams(bVar.a.toMap(query.getString(columnIndexOrThrow9)));
                    preloadInfoEntity.setBody(bVar.b.toJson(query.getString(columnIndexOrThrow10)));
                    preloadInfoEntity.setExtraKeys(bVar.c.toArray(query.getString(columnIndexOrThrow11)));
                    preloadInfoEntity.setMappings(bVar.a.toMap(query.getString(columnIndexOrThrow12)));
                    preloadInfoEntity.setUrlParamsState(query.getInt(columnIndexOrThrow13));
                    columnIndexOrThrow13 = columnIndexOrThrow13;
                    preloadInfoEntity.setAppMin(query.getString(columnIndexOrThrow14));
                    preloadInfoEntity.setAppMax(query.getString(columnIndexOrThrow15));
                    arrayList.add(preloadInfoEntity);
                    columnIndexOrThrow15 = columnIndexOrThrow15;
                    columnIndexOrThrow14 = columnIndexOrThrow14;
                    columnIndexOrThrow = columnIndexOrThrow;
                    arrayList = arrayList;
                    bVar = this;
                }
                query.close();
                roomSQLiteQuery.release();
                return arrayList;
            } catch (Throwable th2) {
                th = th2;
                query.close();
                roomSQLiteQuery.release();
                throw th;
            }
        } catch (Throwable th3) {
            th = th3;
            roomSQLiteQuery = acquire;
        }
    }

    @Override // com.jd.libs.hybrid.preload.db.a.a
    public final void a(List<PreloadInfoEntity> list) {
        this.d.beginTransaction();
        try {
            this.e.insert(list);
            this.d.setTransactionSuccessful();
        } finally {
            this.d.endTransaction();
        }
    }

    @Override // com.jd.libs.hybrid.preload.db.a.a
    public final void b() {
        SupportSQLiteStatement acquire = this.h.acquire();
        this.d.beginTransaction();
        try {
            acquire.executeUpdateDelete();
            this.d.setTransactionSuccessful();
        } finally {
            this.d.endTransaction();
            this.h.release(acquire);
        }
    }

    @Override // com.jd.libs.hybrid.preload.db.a.a
    public final void b(List<PreloadInfoEntity> list) {
        this.d.beginTransaction();
        try {
            this.f.handleMultiple(list);
            this.d.setTransactionSuccessful();
        } finally {
            this.d.endTransaction();
        }
    }
}
