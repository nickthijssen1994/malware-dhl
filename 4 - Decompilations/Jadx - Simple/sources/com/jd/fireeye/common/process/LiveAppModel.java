package com.jd.fireeye.common.process;

import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.os.Build;
import android.os.Parcel;
import android.os.Parcelable;
import com.jd.fireeye.common.g;
import java.io.File;
import java.io.IOException;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class LiveAppModel extends LiveProcessModel {
    private static final String g;
    private static final String h;
    public boolean a;
    public int b;
    private static final boolean f = new File("/dev/cpuctl/tasks").exists();
    public static final Parcelable.Creator<LiveAppModel> CREATOR = new c();

    public LiveAppModel() {
    }

    public LiveAppModel(int i) throws IOException, NotAndroidAppProcessException {
        super(i);
        boolean z;
        int i2;
        if (this.c == null || !this.c.contains(".") || this.c.contains("/") || !this.c.matches(h)) {
            if (g.a) {
                g.a("LiveAppModel.name = " + this.c);
            }
            throw new NotAndroidAppProcessException(i);
        }
        if (f) {
            Cgroup a = Cgroup.a(this.e);
            ControlGroup a2 = a.a("cpuacct");
            ControlGroup a3 = a.a("cpu");
            if (Build.VERSION.SDK_INT >= 21) {
                if (a3 == null || a2 == null || !a2.c.contains("pid_")) {
                    throw new NotAndroidAppProcessException(i);
                }
                z = !a3.c.contains("bg_non_interactive");
                try {
                    i2 = Integer.parseInt(a2.c.split("/")[1].replace("uid_", ""));
                } catch (Exception unused) {
                    i2 = Status.a(this.e).a();
                }
            } else if (a3 == null || a2 == null || !a3.c.contains("apps")) {
                throw new NotAndroidAppProcessException(i);
            } else {
                z = !a3.c.contains("bg_non_interactive");
                try {
                    i2 = Integer.parseInt(a2.c.substring(a2.c.lastIndexOf("/") + 1));
                } catch (Exception unused2) {
                    i2 = Status.a(this.e).a();
                }
            }
        } else {
            Stat a4 = Stat.a(this.e);
            Status a5 = Status.a(this.e);
            z = a4.b() == 0;
            i2 = a5.a();
        }
        this.a = z;
        this.b = i2;
    }

    public final String a() {
        return this.c.split(":")[0];
    }

    private PackageInfo a(Context context, int i) throws PackageManager.NameNotFoundException {
        return context.getPackageManager().getPackageInfo(a(), i);
    }

    @Override // com.jd.fireeye.common.process.LiveProcessModel, android.os.Parcelable
    public void writeToParcel(Parcel parcel, int i) {
        super.writeToParcel(parcel, i);
        parcel.writeByte(this.a ? (byte) 1 : 0);
        parcel.writeInt(this.b);
    }

    public LiveAppModel(Parcel parcel) {
        super(parcel);
        this.a = parcel.readByte() != 0;
        this.b = parcel.readInt();
    }

    /* compiled from: TbsSdkJava */
    /* loaded from: classes.dex */
    public static final class NotAndroidAppProcessException extends Exception {
        public NotAndroidAppProcessException(int i) {
            super(String.format("The process %d does not belong to any application", Integer.valueOf(i)));
        }
    }

    @Override // java.lang.Object
    public String toString() {
        return this.b + g + this.e + g + this.c + g + this.d;
    }
}
