package com.jd.hybrid.downloader.a;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.text.TextUtils;
import com.jd.libs.hybrid.base.a;
import com.jd.libs.hybrid.base.b.c;
import com.jd.push.common.constant.Constants;
import com.jingdong.jdsdk.utils.NetUtils;
import java.util.HashSet;

/* loaded from: classes.dex */
public final class b implements a {
    final Object a;
    private Context b;
    private volatile BroadcastReceiver c = null;

    public b(Context context, Object obj) {
        this.b = context.getApplicationContext();
        this.a = obj;
    }

    @Override // com.jd.hybrid.downloader.a.a
    public final boolean a() {
        boolean z;
        String networkType = NetUtils.getNetworkType();
        if (TextUtils.isEmpty(networkType) || "UNKNOWN".equalsIgnoreCase(networkType)) {
            z = false;
        } else {
            HashSet hashSet = a.c != null ? new HashSet(a.c) : null;
            c.c("NetworkDownloadCondition", "download network requirement = ".concat(String.valueOf(hashSet)));
            z = (hashSet == null || hashSet.isEmpty()) ? true : hashSet.contains(networkType.toLowerCase());
        }
        c.c("NetworkDownloadCondition", "Current network type = " + networkType + ", requirement = " + a.c + ", condition pass = " + z);
        return z;
    }

    @Override // com.jd.hybrid.downloader.a.a
    public final void b() {
        if (this.c == null) {
            Context context = this.b;
            AnonymousClass1 r1 = new BroadcastReceiver() { // from class: com.jd.hybrid.downloader.a.b.1
                @Override // android.content.BroadcastReceiver
                public final void onReceive(Context context2, Intent intent) {
                    if (!b.this.a()) {
                        c.c("NetworkDownloadCondition", "Download condition(network) DISABLE");
                        return;
                    }
                    c.c("NetworkDownloadCondition", "Download condition(network) ENABLE");
                    synchronized (b.this.a) {
                        b.this.a.notifyAll();
                    }
                }
            };
            this.c = r1;
            context.registerReceiver(r1, new IntentFilter(Constants.BroadcastAction.ACTION_NETWORK_ACTION));
            c.c("NetworkDownloadCondition", "register receiver of network change.");
        }
    }

    @Override // com.jd.hybrid.downloader.a.a
    public final void c() {
        if (this.c != null) {
            this.b.unregisterReceiver(this.c);
            c.c("NetworkDownloadCondition", "unregister receiver of network change.");
            this.c = null;
        }
    }
}
