package com.jd.framework.network.toolbox;

import com.android.volley.DefaultRetryPolicy;
import com.android.volley.Request;
import com.android.volley.Response;
import com.android.volley.error.HttpsError;
import com.android.volley.error.IpError;
import com.android.volley.error.JsonExceptionError;
import com.android.volley.error.VolleyError;
import com.android.volley.toolbox.ByteArrayRequest;
import com.android.volley.toolbox.FastJsonArrayRequest;
import com.android.volley.toolbox.FastJsonObjectRequest;
import com.android.volley.toolbox.JsonArrayRequest;
import com.android.volley.toolbox.JsonObjectRequest;
import com.android.volley.toolbox.StringRequest;
import com.android.volley.toolbox.VerifyCodeRequest;
import com.jd.framework.json.JDJSONArray;
import com.jd.framework.json.JDJSONObject;
import com.jd.framework.network.JDResponse;
import com.jd.framework.network.JDResponseListener;
import com.jd.framework.network.error.JDError;
import com.jd.framework.network.error.JDHttpsError;
import com.jd.framework.network.error.JDIpError;
import com.jd.framework.network.error.JDJsonExceptionError;
import com.jd.framework.network.error.JDSSLError;
import com.jd.framework.network.request.JDByteArrayRequest;
import com.jd.framework.network.request.JDFastJsonArrayRequest;
import com.jd.framework.network.request.JDFastJsonObjectRequest;
import com.jd.framework.network.request.JDJsonArrayRequest;
import com.jd.framework.network.request.JDJsonObjectRequest;
import com.jd.framework.network.request.JDRequest;
import com.jd.framework.network.request.JDStringRequest;
import com.jd.framework.network.request.JDVerifyCodeRequest;
import javax.net.ssl.SSLHandshakeException;
import org.json.JSONArray;
import org.json.JSONObject;

/* compiled from: TbsSdkJava */
/* loaded from: classes.dex */
public class JDNetworkConvertor {
    public static <T> Request<T> toRequest(JDRequest<T> jDRequest) {
        StringRequest stringRequest;
        if (jDRequest instanceof JDStringRequest) {
            JDStringRequest jDStringRequest = (JDStringRequest) jDRequest;
            final JDResponseListener<String> responseListener = jDStringRequest.getResponseListener();
            stringRequest = new StringRequest(jDStringRequest.getMethod(), jDStringRequest.getUrl(), new Response.Listener<String>() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.1
                public void onResponse(Response<String> response) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onEnd(JDNetworkConvertor.toJDResponse(response));
                    }
                }
            }, new Response.ErrorListener() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.2
                public void onErrorResponse(VolleyError volleyError) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onError(JDNetworkConvertor.toJDError(volleyError));
                    }
                }

                public void onStart() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onStart();
                    }
                }

                public void onCancel() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onCancel();
                    }
                }
            });
        } else if (jDRequest instanceof JDJsonArrayRequest) {
            JDJsonArrayRequest jDJsonArrayRequest = (JDJsonArrayRequest) jDRequest;
            final JDResponseListener<JSONArray> responseListener2 = jDJsonArrayRequest.getResponseListener();
            stringRequest = new JsonArrayRequest(jDJsonArrayRequest.getUrl(), new Response.Listener<JSONArray>() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.3
                public void onResponse(Response<JSONArray> response) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onEnd(JDNetworkConvertor.toJDResponse(response));
                    }
                }
            }, new Response.ErrorListener() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.4
                public void onErrorResponse(VolleyError volleyError) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onError(JDNetworkConvertor.toJDError(volleyError));
                    }
                }

                public void onStart() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onStart();
                    }
                }

                public void onCancel() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onCancel();
                    }
                }
            });
        } else if (jDRequest instanceof JDJsonObjectRequest) {
            JDJsonObjectRequest jDJsonObjectRequest = (JDJsonObjectRequest) jDRequest;
            final JDResponseListener<JSONObject> responseListener3 = jDJsonObjectRequest.getResponseListener();
            stringRequest = new JsonObjectRequest(jDJsonObjectRequest.getMethod(), jDJsonObjectRequest.getUrl(), new Response.Listener<JSONObject>() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.5
                public void onResponse(Response<JSONObject> response) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onEnd(JDNetworkConvertor.toJDResponse(response));
                    }
                }
            }, new Response.ErrorListener() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.6
                public void onErrorResponse(VolleyError volleyError) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onError(JDNetworkConvertor.toJDError(volleyError));
                    }
                }

                public void onStart() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onStart();
                    }
                }

                public void onCancel() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onCancel();
                    }
                }
            }, jDJsonObjectRequest.getPostBody());
        } else if (jDRequest instanceof JDFastJsonArrayRequest) {
            JDFastJsonArrayRequest jDFastJsonArrayRequest = (JDFastJsonArrayRequest) jDRequest;
            final JDResponseListener<JDJSONArray> responseListener4 = jDFastJsonArrayRequest.getResponseListener();
            stringRequest = new FastJsonArrayRequest(jDFastJsonArrayRequest.getUrl(), new Response.Listener<JDJSONArray>() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.7
                public void onResponse(Response<JDJSONArray> response) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onEnd(JDNetworkConvertor.toJDResponse(response));
                    }
                }
            }, new Response.ErrorListener() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.8
                public void onErrorResponse(VolleyError volleyError) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onError(JDNetworkConvertor.toJDError(volleyError));
                    }
                }

                public void onStart() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onStart();
                    }
                }

                public void onCancel() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onCancel();
                    }
                }
            });
        } else if (jDRequest instanceof JDFastJsonObjectRequest) {
            JDFastJsonObjectRequest jDFastJsonObjectRequest = (JDFastJsonObjectRequest) jDRequest;
            final JDResponseListener<JDJSONObject> responseListener5 = jDFastJsonObjectRequest.getResponseListener();
            stringRequest = new FastJsonObjectRequest(jDFastJsonObjectRequest.getMethod(), jDFastJsonObjectRequest.getUrl(), new Response.Listener<JDJSONObject>() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.9
                public void onResponse(Response<JDJSONObject> response) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onEnd(JDNetworkConvertor.toJDResponse(response));
                    }
                }
            }, new Response.ErrorListener() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.10
                public void onErrorResponse(VolleyError volleyError) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onError(JDNetworkConvertor.toJDError(volleyError));
                    }
                }

                public void onStart() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onStart();
                    }
                }

                public void onCancel() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onCancel();
                    }
                }
            }, jDFastJsonObjectRequest.getPostBody());
        } else if (jDRequest instanceof JDVerifyCodeRequest) {
            JDVerifyCodeRequest jDVerifyCodeRequest = (JDVerifyCodeRequest) jDRequest;
            final JDResponseListener<byte[]> responseListener6 = jDVerifyCodeRequest.getResponseListener();
            stringRequest = new VerifyCodeRequest(jDVerifyCodeRequest.getMethod(), jDVerifyCodeRequest.getUrl(), new Response.Listener<byte[]>() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.11
                public void onResponse(Response<byte[]> response) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onEnd(JDNetworkConvertor.toJDResponse(response));
                    }
                }
            }, new Response.ErrorListener() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.12
                public void onErrorResponse(VolleyError volleyError) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onError(JDNetworkConvertor.toJDError(volleyError));
                    }
                }

                public void onStart() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onStart();
                    }
                }

                public void onCancel() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onCancel();
                    }
                }
            });
        } else if (jDRequest instanceof JDByteArrayRequest) {
            JDByteArrayRequest jDByteArrayRequest = (JDByteArrayRequest) jDRequest;
            final JDResponseListener<byte[]> responseListener7 = jDByteArrayRequest.getResponseListener();
            stringRequest = new ByteArrayRequest(jDByteArrayRequest.getMethod(), jDByteArrayRequest.getUrl(), new Response.Listener<byte[]>() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.13
                public void onResponse(Response<byte[]> response) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onEnd(JDNetworkConvertor.toJDResponse(response));
                    }
                }
            }, new Response.ErrorListener() { // from class: com.jd.framework.network.toolbox.JDNetworkConvertor.14
                public void onErrorResponse(VolleyError volleyError) {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onError(JDNetworkConvertor.toJDError(volleyError));
                    }
                }

                public void onStart() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onStart();
                    }
                }

                public void onCancel() {
                    JDResponseListener jDResponseListener = JDResponseListener.this;
                    if (jDResponseListener != null) {
                        jDResponseListener.onCancel();
                    }
                }
            });
        } else {
            stringRequest = null;
        }
        setupParameter(stringRequest, jDRequest);
        return stringRequest;
    }

    public static void setupParameter(Request<?> request, JDRequest<?> jDRequest) {
        if (jDRequest.getPriority() != null) {
            request.setPriority(jDRequest.getPriority());
        }
        if (jDRequest.getTag() != null) {
            request.setTag(jDRequest.getTag());
        }
        if (jDRequest.getHeader() != null) {
            request.setHeaders(jDRequest.getHeader());
        }
        if (jDRequest.getParams() != null) {
            request.setParams(jDRequest.getParams());
        }
        request.setCacheTime(jDRequest.getCacheTime());
        request.setCacheModel(jDRequest.getCacheModel());
        request.setCacheKey(jDRequest.getCacheKey());
        request.setUseCookies(jDRequest.isUseCookies());
        request.setSequence(jDRequest.getSequence());
        request.setUseDomainName(jDRequest.isUseDomainName());
        request.setCallbackInMainThread(jDRequest.isCallbackInMainThread());
        request.setUseOkhttpFlag(jDRequest.getUseOkhttpFlag());
        request.setForce2HttpFlag(jDRequest.isForce2HttpFlag());
        request.setServiceKey(jDRequest.getServiceKey());
        jDRequest.setMaxNumRetries(0);
        request.setMaxRetryNum(jDRequest.getMaxNumRetries());
        request.setRetryPolicy(new DefaultRetryPolicy(jDRequest.getTimeoutMs() > 0 ? jDRequest.getTimeoutMs() : 2500, jDRequest.getMaxNumRetries(), 1.0f));
    }

    public static JDError toJDError(VolleyError volleyError) {
        if (volleyError instanceof HttpsError.HttpsIPError) {
            return new JDHttpsError.JDHttpsIPError((HttpsError.HttpsIPError) volleyError);
        }
        if (volleyError instanceof HttpsError.HttpsDomainError) {
            return new JDHttpsError.JDHttpsDomainError((HttpsError.HttpsDomainError) volleyError);
        }
        if (volleyError instanceof JsonExceptionError) {
            return new JDJsonExceptionError(volleyError, ((JsonExceptionError) volleyError).isParseError());
        }
        if (volleyError instanceof IpError) {
            return new JDIpError(volleyError);
        }
        if (volleyError.getCause() instanceof SSLHandshakeException) {
            return new JDSSLError(volleyError);
        }
        return new JDError(volleyError);
    }

    public static <T> JDResponse<T> toJDResponse(Response<T> response) {
        return new JDResponse<>(response.statusCode, response.isCache(), response.result, response.getHeaders());
    }
}
