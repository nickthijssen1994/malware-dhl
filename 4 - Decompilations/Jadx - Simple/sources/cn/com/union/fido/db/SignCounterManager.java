package cn.com.union.fido.db;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import cn.com.union.fido.db.help.SQLiteHelper;

/* loaded from: classes.dex */
public class SignCounterManager {
    private SQLiteDatabase db;
    private SQLiteHelper helper;

    public SignCounterManager(Context context) {
        this.helper = SQLiteHelper.getInstance(context);
        this.db = this.helper.getWritableDatabase();
    }

    private void addCounter(Object[] objArr) {
        this.db.beginTransaction();
        try {
            SQLiteDatabase sQLiteDatabase = this.db;
            StringBuilder sb = new StringBuilder("INSERT INTO ");
            this.helper.getClass();
            sb.append("signcounter VALUES(null, ?, ?, ?, ?)");
            sQLiteDatabase.execSQL(sb.toString(), objArr);
            this.db.setTransactionSuccessful();
        } finally {
            this.db.endTransaction();
        }
    }

    private void updateCounter(int i, String[] strArr) {
        ContentValues contentValues = new ContentValues();
        contentValues.put("signCounter", Integer.valueOf(i));
        SQLiteDatabase sQLiteDatabase = this.db;
        this.helper.getClass();
        sQLiteDatabase.update("signcounter", contentValues, " aaid = ? and keyID = ? and userName = ? ", strArr);
    }

    /* JADX WARN: Code restructure failed: missing block: B:15:0x0060, code lost:
        if (0 == 0) goto L_0x0063;
     */
    /* JADX WARN: Code restructure failed: missing block: B:16:0x0063, code lost:
        return r1;
     */
    /* JADX WARN: Code restructure failed: missing block: B:8:0x0052, code lost:
        if (r0 != null) goto L_0x0054;
     */
    /* JADX WARN: Code restructure failed: missing block: B:9:0x0054, code lost:
        r0.close();
     */
    /* Code decompiled incorrectly, please refer to instructions dump */
    public int updateOrAddCounter(java.lang.String r9, java.lang.String r10, java.lang.String r11) {
        /*
            r8 = this;
            r0 = 0
            android.database.sqlite.SQLiteDatabase r1 = r8.db     // Catch: Throwable -> 0x005f, all -> 0x0058
            java.lang.StringBuilder r2 = new java.lang.StringBuilder     // Catch: Throwable -> 0x005f, all -> 0x0058
            java.lang.String r3 = "SELECT signCounter FROM "
            r2.<init>(r3)     // Catch: Throwable -> 0x005f, all -> 0x0058
            cn.com.union.fido.db.help.SQLiteHelper r3 = r8.helper     // Catch: Throwable -> 0x005f, all -> 0x0058
            r3.getClass()     // Catch: Throwable -> 0x005f, all -> 0x0058
            java.lang.String r3 = "signcounter WHERE aaid = ? and keyID = ? and userName = ? "
            r2.append(r3)     // Catch: Throwable -> 0x005f, all -> 0x0058
            java.lang.String r2 = r2.toString()     // Catch: Throwable -> 0x005f, all -> 0x0058
            r3 = 3
            java.lang.String[] r4 = new java.lang.String[r3]     // Catch: Throwable -> 0x005f, all -> 0x0058
            r5 = 0
            r4[r5] = r9     // Catch: Throwable -> 0x005f, all -> 0x0058
            r6 = 1
            r4[r6] = r10     // Catch: Throwable -> 0x005f, all -> 0x0058
            r7 = 2
            r4[r7] = r11     // Catch: Throwable -> 0x005f, all -> 0x0058
            android.database.Cursor r0 = r1.rawQuery(r2, r4)     // Catch: Throwable -> 0x005f, all -> 0x0058
            boolean r1 = r0.moveToNext()     // Catch: Throwable -> 0x005f, all -> 0x0058
            if (r1 == 0) goto L_0x003f
            int r1 = r0.getInt(r5)     // Catch: Throwable -> 0x005f, all -> 0x0058
            int r1 = r1 + r6
            java.lang.String[] r2 = new java.lang.String[r3]     // Catch: Throwable -> 0x005f, all -> 0x0058
            r2[r5] = r9     // Catch: Throwable -> 0x005f, all -> 0x0058
            r2[r6] = r10     // Catch: Throwable -> 0x005f, all -> 0x0058
            r2[r7] = r11     // Catch: Throwable -> 0x005f, all -> 0x0058
            r8.updateCounter(r1, r2)     // Catch: Throwable -> 0x005f, all -> 0x0058
            goto L_0x0052
        L_0x003f:
            r1 = 4
            java.lang.Object[] r1 = new java.lang.Object[r1]     // Catch: Throwable -> 0x005f, all -> 0x0058
            r1[r5] = r9     // Catch: Throwable -> 0x005f, all -> 0x0058
            r1[r6] = r10     // Catch: Throwable -> 0x005f, all -> 0x0058
            r1[r7] = r11     // Catch: Throwable -> 0x005f, all -> 0x0058
            java.lang.Integer r9 = java.lang.Integer.valueOf(r6)     // Catch: Throwable -> 0x005f, all -> 0x0058
            r1[r3] = r9     // Catch: Throwable -> 0x005f, all -> 0x0058
            r8.addCounter(r1)     // Catch: Throwable -> 0x005f, all -> 0x0058
            r1 = 1
        L_0x0052:
            if (r0 == 0) goto L_0x0063
        L_0x0054:
            r0.close()
            goto L_0x0063
        L_0x0058:
            r9 = move-exception
            if (r0 == 0) goto L_0x005e
            r0.close()
        L_0x005e:
            throw r9
        L_0x005f:
            r1 = -1
            if (r0 == 0) goto L_0x0063
            goto L_0x0054
        L_0x0063:
            return r1
        */
        throw new UnsupportedOperationException("Method not decompiled: cn.com.union.fido.db.SignCounterManager.updateOrAddCounter(java.lang.String, java.lang.String, java.lang.String):int");
    }
}
